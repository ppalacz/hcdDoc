<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /><title>DlInformationSearchByNameEcsTest xref</title>
<link type="text/css" rel="stylesheet" href="../../../../../../../../stylesheet.css" />
</head>
<body>
<div id="overview"><a href="../../../../../../../../../../../../../../../../../../apidocs/gov/ca/dmv/ease/ecs/impl/integration/test/DlInformationSearchByNameEcsTest.html">View Javadoc</a></div><pre>

<a name="1" href="#1">1</a>   <em>/**<em>*</em></em>
<a name="2" href="#2">2</a>   <em> * This source code contains State of California's confidential and trade secret information.</em>
<a name="3" href="#3">3</a>   <em> * Any use of this code other than for backup is strictly prohibited.</em>
<a name="4" href="#4">4</a>   <em> * Copyright State of California (c) 2009</em>
<a name="5" href="#5">5</a>   <em> * <a href="http://www.california.gov" target="alexandria_uri">http://www.california.gov</a></em>
<a name="6" href="#6">6</a>   <em> */</em>
<a name="7" href="#7">7</a>   <strong>package</strong> gov.ca.dmv.ease.ecs.impl.integration.test;
<a name="8" href="#8">8</a>   
<a name="9" href="#9">9</a>   <strong>import</strong> gov.ca.dmv.ease.app.context.impl.EaseApplicationContext;
<a name="10" href="#10">10</a>  <strong>import</strong> gov.ca.dmv.ease.bo.application.impl.VrInformationRequest;
<a name="11" href="#11">11</a>  <strong>import</strong> gov.ca.dmv.ease.bo.code.impl.CodeSetElement;
<a name="12" href="#12">12</a>  <strong>import</strong> gov.ca.dmv.ease.bo.locator.AddressType;
<a name="13" href="#13">13</a>  <strong>import</strong> gov.ca.dmv.ease.bo.locator.impl.Address;
<a name="14" href="#14">14</a>  <strong>import</strong> gov.ca.dmv.ease.bo.subject.impl.Person;
<a name="15" href="#15">15</a>  <strong>import</strong> gov.ca.dmv.ease.bo.subject.impl.PersonName;
<a name="16" href="#16">16</a>  <strong>import</strong> gov.ca.dmv.ease.bo.user.impl.UserContext;
<a name="17" href="#17">17</a>  <strong>import</strong> gov.ca.dmv.ease.bo.vr.record.impl.VehicleRecord;
<a name="18" href="#18">18</a>  <strong>import</strong> gov.ca.dmv.ease.ecs.request.factory.impl.EcsRequestFactory;
<a name="19" href="#19">19</a>  <strong>import</strong> gov.ca.dmv.ease.ecs.request.impl.DlInformationSearchByNameRequestEcs;
<a name="20" href="#20">20</a>  <strong>import</strong> gov.ca.dmv.ease.ecs.response.impl.DataStreamResponseEcs;
<a name="21" href="#21">21</a>  <strong>import</strong> gov.ca.dmv.ease.ecs.spring.junit.AbstractSpringEcsTest;
<a name="22" href="#22">22</a>  
<a name="23" href="#23">23</a>  <strong>import</strong> java.util.Calendar;
<a name="24" href="#24">24</a>  
<a name="25" href="#25">25</a>  <strong>import</strong> junit.framework.Assert;
<a name="26" href="#26">26</a>  
<a name="27" href="#27">27</a>  <strong>import</strong> org.junit.Test;
<a name="28" href="#28">28</a>  <strong>import</strong> org.springframework.beans.factory.annotation.Autowired;
<a name="29" href="#29">29</a>  
<a name="30" href="#30">30</a>  <em>/**<em>*</em></em>
<a name="31" href="#31">31</a>  <em> * Description: I am the unit test for DlInformationSearchByNameRequestEcsTest to test the message flow through ECS and CAMV.</em>
<a name="32" href="#32">32</a>  <em> * File: DlInformationSearchByNameEcsTest.java</em>
<a name="33" href="#33">33</a>  <em> * Module:  gov.ca.dmv.ease.ecs.impl.integration.test</em>
<a name="34" href="#34">34</a>  <em> * Created: May 24, 2010 </em>
<a name="35" href="#35">35</a>  <em> * @author MWHXB3  </em>
<a name="36" href="#36">36</a>  <em> * @version $Revision: 1.6 $</em>
<a name="37" href="#37">37</a>  <em> * Last Changed: $Date: 2010/06/29 23:11:28 $</em>
<a name="38" href="#38">38</a>  <em> * Last Changed By: $Author: mwrsk $</em>
<a name="39" href="#39">39</a>  <em> */</em>
<a name="40" href="#40">40</a>  <strong>public</strong> <strong>class</strong> <a href="../../../../../../../../gov/ca/dmv/ease/ecs/impl/integration/test/DlInformationSearchByNameEcsTest.html">DlInformationSearchByNameEcsTest</a> <strong>extends</strong> <a href="../../../../../../../../gov/ca/dmv/ease/ecs/spring/junit/AbstractSpringEcsTest.html">AbstractSpringEcsTest</a> {
<a name="41" href="#41">41</a>  	<em>/**<em>* The Request Factory */</em></em>
<a name="42" href="#42">42</a>  	@Autowired
<a name="43" href="#43">43</a>  	<strong>private</strong> EcsRequestFactory ecsRequestFactory;
<a name="44" href="#44">44</a>  	@Autowired
<a name="45" href="#45">45</a>  	<strong>private</strong> Person person;
<a name="46" href="#46">46</a>  	<em>/**<em>* The request fixture */</em></em>
<a name="47" href="#47">47</a>  	<strong>private</strong> DlInformationSearchByNameRequestEcs request;
<a name="48" href="#48">48</a>  	<em>/**<em>* The UserContext */</em></em>
<a name="49" href="#49">49</a>  	<strong>private</strong> UserContext userContext;
<a name="50" href="#50">50</a>  	<em>/**<em>* The VrInformationRequest */</em></em>
<a name="51" href="#51">51</a>  	<strong>private</strong> VrInformationRequest vrInformationRequest;
<a name="52" href="#52">52</a>  
<a name="53" href="#53">53</a>  	<em>/**<em>*</em></em>
<a name="54" href="#54">54</a>  <em>	 * Set the fixture.</em>
<a name="55" href="#55">55</a>  <em>	 * </em>
<a name="56" href="#56">56</a>  <em>	 */</em>
<a name="57" href="#57">57</a>  	@Override
<a name="58" href="#58">58</a>  	<strong>public</strong> <strong>void</strong> initSetUp() {
<a name="59" href="#59">59</a>  	}
<a name="60" href="#60">60</a>  
<a name="61" href="#61">61</a>  	<em>/**<em>*</em></em>
<a name="62" href="#62">62</a>  <em>	 * Release the resources.</em>
<a name="63" href="#63">63</a>  <em>	 * </em>
<a name="64" href="#64">64</a>  <em>	 */</em>
<a name="65" href="#65">65</a>  	@Override
<a name="66" href="#66">66</a>  	<strong>public</strong> <strong>void</strong> initTearDown() {
<a name="67" href="#67">67</a>  		request = <strong>null</strong>;
<a name="68" href="#68">68</a>  		userContext = <strong>null</strong>;
<a name="69" href="#69">69</a>  		ecsRequestFactory = <strong>null</strong>;
<a name="70" href="#70">70</a>  	}
<a name="71" href="#71">71</a>  
<a name="72" href="#72">72</a>  	<em>/**<em>*</em></em>
<a name="73" href="#73">73</a>  <em>	 * Test method for {@link gov.ca.dmv.ease.ecs.request.impl.DlInformationSearchByNameRequestEcs#execute()}.</em>
<a name="74" href="#74">74</a>  <em>	 */</em>
<a name="75" href="#75">75</a>  	@Test
<a name="76" href="#76">76</a>  	<strong>public</strong> <strong>void</strong> testExecute() {
<a name="77" href="#77">77</a>  		<em class="comment">// req - [AHQ99933130H6SMITH JOE;A123;CSACRAMENTO;B052445]</em>
<a name="78" href="#78">78</a>  		<em class="comment">// res - "MATCHED ON:*L/N*F/N* BD                            I0210130SMITH JOE                          052445241SACRAMENTO   I0210131SMITH JOE                          052445241SACRAMENTO   I0210132SMITH JOE                          052445241SACRAMENTO   I0210133SMITH JOE                          052445241SACRAMENTO   I0210134SMITH JOE                          052445241SACRAMENTO   I0210140SMITH JOE                          052445241SACRAMENTO   I0210141SMITH JOE                          052445241SACRAMENTO   I0210142SMITH JOE                          052445241SACRAMENTO   I0210143SMITH JOE                          052445241SACRAMENTO   I0210144SMITH JOE                          052445241SACRAMENTO   I0210196SMITH JOE                          052445241SACRAMENTO   ";</em>
<a name="79" href="#79">79</a>  		initUserContext(<span class="string">"130"</span>);
<a name="80" href="#80">80</a>  		createMessageBody(<span class="string">"SMITH"</span>, <span class="string">"JOE"</span>, <span class="string">"123 Folsom Blvd"</span>, <span class="string">"SACRAMENTO"</span>,
<a name="81" href="#81">81</a>  				<span class="string">"052445"</span>, <strong>null</strong>, <strong>null</strong>);
<a name="82" href="#82">82</a>  		request = ecsRequestFactory.createDlInformationSearchByNameRequestFor(
<a name="83" href="#83">83</a>  				<span class="string">"H6"</span>, false, person, userContext, vrInformationRequest);
<a name="84" href="#84">84</a>  		DataStreamResponseEcs dataStreamResponseEcs = request.execute();
<a name="85" href="#85">85</a>  		Assert.assertEquals(<span class="string">"MATCHED ON"</span>, dataStreamResponseEcs.getOutputText()
<a name="86" href="#86">86</a>  				.substring(1, 11));
<a name="87" href="#87">87</a>  	}
<a name="88" href="#88">88</a>  
<a name="89" href="#89">89</a>  	<em>/**<em>*</em></em>
<a name="90" href="#90">90</a>  <em>	 * Creates message body of the fixture </em>
<a name="91" href="#91">91</a>  <em>	 */</em>
<a name="92" href="#92">92</a>  	<strong>private</strong> <strong>void</strong> createMessageBody(String lastName, String firstName,
<a name="93" href="#93">93</a>  			String addressLine1, String city, String birthDate,
<a name="94" href="#94">94</a>  			String vehicleYearModel, String vehicleMake) {
<a name="95" href="#95">95</a>  		PersonName personName = <strong>new</strong> PersonName();
<a name="96" href="#96">96</a>  		personName.setLastName(lastName);
<a name="97" href="#97">97</a>  		personName.setFirstName(firstName);
<a name="98" href="#98">98</a>  		person.setCurrentName(personName);
<a name="99" href="#99">99</a>  		Address address = <strong>new</strong> Address(AddressType.RESIDENTIAL);
<a name="100" href="#100">100</a> 		address.setLine1(addressLine1);
<a name="101" href="#101">101</a> 		address.setCity(city);
<a name="102" href="#102">102</a> 		person.addAddress(address);
<a name="103" href="#103">103</a> 		person.setBirthDate(convertStringToDate(birthDate, <span class="string">"mmddyy"</span>));
<a name="104" href="#104">104</a> 		vrInformationRequest = <strong>new</strong> VrInformationRequest();
<a name="105" href="#105">105</a> 		VehicleRecord vehicleRecord = <strong>new</strong> VehicleRecord();
<a name="106" href="#106">106</a> 		vehicleRecord.setVehicleMake(vehicleMake);
<a name="107" href="#107">107</a> 		vehicleRecord.setVehicleYearModel(vehicleYearModel);
<a name="108" href="#108">108</a> 		vrInformationRequest.setVehicleRecord(vehicleRecord);
<a name="109" href="#109">109</a> 	}
<a name="110" href="#110">110</a> 
<a name="111" href="#111">111</a> 	<em>/**<em>*</em></em>
<a name="112" href="#112">112</a> <em>	 * Initializes user context  </em>
<a name="113" href="#113">113</a> <em>	 */</em>
<a name="114" href="#114">114</a> 	<strong>private</strong> <strong>void</strong> initUserContext(String officeId) {
<a name="115" href="#115">115</a> 		userContext = (UserContext) EaseApplicationContext
<a name="116" href="#116">116</a> 				.getApplicationContext().getBean(<span class="string">"userContext"</span>);
<a name="117" href="#117">117</a> 		userContext.setTtc(<span class="string">"07Q"</span>);
<a name="118" href="#118">118</a> 		userContext.setOfficeId(officeId);
<a name="119" href="#119">119</a> 		userContext.setTechId(<span class="string">"PR"</span>);
<a name="120" href="#120">120</a> 		userContext.setRacfId(<span class="string">"YO"</span>);
<a name="121" href="#121">121</a> 		userContext.setUserName(<span class="string">"USER1"</span>);
<a name="122" href="#122">122</a> 		userContext.setIpAddress(<span class="string">"120.10.10.1"</span>);
<a name="123" href="#123">123</a> 		userContext.setStationId(<span class="string">"S90"</span>);
<a name="124" href="#124">124</a> 		Calendar workDate = Calendar.getInstance();
<a name="125" href="#125">125</a> 		workDate.set(2009, Calendar.NOVEMBER, 16);
<a name="126" href="#126">126</a> 		userContext.setWorkDate(workDate.getTime());
<a name="127" href="#127">127</a> 		userContext.setOperationalMode(<strong>new</strong> CodeSetElement(<span class="string">"C"</span>, <span class="string">"C"</span>, <span class="string">"C"</span>));
<a name="128" href="#128">128</a> 		userContext.setFunctionalMode(<strong>new</strong> CodeSetElement(<span class="string">"D"</span>, <span class="string">"D"</span>, <span class="string">"D"</span>));
<a name="129" href="#129">129</a> 	}
<a name="130" href="#130">130</a> }
<a name="131" href="#131">131</a> <em>/**<em>*</em></em>
<a name="132" href="#132">132</a> <em> *  Modification History:</em>
<a name="133" href="#133">133</a> <em> *</em>
<a name="134" href="#134">134</a> <em> *  $Log: DlInformationSearchByNameEcsTest.java,v $</em>
<a name="135" href="#135">135</a> <em> *  Revision 1.6  2010/06/29 23:11:28  mwrsk</em>
<a name="136" href="#136">136</a> <em> *  Code cleanup</em>
<a name="137" href="#137">137</a> <em> *</em>
<a name="138" href="#138">138</a> <em> *  Revision 1.5  2010/06/29 22:22:24  mwrsk</em>
<a name="139" href="#139">139</a> <em> *  use the standard template</em>
<a name="140" href="#140">140</a> <em> *</em>
<a name="141" href="#141">141</a> <em> *  Revision 1.4  2010/05/26 01:07:25  mwhxb3</em>
<a name="142" href="#142">142</a> <em> *  Modified date format.</em>
<a name="143" href="#143">143</a> <em> *</em>
<a name="144" href="#144">144</a> <em> *  Revision 1.3  2010/05/26 00:02:36  mwhxb3</em>
<a name="145" href="#145">145</a> <em> *  extend from AbstractEcsTestCase.</em>
<a name="146" href="#146">146</a> <em> *</em>
<a name="147" href="#147">147</a> <em> *  Revision 1.2  2010/05/25 23:53:02  mwhxb3</em>
<a name="148" href="#148">148</a> <em> *  Updated fixtures, tests, code clean up.</em>
<a name="149" href="#149">149</a> <em> *</em>
<a name="150" href="#150">150</a> <em> *  Revision 1.1  2010/05/24 21:04:09  mwhxb3</em>
<a name="151" href="#151">151</a> <em> *  The unit test for DlInformationSearchByNameRequestEcsTest to test the message flow through ECS and CAMV.</em>
<a name="152" href="#152">152</a> <em> *</em>
<a name="153" href="#153">153</a> <em> */</em>
</pre>
<hr/><div id="footer">This page was automatically generated by <a href="http://maven.apache.org/">Maven</a></div></body>
</html>

