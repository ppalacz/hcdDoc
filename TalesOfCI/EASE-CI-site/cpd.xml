<?xml version="1.0" encoding="UTF-8"?>
<pmd-cpd>
<duplication lines="228" tokens="1315">
<file line="140" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\LoadDafDataTest.java"/>
<file line="395" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\LoadDafDataTest.java"/>
<codefragment>
<![CDATA[
			licenseClassM.setCode("A");
			List <CodeSetElement> existingLicenseClasses = new ArrayList <CodeSetElement>();
			existingLicenseClasses.add(licenseClassM);
			driverLicense.setExistingLicenseClasses(existingLicenseClasses);
			List <CodeSetElement> attachments, endorsements, newEndorsements, licenseCategories, certificates, restrictions;
			//Set attachments
			attachments = new ArrayList <CodeSetElement>();
			CodeSetElement attCodeSetElement = new CodeSetElement();
			attCodeSetElement.setCode("A1");
			CodeSetElement attCodeSetElement2 = new CodeSetElement();
			attCodeSetElement2.setCode("A2");
			attachments.add(attCodeSetElement);
			attachments.add(attCodeSetElement2);
			driverLicense.setExistingAttachments(attachments);
			//Set certificates
			certificates = new ArrayList <CodeSetElement>();
			CodeSetElement cerCodeSetElement = new CodeSetElement();
			cerCodeSetElement.setCode("C1");
			CodeSetElement cerCodeSetElement2 = new CodeSetElement();
			cerCodeSetElement2.setCode("C2");
			certificates.add(cerCodeSetElement);
			certificates.add(cerCodeSetElement2);
			driverLicense.setCertificates(certificates);
			//Set endorsements
			endorsements = new ArrayList <CodeSetElement>();
			CodeSetElement endCodeSetElement = new CodeSetElement();
			endCodeSetElement.setCode("E1");
			CodeSetElement endCodeSetElement2 = new CodeSetElement();
			endCodeSetElement2.setCode("E2");
			endorsements.add(endCodeSetElement);
			endorsements.add(endCodeSetElement2);
			driverLicense.setExistingEndorsements(endorsements);
			//Set new endorsements
			newEndorsements = new ArrayList <CodeSetElement>();
			CodeSetElement newCodeSetElement = new CodeSetElement();
			newCodeSetElement.setCode("N1");
			CodeSetElement newCodeSetElement2 = new CodeSetElement();
			newCodeSetElement2.setCode("N2");
			newEndorsements.add(newCodeSetElement);
			newEndorsements.add(newCodeSetElement2);
			driverLicense.setNewEndorsements(newEndorsements);
			//Set Categories
			licenseCategories = new ArrayList <CodeSetElement>();
			CodeSetElement catCodeSetElement = new CodeSetElement();
			catCodeSetElement.setCode("CAT");
			CodeSetElement catCodeSetElement1 = new CodeSetElement();
			catCodeSetElement1.setCode("CAT1");
			licenseCategories.add(catCodeSetElement);
			licenseCategories.add(catCodeSetElement1);
			driverLicense.setExistingCategories(licenseCategories);
			//Set driving restrictions
			List <DrivingRestriction> medical;
			DrivingRestriction drivingRestriction = new DrivingRestriction();
			medical = new ArrayList <DrivingRestriction>();
			CodeSetElement restrictionTypeCode = new CodeSetElement();
			restrictionTypeCode.setCode("R1");
			drivingRestriction.setRestrictionTypeCode(restrictionTypeCode);
			medical.add(drivingRestriction);
			driverLicense.setExistingRestrictions(medical);
			//Set minorGuarantorCode
			CodeSetElement minorGuarantorCode = new CodeSetElement();
			minorGuarantorCode.setCode("PP");
			driverLicense.setMinorCode(minorGuarantorCode);
			driverLicense.setExistingMinorGuarantorCode(minorGuarantorCode);
			driverLicense.setCurrentTermOfLicense("CURRENT");
			driverLicense.setInterimIssueDate(new Date());
			driverLicense.setIssuanceOtherDate(new Date());
			driverLicense.setPerviousAppDate(new Date());
			driverLicense.setFeeDueYear("2011");//.setFeeDueDate("2011");
			//Set DriveandLawTestResults
			DriveAndLawTestResultGroup dltrg = new DriveAndLawTestResultGroup();
			CodeSetElement foreignLanguageCode = new CodeSetElement();
			foreignLanguageCode.setCode("OT");
			driverLicense.setForeignLanguageCode(foreignLanguageCode);
			CodeSetElement oralTestResultCode = new CodeSetElement();
			oralTestResultCode.setCode("Y");
			dltrg.setOralTestResultCode(oralTestResultCode);
			driverLicense.setDriveAndLawTestResultGroup(dltrg);
			///////////////////////////////
			//////////////////////////////
			//Setting Applicant details
			Person dlApplicant = new Person();
			Calendar calendar = new GregorianCalendar(1970, Calendar.AUGUST, 25);
			dlApplicant.setBirthDate(calendar.getTime());
			dlApplicant.setHeightInFeet(new Integer(5));
			dlApplicant.setHeightInInch(new Integer(10));
			dlApplicant.setWeight(new Integer(150));
			//set address;
			Address address = new Address(AddressType.RESIDENTIAL);
			CodeSetElement stateCode = new CodeSetElement();
			stateCode.setCode("CA");
			address.setCity("Roseville");
			address.setCounty("57");
			address.setCreatedDate(new Date());
			address.setZip("95747");
			address.setLine1("8888 Foothills Blvd");
			address.setStateCode(stateCode);
			dlApplicant.addAddress(address);
			address = new Address(AddressType.MAILING);
			address.setCity("Roseville");
			address.setCounty("Placer");
			address.setCreatedDate(new Date());
			address.setZip("95747");
			address.setStateCode(stateCode);
			address.setLine1("8888 Foothills Blvd");
			address.setLine2("#18755");
			calendar = new GregorianCalendar(2009, Calendar.JANUARY, 01);
			address.setEffectiveDate(calendar.getTime());
			dlApplicant.addAddress(address);
			//Set personal info
			CodeSetElement eyeColorCode = new CodeSetElement();
			eyeColorCode.setCode("BLK");
			dlApplicant.setEyeColorCode(eyeColorCode);
			CodeSetElement hairColorCode = new CodeSetElement();
			hairColorCode.setCode("BLK");
			dlApplicant.setHairColorCode(hairColorCode);
			CodeSetElement genderCode = new CodeSetElement();
			genderCode.setCode("M");
			dlApplicant.setGenderCode(genderCode);
			dlApplicant.setDriverLicense(driverLicense);
			dlApplicant.setMinor(true);
			//Set name, AKA, etc
			List <PersonName> nameList = new ArrayList <PersonName>();
			PersonName personName = new PersonName();
			personName.setName("Brad Miller");
			nameList.add(personName);
			dlApplicant.setPersonNames(nameList);
			PersonName personName1 = new PersonName();
			personName1.setFirstName("Brad");
			personName1.setMiddleName("John");
			personName1.setLastName("Miller");
			personName1.setSuffix("Jr");
			personName1.setPrefix("Mr");
			List <PersonName> personNameList = new ArrayList <PersonName>();
			PersonName personName2 = new PersonName();
			personName2.setFirstName("John");
			personName2.setLastName("Doe");
			personNameList.add(personName2);
			dlApplicant.setPersonNames(personNameList);
			dlApplicant.setCurrentName(personName);
			dlApplicant.setGenderChanged(false);
			//Set LegalPresenceDocument
			CodeSetElement legalPresenceDocumentType = new CodeSetElement();
			legalPresenceDocumentType.setCode("A");
			LegalPresenceDocument lpd = new LegalPresenceDocument();
			lpd.setExpirationDate(new Date());
			lpd.setDocumentId("INS");
			lpd.setLegalPresenceDocumentType(legalPresenceDocumentType);
			Passport passport = new Passport();
			passport.setDocumentId("12345");
			passport.setPassportNumber("1234");
			passport.setExpirationDate(new Date());
			List <Document> documents = new ArrayList <Document>();
			documents.add(lpd);
			documents.add(passport);
			dlApplicant.setDocuments(documents);
			//Set organDonor;
			dlApplication.setOrganDonor(true);
			//Set fee;
			Invoice invoice = new Invoice();
			invoice = createInvoiceForPrintDocumentsActivityTest();
			invoice.setAmount(new BigDecimal(50));
			dlApplication.setFeeRequired(true);
			dlApplication.setInvoice(invoice); // invoice should also have a reason set
			//Set DL44# or Barcode#
			String microGraphicsNumber = "DL12345";
			dlApplication.setMicroGraphicsNumber(microGraphicsNumber);
			//Set Bd/LP Code
			CodeSetElement userVerifiedBdlpCode = new CodeSetElement();
			userVerifiedBdlpCode.setCode("L");
			dlApplication.setNewUserVerifiedBdlpCode(userVerifiedBdlpCode);
			//Set Photo Required Code		
			CodeSetElement photoRequiredCode = new CodeSetElement();
			photoRequiredCode.setCode("N");
			dlApplication.setPhotoRequiredCode(photoRequiredCode);
			//Set DER/APP#
			//CodeSetElement dataEntryReceiptCode = new CodeSetElement();
			//dataEntryReceiptCode.setCode("A");
			dlApplication.setDataEntryReceiptNumber("A12345678");
			dlApplication.setApplicationNumber(Integer.toString(11000000 + i));
			//Set driverEducation
			CodeSetElement driverEducationCode = new CodeSetElement();
			driverEducationCode.setCode("N");
			dlApplication.setDriverEducationCode(driverEducationCode);
			String driverEducationRecordNumber = "";
			dlApplication
					.setDriverEducationRecordNumber(driverEducationRecordNumber);
			//Set driverTraining
			CodeSetElement driverTrainingCode = new CodeSetElement();
			driverTrainingCode.setCode("N");
			dlApplication.setDriverTrainingCode(driverTrainingCode);
			String driverTrainingRecordNumber = "";
			dlApplication
					.setDriverTrainingRecordNumber(driverTrainingRecordNumber);
			//Set military extension
			CodeSetElement militaryDutyCode = new CodeSetElement();
			militaryDutyCode.setCode("Y");
			dlApplication.setMilitaryDutyCode(militaryDutyCode);
			//Set motorCycleTrainingCode
			CodeSetElement motorCycleTrainingCode = new CodeSetElement();
			motorCycleTrainingCode.setCode("X");
			dlApplication.setMotorCycleTrainingCode(motorCycleTrainingCode);
			//Maybe this is the fee field
			dlApplication.setFeeRequired(true);
			//Set voter registration
			CodeSetElement voterRegistationRequested = new CodeSetElement();
			voterRegistationRequested.setCode("Y");
			dlApplication
					.setVoterRegistationRequested(voterRegistationRequested);
			//This may be the O/S Restricted Provisonal
			CodeSetElement outOfStateDriverEducationAndTrainingWaiveCode = new CodeSetElement();
			outOfStateDriverEducationAndTrainingWaiveCode.setCode("R");
			dlApplication
					.setOutOfStateDriverEducationAndTrainingWaiveCode(outOfStateDriverEducationAndTrainingWaiveCode);
			//Setting all to DlApplication
			dlApplication.setApplicant(dlApplicant);
			dlApplication.setLicense(driverLicense);
			CodeSetElement applicationType = new CodeSetElement();
			applicationType.setCode("C");
			dlApplication.setApplicationType(applicationType);
			CodeSetElement applicationTypeCode = new CodeSetElement();
			applicationTypeCode.setCode("B");
			dlApplication.setApplicationTypeCode(applicationTypeCode);
			dlApplication.setOriginalApplicationIndicator(Boolean.TRUE);
			dlApplication.setProcessHistory(this.createProcessHistory());
			dlApplication.setQuestionablePdpsIndicator(Boolean.TRUE);
			recordsList.add(dlApplication);
		}
]]>
</codefragment>
</duplication>
<duplication lines="182" tokens="774">
<file line="175" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaCommercilaLicenseTestsValidator.java"/>
<file line="360" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaLicenseTestsValidator.java"/>
<codefragment>
<![CDATA[
				errorCollector.register(new ApplicationException("D803"));
				
			}
		
		}
	}
	
	
	private void validateRuleD804(CdaProcessContext cdaProcessContext,
			IErrorCollector errorCollector) {
		
		List<CodeSetElement> licenseClasses = cdaProcessContext
							.getDriverLicense()
							.getExistingLicenseClasses();
		
		String printDocumentRequested = cdaProcessContext
							.getDlApplication()
							.getDlPrintRequestDocumentCode()
							.getCode();
		
		if ((printDocumentRequested != null
				&& printDocumentRequested.trim().length() > 0 
				&& printDocumentRequested.equals("1"))) {
			
			if (licenseClasses.contains("C") ) {
				
				List<CommercialTestResult> hazmatTestResults = cdaProcessContext
										.getCommercialTestResultGroup()
										.getCommercialTestResults( CommercialTestResultType.HAZMAT_TEST_RESULT);
				
				String hazmatTestResultCode = hazmatTestResults
										.get(hazmatTestResults.size() - 1)
										.getTestResultCode().getCode();
				
				if (!"P".equalsIgnoreCase(hazmatTestResultCode)
						&& !"W".equalsIgnoreCase(hazmatTestResultCode)) {
						errorCollector.register(new ApplicationException("D804"));
				}
				
			}
		
		}
	}
	
	
	private void validateRuleD807(CdaProcessContext cdaProcessContext,
			IErrorCollector errorCollector) {

		List<CodeSetElement> licenseClasses = cdaProcessContext
						.getDriverLicense().getExistingLicenseClasses();

		String printDocumentRequested = cdaProcessContext.getDlApplication()
						.getDlPrintRequestDocumentCode().getCode();

		if (printDocumentRequested != null
				&& printDocumentRequested.trim().length() > 0 
				&& ( printDocumentRequested.equals("3") ||  printDocumentRequested.equals("4"))) {

			if (licenseClasses.contains("B")) {

				List<CommercialTestResult> generalTestResults = cdaProcessContext
											.getCommercialTestResultGroup()
											.getCommercialTestResults( CommercialTestResultType.GENERAL_TEST_RESULT);

				String generalTestResultCode = generalTestResults
											.get(generalTestResults.size() - 1)
											.getTestResultCode()
											.getCode();

				
				List<CommercialTestResult> fireFighterTestResults = cdaProcessContext
											.getCommercialTestResultGroup()
											.getCommercialTestResults( CommercialTestResultType.FIREFIGHTER_TEST_RESULT);

				String fireFighterTestResultCode = fireFighterTestResults
											.get(fireFighterTestResults.size() - 1)
											.getTestResultCode().getCode();

				
				
				if (!"P".equalsIgnoreCase(generalTestResultCode) &&
				    !"W".equalsIgnoreCase(generalTestResultCode) &&
				    !"P".equalsIgnoreCase(fireFighterTestResultCode) &&
				    !"W".equalsIgnoreCase(fireFighterTestResultCode	)){
					errorCollector.register(new ApplicationException("D807"));
				}	
		 }

		}
	}
	
	private void validateRuleD814 ( CdaProcessContext cdaProcessContext,
			IErrorCollector errorCollector){
		
		String printDocumentRequested = cdaProcessContext.getDlApplication()
				.getDlPrintRequestDocumentCode().getCode();

		List<CodeSetElement> licenseClasses = cdaProcessContext
		.getDriverLicense().getExistingLicenseClasses();
		
		if (printDocumentRequested != null
				&& printDocumentRequested.trim().length() > 0 
				&& ( printDocumentRequested.equals("3") ||  printDocumentRequested.equals("4"))) {
			
			if (licenseClasses.contains("C")) {

				List<CommercialTestResult> performanceTestResults = cdaProcessContext
										.getCommercialTestResultGroup()
										.getCommercialTestResults( CommercialTestResultType.PERFORMANCE_TEST_RESULT);

				String performanceTestResultCode = performanceTestResults
										.get( performanceTestResults.size() - 1)
										.getTestResultCode().getCode();
				
				
				if (!"P".equalsIgnoreCase(performanceTestResultCode)&&
						!"W".equalsIgnoreCase(performanceTestResultCode)) {
						 errorCollector.register(new ApplicationException("814"));
					}
			}
			
		}
	}
	
	
	private void validateRuleD690 ( CdaProcessContext cdaProcessContext,
			IErrorCollector errorCollector){
		
		String printDocumentRequested = cdaProcessContext.getDlApplication()
								.getDlPrintRequestDocumentCode().getCode();

		List<CodeSetElement> licenseClasses = cdaProcessContext
								.getDriverLicense().getExistingLicenseClasses();
		
		if (printDocumentRequested != null
				&& printDocumentRequested.trim().length() > 0 
				&& (printDocumentRequested.equals("2") ||
					printDocumentRequested.equals("3") || 
					printDocumentRequested.equals("4")))
				
			if ( licenseClasses.contains("F") && ! isClassFdriveAndLawTestOk(cdaProcessContext ) ) {
			
				errorCollector.register(new ApplicationException("D690"));
			}
		
		
		
	}

	
	
	private void validateRuleD691 ( CdaProcessContext cdaProcessContext,
			IErrorCollector errorCollector){
		
		String printDocumentRequested = cdaProcessContext.getDlApplication()
								.getDlPrintRequestDocumentCode().getCode();

		List<CodeSetElement> licenseClasses = cdaProcessContext
								.getDriverLicense().getExistingLicenseClasses();
		
		if (printDocumentRequested != null
				&& printDocumentRequested.trim().length() > 0 
				&& (printDocumentRequested.equals("2") ||
					printDocumentRequested.equals("3") || 
					printDocumentRequested.equals("4")))
				
			if ( licenseClasses.contains("F") &&  
				 licenseClasses.contains("M") && 	
				!isClassFdriveAndLawTestOk(cdaProcessContext ) &&
				!isClassMdriveAndLawTestOk(cdaProcessContext )) {
			
				errorCollector.register(new ApplicationException("D691"));
			}
		
		
		
	}

	
	
	
}
]]>
</codefragment>
</duplication>
<duplication lines="100" tokens="684">
<file line="196" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\VerbalNoticeOfActionDocumentConverterTest.java"/>
<file line="63" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\VerbalNoticeOfActionDocumentRequestTusTest.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Populate service of order application.
	 */
	private void populateServiceOfOrderApplication() {
		applicationFixture = new ServiceOfOrderApplication();
		Person person = getPerson();
		IdCard idCard = new IdCard();
		idCard.setLicenseLocationStatus(new CodeSetElement("HD", "HD", "HD"));
		person.setIdCard(idCard);
		applicationFixture.setApplicant(person);
		CodeSetElement licenseLocation = new CodeSetElement("L", "L", "L");
		applicationFixture.setLicenseLocation(licenseLocation);
		List <ServiceOrder> serviceOrders = new ArrayList <ServiceOrder>();
		ServiceOrder serviceOrder = new ServiceOrder();
		serviceOrder.setAction("SUSPENSION");
		List <CodeSetElement> sections = new ArrayList <CodeSetElement>();
		CodeSetElement section = new CodeSetElement("113506", "113506",
				"113506");
		sections.add(section);
		section = new CodeSetElement("113507", "113507", "113507");
		sections.add(section);
		section = new CodeSetElement("113508", "113508", "113508");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		Calendar calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		serviceOrder = new ServiceOrder();
		serviceOrder.setAction("DISMISSED");
		sections = new ArrayList <CodeSetElement>();
		section = new CodeSetElement("113526", "113526", "113526");
		sections.add(section);
		section = new CodeSetElement("113527", "113527", "113527");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		serviceOrder = new ServiceOrder();
		serviceOrder.setAction("SUSPENSION");
		sections = new ArrayList <CodeSetElement>();
		section = new CodeSetElement("113536", "113536", "113536");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		serviceOrder = new ServiceOrder();
		serviceOrder.setAction("SUSPENSION");
		sections = new ArrayList <CodeSetElement>();
		section = new CodeSetElement("113546", "113546", "113546");
		sections.add(section);
		section = new CodeSetElement("113547", "113547", "113547");
		sections.add(section);
		section = new CodeSetElement("113548", "113548", "113548");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		applicationFixture.setServiceOrders(serviceOrders);
	}

	/**
	 * Populate person.
	 */
	private Person getPerson() {
		Person person = new Person();
		person.setDriverLicense(DriverLicenseFixtureFactory
				.createDriverLicense());
		Calendar birthDate = Calendar.getInstance();
		birthDate.set(1950, Calendar.JUNE, 03);
		person.setBirthDate(birthDate.getTime());
		PersonName pName = new PersonName();
		pName.setFirstName("Alexander");
		pName.setLastName("Fleming");
		pName.setMiddleName("M");
		person.getPersonNames().add(pName);
		person.setCurrentName(pName);
		return person;
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	@After
]]>
</codefragment>
</duplication>
<duplication lines="130" tokens="677">
<file line="119" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\DlReceiptDocumentRequestValidatorTest.java"/>
<file line="119" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\InterimLicenseDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		validateFixture = new InterimLicenseDocumentRequestValidator();
		if (LOGGER.isDebugEnabled()) {
			LOGGER.debug("setUp() - end");
		}
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	/**
	 * Releases the resources
	 * @throws java.lang.Exception
	 */
	@Override
	@After
	public void onTearDown() throws Exception {
		userContextFixture = null;
		dlApplicationFixture = null;
		errorCollector = null;
		requestFixture = null;
		validateFixture = null;
	}

	/**
	 * Loads DL Application fixture
	 */
	private void initDlApplicationFixture() {
		dlApplicationFixture = new DlApplication();
		driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		// PhotoInformation object
		photoInformation = new PhotoInformation();
		photoInformation.setPhotoName("Rusty Ryan");
		Address photoAddress = new Address(AddressType.MAILING);
		photoAddress.setLine1("1850");
		photoAddress.setLine2("Club Center Dr");
		photoAddress.setCity("Sacramento");
		photoAddress.setStateCode(new CodeSetElement("CA", "CA", "CA"));
		photoAddress.setZip("95835");
		photoInformation.setPhotoAddress(photoAddress);
		driverLicense.setPhotoInformation(photoInformation);
		IdCard idCard = new IdCard();
		idCard.setIdNumber("I8005638");
		// Person object
		person = new Person();
		Calendar calendar = new GregorianCalendar(1977, Calendar.JUNE, 05);
		PersonName currentName = new PersonName();
		currentName.setName("Martin Milani");
		PersonName previousName = new PersonName();
		previousName.setName("Martin Luther");
		person.setCurrentName(currentName);
		person.setPreviousName(previousName);
		person.setBirthDate(calendar.getTime());
		person.setIdCard(idCard);
		person.setDriverLicense(driverLicense);
		currentMailingAddress = new Address(AddressType.MAILING);
		currentMailingAddress.setLine1("123");
		currentMailingAddress.setLine2("Current Mailing St");
		currentMailingAddress.setCity("Sacramento");
		currentMailingAddress
				.setStateCode(new CodeSetElement("CA", "CA", "CA"));
		currentMailingAddress.setZip("95815");
		person.addAddress(currentMailingAddress);
		//Set Invoice
		invoice = new Invoice();
		List <Payment> payments = new ArrayList <Payment>();
		Payment cashPayment = new CashPayment();
		Payment voucherPayment = new Voucher();
		voucherPayment.setAmount(new BigDecimal(100));
		cashPayment.setAmount(new BigDecimal(100));
		Payment debtPayment = new DebitPayment();
		debtPayment.setAmount(new BigDecimal(100));
		payments.add(cashPayment);
		payments.add(voucherPayment);
		payments.add(debtPayment);
		invoice.setPayments(payments);
		invoice.setTotalFeeWaived(new BigDecimal(0));
		dlApplicationFixture.setFeeRequired(true);
		dlApplicationFixture.setInvoice(invoice);
		/* Restriction Codes */
		DrivingRestriction restriction1 = new DrivingRestriction();
		DrivingRestriction restriction2 = new DrivingRestriction();
		DrivingRestriction restriction3 = new DrivingRestriction();
		DrivingRestriction restriction4 = new DrivingRestriction();
		restriction1
				.setRestrictionTypeCode(new CodeSetElement("30", "30", "30"));
		restriction2
				.setRestrictionTypeCode(new CodeSetElement("29", "29", "29"));
		restriction3
				.setRestrictionTypeCode(new CodeSetElement("43", "43", "43"));
		restriction4
				.setRestrictionTypeCode(new CodeSetElement("46", "46", "46"));
		restrictions = new ArrayList <DrivingRestriction>();
		restrictions.add(restriction1);
		restrictions.add(restriction2);
		restrictions.add(restriction3);
		restrictions.add(restriction4);
		driverLicense.setNewRestrictions(restrictions);
		/* Process History */
		processHistoryList = new ArrayList <IProcessHistory>(0);
		IProcessHistory processHistory = new ProcessHistory(userContextFixture,
				null, null, null, new Date(), null, "1234");
		processHistoryList.add(processHistory);
		dlApplicationFixture.setProcessHistory(processHistoryList);
		dlApplicationFixture.setApplicationDate(CommonFixtureFactory
				.convertStringToDate("20100420",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		dlApplicationFixture.setApplicant(person);
		dlApplicationFixture.setLicense(driverLicense);
	}

	/**
	 * Tests the validation with different request object
	 */
	@Test
	public void testWithInValidRequest() {
		errorCollector = validateFixture
				.validate(new SendCdlisAndPdpsRequestEcs(person, 0,
						userContextFixture, new SendCdlisAndPdpsConverter()));
		assertNotNull(errorCollector);
		assertTrue(errorCollector.getEntries().size() > 0);
		assertNotNull(errorCollector.getEntries().get(0).getExceptionMessage());
	}

	/**
	 * This method tests for UserContext being Null
	 */
	@Test
	public void testWithNullUserContext() {
		requestFixture = new InterimLicenseDocumentRequestTus(null,
]]>
</codefragment>
</duplication>
<duplication lines="144" tokens="661">
<file line="33" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\InvoiceFixtureFactory.java"/>
<file line="33" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\InvoiceFixtureFactory.java"/>
<codefragment>
<![CDATA[
public final class InvoiceFixtureFactory {
	/**
	 * This method creates a new Fee object .
	 * 
	 * @return the fee
	 */
	public static Fee createFee() {
		Fee fee = new Fee();
		fee.setAmount(new BigDecimal(100));
		return fee;
	}

	/**
	 * This method create a new Fee object .
	 * 
	 * @return the fee
	 */
	public static Fee createFee1() {
		Fee fee = new Fee();
		fee.setAmount(new BigDecimal(200));
		return fee;
	}

	/**
	 * This method creates a new Fee for Payment Equal False Scenario.
	 * 
	 * @return the fee
	 */
	private static Fee createFeeForPaymentEqualFalseCase() {
		Fee fee = new Fee();
		fee.setAmount(new BigDecimal(100));
		return fee;
	}

	/**
	 * This method creates a new Invoice.
	 * 
	 * @return the invoice
	 */
	public static Invoice createInvoice() {
		Invoice invoice = new Invoice();
		List <Payment> payments = new ArrayList <Payment>();
		Payment cashPayment = new CashPayment();
		Payment voucherPayment = new Voucher();
		voucherPayment.setAmount(new BigDecimal(100));
		cashPayment.setAmount(new BigDecimal(100));
		payments.add(cashPayment);
		payments.add(voucherPayment);
		invoice.setPayments(payments);
		List <InvoiceItem> invoiceItems = new ArrayList <InvoiceItem>();
		invoiceItems.add(InvoiceFixtureFactory.createInvoiceItem());
		invoice.setInvoiceItems(invoiceItems);
		invoice.setTotalFeeWaived(new BigDecimal(0));
		return invoice;
	}

	/**
	 * This method creates a new Invoice.
	 * 
	 * @return the invoice
	 */
	public static Invoice createInvoice1() {
		Invoice invoice = new Invoice();
		List <Payment> payments = new ArrayList <Payment>();
		Payment cashPayment = new CashPayment();
		/*Payment voucherPayment = new Voucher();
		voucherPayment.setAmount(new BigDecimal(100));*/
		cashPayment.setAmount(new BigDecimal(100));
		payments.add(cashPayment);
		//	payments.add(voucherPayment);
		invoice.setPayments(payments);
		return invoice;
	}

	/**
	 * This method creates a new Invoice.
	 * 
	 * @return the invoice
	 */
	public static Invoice createInvoice2() {
		Invoice invoice = new Invoice();
		List <Payment> payments = new ArrayList <Payment>();
		Payment cashPayment = new CashPayment();
		Payment voucherPayment = VoucherFixtureFactory.createVoucher();
		//voucherPayment.setAmount(new BigDecimal(100));
		cashPayment.setAmount(new BigDecimal(100));
		payments.add(cashPayment);
		payments.add(voucherPayment);
		invoice.setPayments(payments);
		List <InvoiceItem> invoiceItems = new ArrayList <InvoiceItem>();
		invoiceItems.add(InvoiceFixtureFactory.createInvoiceItem1());
		invoice.setInvoiceItems(invoiceItems);
		invoice.setTotalFeeWaived(new BigDecimal(0));
		return invoice;
	}

	public static Invoice createInvoiceForDocumentGeneration() {
		Invoice invoice = new Invoice();
		InvoiceItem invoiceItem = new InvoiceItem();
		Fee fee = new Fee();
		fee.setAmount(new BigDecimal(28));
		invoiceItem.setFee(fee);
		List <InvoiceItem> invoiceItems = new ArrayList <InvoiceItem>();
		invoiceItems.add(invoiceItem);
		invoice.setInvoiceItems(invoiceItems);
		// payments
		CashPayment cash = new CashPayment();
		cash.setAmount(new BigDecimal(28));
		CheckPayment check = new CheckPayment();
		check.setAmount(new BigDecimal(0));
		CreditPayment credit = new CreditPayment();
		credit.setAmount(new BigDecimal(0));
		List <Payment> payments = new ArrayList <Payment>();
		invoice.setPayments(payments);
		payments.add(cash);
		payments.add(check);
		payments.add(credit);
		return invoice;
	}

	/**
	 * Creates a new BOResource object.
	 * 
	 * @return the invoice item
	 */
	public static Invoice createInvoiceForPaymentEqualFalseCase() {
		Invoice invoice = new Invoice();
		List <Payment> payments = new ArrayList <Payment>();
		Payment cashPayment = new CashPayment();
		Payment voucherPayment = new Voucher();
		voucherPayment.setAmount(new BigDecimal(100));
		cashPayment.setAmount(new BigDecimal(10));
		payments.add(cashPayment);
		payments.add(voucherPayment);
		invoice.setPayments(payments);
		List <InvoiceItem> invoiceItems = new ArrayList <InvoiceItem>();
		invoiceItems.add(InvoiceFixtureFactory
				.createInvoiceItemForPaymentEqualFalseCase());
		invoice.setInvoiceItems(invoiceItems);
		invoice.setTotalFeeWaived(new BigDecimal(0));
		return invoice;
	}

	public static Invoice createInvoiceForPrintDocumentsActivityTest() {
]]>
</codefragment>
</duplication>
<duplication lines="108" tokens="606">
<file line="50" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\decision\impl\test\CheckLicenseTypeTest.java"/>
<file line="50" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\decision\impl\test\DlPrintRequestFallbackTest.java"/>
<codefragment>
<![CDATA[
		fixture = new DlPrintRequestFallback();
		StartActivity activity = new StartActivity();
		String key = IProcessLoader.DEFAULT_TRANSITION_KEY;
		activity.setTransitionKey(key);
		TransitionsMap transitionList = new TransitionsMap();
		transitionList.addTransitions(key, new EndActivity());
		activity.setTransitions(transitionList);
		String key1 = ICdaADecisionActivityConstants.COMMERCIAL_LICENSE_TYPE;
		TransitionsMap transitions = new TransitionsMap();
		transitions.addTransitions(key1, new EndActivity());
		String key2 = ICdaADecisionActivityConstants.NON_COMMERCIAL_LICENSE_TYPE;
		transitions.addTransitions(key2, activity);
		fixture.setTransitions(transitions);
		sessionContext = new SessionContext();
		sessionContext.setUserContext(UserContextFixtureFactory
				.createUserContext());
		cdaProcessContext = new CdaProcessContext();
		cdaProcessContext.setCurrentActivity(fixture);
		dlApplication = DlApplicationFixtureFactory.createDlApplicationForCda();
		cdaProcessContext.setDlApplication(dlApplication);
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	@Override
	protected void tearDown() throws Exception {
		dlApplication = null;
		super.tearDown();
	}

	public void testClassA() {
		List <CodeSetElement> licenseClasses = cdaProcessContext
				.getDlApplication().getApplicant().getDriverLicense()
				.getAppliedLicenseClasses();
		CodeSetElement licenseClass = new CodeSetElement();
		licenseClass.setCode("A");
		licenseClasses.add(licenseClass);
		cdaProcessContext.startIn(sessionContext);
		assertTrue(fixture.getNextActivity() instanceof EndActivity);
	}

	public void testClassB() {
		List <CodeSetElement> licenseClasses = cdaProcessContext
				.getDlApplication().getApplicant().getDriverLicense()
				.getAppliedLicenseClasses();
		CodeSetElement licenseClass = new CodeSetElement();
		licenseClass.setCode("B");
		licenseClasses.add(licenseClass);
		cdaProcessContext.startIn(sessionContext);
		assertTrue(fixture.getNextActivity() instanceof EndActivity);
	}

	public void testClassC() {
		List <CodeSetElement> licenseClasses = cdaProcessContext
				.getDlApplication().getApplicant().getDriverLicense()
				.getAppliedLicenseClasses();
		CodeSetElement licenseClass = new CodeSetElement();
		licenseClass.setCode("C");
		licenseClasses.add(licenseClass);
		cdaProcessContext.startIn(sessionContext);
		assertTrue(fixture.getNextActivity() instanceof EndActivity);
	}

	public void testClassD() {
		List <CodeSetElement> licenseClasses = cdaProcessContext
				.getDlApplication().getApplicant().getDriverLicense()
				.getAppliedLicenseClasses();
		CodeSetElement licenseClass = new CodeSetElement();
		licenseClass.setCode("D");
		licenseClasses.add(licenseClass);
		cdaProcessContext.startIn(sessionContext);
		assertTrue(fixture.getNextActivity() instanceof EndActivity);
	}

	public void testClassE() {
		List <CodeSetElement> licenseClasses = cdaProcessContext
				.getDlApplication().getApplicant().getDriverLicense()
				.getAppliedLicenseClasses();
		CodeSetElement licenseClass = new CodeSetElement();
		licenseClass.setCode("E");
		licenseClasses.add(licenseClass);
		cdaProcessContext.startIn(sessionContext);
		assertTrue(fixture.getNextActivity() instanceof EndActivity);
	}

	public void testClassF() {
		List <CodeSetElement> licenseClasses = cdaProcessContext
				.getDlApplication().getApplicant().getDriverLicense()
				.getAppliedLicenseClasses();
		CodeSetElement licenseClass = new CodeSetElement();
		licenseClass.setCode("F");
		licenseClasses.add(licenseClass);
		cdaProcessContext.startIn(sessionContext);
		assertTrue(fixture.getNextActivity() instanceof StartActivity);
	}

	public void testClassM() {
		List <CodeSetElement> licenseClasses = cdaProcessContext
				.getDlApplication().getApplicant().getDriverLicense()
				.getAppliedLicenseClasses();
		CodeSetElement licenseClass = new CodeSetElement();
		licenseClass.setCode("M");
		licenseClasses.add(licenseClass);
		cdaProcessContext.startIn(sessionContext);
		assertTrue(fixture.getNextActivity() instanceof StartActivity);
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="110" tokens="601">
<file line="119" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\DlReceiptDocumentRequestValidatorTest.java"/>
<file line="123" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\InstructionPermitDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		validateFixture = new InstructionPermitDocumentRequestValidator();
		if (LOGGER.isDebugEnabled()) {
			LOGGER.debug("setUp() - end");
		}
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	/**
	 * Releases the resources
	 * @throws java.lang.Exception
	 */
	@Override
	@After
	public void onTearDown() throws Exception {
		userContextFixture = null;
		dlApplicationFixture = null;
		errorCollector = null;
		requestFixture = null;
		validateFixture = null;
	}

	/**
	 * Loads DL Application fixture
	 */
	private void initDlApplicationFixture() {
		dlApplicationFixture = new DlApplication();
		driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		// PhotoInformation object
		photoInformation = new PhotoInformation();
		photoInformation.setPhotoName("Rusty Ryan");
		Address photoAddress = new Address(AddressType.MAILING);
		photoAddress.setLine1("1850");
		photoAddress.setLine2("Club Center Dr");
		photoAddress.setCity("Sacramento");
		photoAddress.setStateCode(new CodeSetElement("CA", "CA", "CA"));
		photoAddress.setZip("95835");
		photoInformation.setPhotoAddress(photoAddress);
		driverLicense.setPhotoInformation(photoInformation);
		IdCard idCard = new IdCard();
		idCard.setIdNumber("I8005638");
		// Person object
		person = new Person();
		Calendar calendar = new GregorianCalendar(1977, Calendar.JUNE, 05);
		PersonName currentName = new PersonName();
		currentName.setName("Martin Milani");
		PersonName previousName = new PersonName();
		previousName.setName("Martin Luther");
		person.setCurrentName(currentName);
		person.setPreviousName(previousName);
		person.setBirthDate(calendar.getTime());
		person.setIdCard(idCard);
		person.setDriverLicense(driverLicense);
		currentMailingAddress = new Address(AddressType.MAILING);
		currentMailingAddress.setLine1("123");
		currentMailingAddress.setLine2("Current Mailing St");
		currentMailingAddress.setCity("Sacramento");
		currentMailingAddress
				.setStateCode(new CodeSetElement("CA", "CA", "CA"));
		currentMailingAddress.setZip("95815");
		person.addAddress(currentMailingAddress);
		//Set Invoice
		invoice = new Invoice();
		List <Payment> payments = new ArrayList <Payment>();
		Payment cashPayment = new CashPayment();
		Payment voucherPayment = new Voucher();
		voucherPayment.setAmount(new BigDecimal(100));
		cashPayment.setAmount(new BigDecimal(100));
		Payment debtPayment = new DebitPayment();
		debtPayment.setAmount(new BigDecimal(100));
		payments.add(cashPayment);
		payments.add(voucherPayment);
		payments.add(debtPayment);
		invoice.setPayments(payments);
		invoice.setTotalFeeWaived(new BigDecimal(0));
		dlApplicationFixture.setFeeRequired(true);
		dlApplicationFixture.setInvoice(invoice);
		/* Restriction Codes */
		DrivingRestriction restriction1 = new DrivingRestriction();
		DrivingRestriction restriction2 = new DrivingRestriction();
		DrivingRestriction restriction3 = new DrivingRestriction();
		DrivingRestriction restriction4 = new DrivingRestriction();
		restriction1
				.setRestrictionTypeCode(new CodeSetElement("30", "30", "30"));
		restriction2
				.setRestrictionTypeCode(new CodeSetElement("29", "29", "29"));
		restriction3
				.setRestrictionTypeCode(new CodeSetElement("43", "43", "43"));
		restriction4
				.setRestrictionTypeCode(new CodeSetElement("46", "46", "46"));
		restrictions = new ArrayList <DrivingRestriction>();
		restrictions.add(restriction1);
		restrictions.add(restriction2);
		restrictions.add(restriction3);
		restrictions.add(restriction4);
		driverLicense.setNewRestrictions(restrictions);
		/* Process History */
		processHistoryList = new ArrayList <IProcessHistory>(0);
		IProcessHistory processHistory = new ProcessHistory(userContextFixture,
				null, null, null, new Date(), null, "1234");
		processHistoryList.add(processHistory);
		dlApplicationFixture.setProcessHistory(processHistoryList);
		dlApplicationFixture.setApplicationDate(CommonFixtureFactory
				.convertStringToDate("20100420",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		dlApplicationFixture.setApplicant(person);
		dlApplicationFixture.setLicense(driverLicense);
	}
]]>
</codefragment>
</duplication>
<duplication lines="83" tokens="597">
<file line="195" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\VerbalNoticeOfActionDocumentConverterTest.java"/>
<file line="107" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\VerbalNoticeOfActionDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		userContextFixture = null;
	}

	/**
	 * Populate service of order application.
	 */
	private void populateServiceOfOrderApplication() {
		applicationFixture = new ServiceOfOrderApplication();
		Person person = getPerson();
		IdCard idCard = new IdCard();
		idCard.setLicenseLocationStatus(new CodeSetElement("HD", "HD", "HD"));
		person.setIdCard(idCard);
		applicationFixture.setApplicant(person);
		CodeSetElement licenseLocation = new CodeSetElement("L", "L", "L");
		applicationFixture.setLicenseLocation(licenseLocation);
		List <ServiceOrder> serviceOrders = new ArrayList <ServiceOrder>();
		ServiceOrder serviceOrder = new ServiceOrder();
		serviceOrder.setAction("SUSPENSION");
		List <CodeSetElement> sections = new ArrayList <CodeSetElement>();
		CodeSetElement section = new CodeSetElement("113506", "113506",
				"113506");
		sections.add(section);
		section = new CodeSetElement("113507", "113507", "113507");
		sections.add(section);
		section = new CodeSetElement("113508", "113508", "113508");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		Calendar calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		serviceOrder = new ServiceOrder();
		serviceOrder.setAction("DISMISSED");
		sections = new ArrayList <CodeSetElement>();
		section = new CodeSetElement("113526", "113526", "113526");
		sections.add(section);
		section = new CodeSetElement("113527", "113527", "113527");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		serviceOrder = new ServiceOrder();
		serviceOrder.setAction("SUSPENSION");
		sections = new ArrayList <CodeSetElement>();
		section = new CodeSetElement("113536", "113536", "113536");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		serviceOrder = new ServiceOrder();
		serviceOrder.setAction("SUSPENSION");
		sections = new ArrayList <CodeSetElement>();
		section = new CodeSetElement("113546", "113546", "113546");
		sections.add(section);
		section = new CodeSetElement("113547", "113547", "113547");
		sections.add(section);
		section = new CodeSetElement("113548", "113548", "113548");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		applicationFixture.setServiceOrders(serviceOrders);
	}

	/**
	 * Populate person.
	 */
	private Person getPerson() {
		Person person = PersonFixtureFactory.createPerson();
]]>
</codefragment>
</duplication>
<duplication lines="82" tokens="595">
<file line="63" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\VerbalNoticeOfActionDocumentRequestTusTest.java"/>
<file line="108" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\VerbalNoticeOfActionDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Populate service of order application.
	 */
	private void populateServiceOfOrderApplication() {
		applicationFixture = new ServiceOfOrderApplication();
		Person person = getPerson();
		IdCard idCard = new IdCard();
		idCard.setLicenseLocationStatus(new CodeSetElement("HD", "HD", "HD"));
		person.setIdCard(idCard);
		applicationFixture.setApplicant(person);
		CodeSetElement licenseLocation = new CodeSetElement("L", "L", "L");
		applicationFixture.setLicenseLocation(licenseLocation);
		List <ServiceOrder> serviceOrders = new ArrayList <ServiceOrder>();
		ServiceOrder serviceOrder = new ServiceOrder();
		serviceOrder.setAction("SUSPENSION");
		List <CodeSetElement> sections = new ArrayList <CodeSetElement>();
		CodeSetElement section = new CodeSetElement("113506", "113506",
				"113506");
		sections.add(section);
		section = new CodeSetElement("113507", "113507", "113507");
		sections.add(section);
		section = new CodeSetElement("113508", "113508", "113508");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		Calendar calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		serviceOrder = new ServiceOrder();
		serviceOrder.setAction("DISMISSED");
		sections = new ArrayList <CodeSetElement>();
		section = new CodeSetElement("113526", "113526", "113526");
		sections.add(section);
		section = new CodeSetElement("113527", "113527", "113527");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		serviceOrder = new ServiceOrder();
		serviceOrder.setAction("SUSPENSION");
		sections = new ArrayList <CodeSetElement>();
		section = new CodeSetElement("113536", "113536", "113536");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		serviceOrder = new ServiceOrder();
		serviceOrder.setAction("SUSPENSION");
		sections = new ArrayList <CodeSetElement>();
		section = new CodeSetElement("113546", "113546", "113546");
		sections.add(section);
		section = new CodeSetElement("113547", "113547", "113547");
		sections.add(section);
		section = new CodeSetElement("113548", "113548", "113548");
		sections.add(section);
		serviceOrder.setVehicleCodeSectionCodes(sections);
		calendar = Calendar.getInstance();
		calendar.set(2010, Calendar.MARCH, 03);
		serviceOrder.setEffectiveDate(calendar.getTime());
		calendar.set(2010, Calendar.MARCH, 06);
		serviceOrder.setServiceDate(calendar.getTime());
		serviceOrders.add(serviceOrder);
		applicationFixture.setServiceOrders(serviceOrders);
	}

	/**
	 * Populate person.
	 */
	private Person getPerson() {
		Person person = PersonFixtureFactory.createPerson();
]]>
</codefragment>
</duplication>
<duplication lines="97" tokens="589">
<file line="136" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\LoadDafDataTest.java"/>
<file line="98" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\DlApplicationFixtureFactory.java"/>
<codefragment>
<![CDATA[
		driverLicense.setLicenseNumber("I12345");
		driverLicense.setLicenseStatusCode(new CodeSetElement());
		//Set existing license classes
		CodeSetElement licenseClassM = new CodeSetElement();
		licenseClassM.setCode("M");
		List <CodeSetElement> existingLicenseClasses = new ArrayList <CodeSetElement>();
		existingLicenseClasses.add(licenseClassM);
		driverLicense.setExistingLicenseClasses(existingLicenseClasses);
		List <CodeSetElement> attachments, endorsements, newEndorsements, licenseCategories, certificates, restrictions;
		//Set attachments
		attachments = new ArrayList <CodeSetElement>();
		CodeSetElement attCodeSetElement = new CodeSetElement();
		attCodeSetElement.setCode("A1");
		CodeSetElement attCodeSetElement2 = new CodeSetElement();
		attCodeSetElement2.setCode("A2");
		attachments.add(attCodeSetElement);
		attachments.add(attCodeSetElement2);
		driverLicense.setExistingAttachments(attachments);
		//Set certificates
		certificates = new ArrayList <CodeSetElement>();
		CodeSetElement cerCodeSetElement = new CodeSetElement();
		cerCodeSetElement.setCode("C1");
		CodeSetElement cerCodeSetElement2 = new CodeSetElement();
		cerCodeSetElement2.setCode("C2");
		certificates.add(cerCodeSetElement);
		certificates.add(cerCodeSetElement2);
		driverLicense.setCertificates(certificates);
		//Set endorsements
		endorsements = new ArrayList <CodeSetElement>();
		CodeSetElement endCodeSetElement = new CodeSetElement();
		endCodeSetElement.setCode("E1");
		CodeSetElement endCodeSetElement2 = new CodeSetElement();
		endCodeSetElement2.setCode("E2");
		endorsements.add(endCodeSetElement);
		endorsements.add(endCodeSetElement2);
		driverLicense.setExistingEndorsements(endorsements);
		//Set new endorsements
		newEndorsements = new ArrayList <CodeSetElement>();
		CodeSetElement newCodeSetElement = new CodeSetElement();
		newCodeSetElement.setCode("N1");
		CodeSetElement newCodeSetElement2 = new CodeSetElement();
		newCodeSetElement2.setCode("N2");
		newEndorsements.add(newCodeSetElement);
		newEndorsements.add(newCodeSetElement2);
		driverLicense.setNewEndorsements(newEndorsements);
		//Set Categories
		licenseCategories = new ArrayList <CodeSetElement>();
		CodeSetElement catCodeSetElement = new CodeSetElement();
		catCodeSetElement.setCode("CAT");
		CodeSetElement catCodeSetElement1 = new CodeSetElement();
		catCodeSetElement1.setCode("CAT1");
		licenseCategories.add(catCodeSetElement);
		licenseCategories.add(catCodeSetElement1);
		driverLicense.setExistingCategories(licenseCategories);
		//Set driving restrictions
		List <DrivingRestriction> medical;
		DrivingRestriction drivingRestriction = new DrivingRestriction();
		medical = new ArrayList <DrivingRestriction>();
		CodeSetElement restrictionTypeCode = new CodeSetElement();
		restrictionTypeCode.setCode("R1");
		drivingRestriction.setRestrictionTypeCode(restrictionTypeCode);
		medical.add(drivingRestriction);
		driverLicense.setExistingRestrictions(medical);
		//Set minorGuarantorCode
		CodeSetElement minorGuarantorCode = new CodeSetElement();
		minorGuarantorCode.setCode("PP");
		driverLicense.setMinorCode(minorGuarantorCode);
		driverLicense.setExistingMinorGuarantorCode(minorGuarantorCode);
		driverLicense.setCurrentTermOfLicense("CURRENT");
		driverLicense.setInterimIssueDate(new Date());
		driverLicense.setIssuanceOtherDate(new Date());
		driverLicense.setPerviousAppDate(new Date());
		driverLicense.setFeeDueYear("2011");//.setFeeDueDate("2011");
		//Set DriveandLawTestResults
		DriveAndLawTestResultGroup dltrg = new DriveAndLawTestResultGroup();
		CodeSetElement foreignLanguageCode = new CodeSetElement();
		foreignLanguageCode.setCode("OT");
		driverLicense.setForeignLanguageCode(foreignLanguageCode);
		CodeSetElement oralTestResultCode = new CodeSetElement();
		oralTestResultCode.setCode("Y");
		dltrg.setOralTestResultCode(oralTestResultCode);
		driverLicense.setDriveAndLawTestResultGroup(dltrg);
		///////////////////////////////
		//////////////////////////////
		//Setting Applicant details
		Person dlApplicant = new Person();
		Calendar calendar = new GregorianCalendar(1970, Calendar.AUGUST, 25);
		dlApplicant.setBirthDate(calendar.getTime());
		dlApplicant.setHeightInFeet(new Integer(5));
		dlApplicant.setHeightInInch(new Integer(10));
		dlApplicant.setWeight(new Integer(150));
		//set address;
		Address address = new Address(AddressType.RESIDENTIAL);
		CodeSetElement stateCode = new CodeSetElement();
		stateCode.setCode("CA");
		address.setCity("Roseville");
		address.setCounty("Placer");
]]>
</codefragment>
</duplication>
<duplication lines="83" tokens="505">
<file line="232" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\LoadDafDataTest.java"/>
<file line="194" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\DlApplicationFixtureFactory.java"/>
<codefragment>
<![CDATA[
		address.setCounty("Placer");
		address.setCreatedDate(new Date());
		address.setZip("95747");
		address.setLine1("8888 Foothills Blvd");
		address.setStateCode(stateCode);
		dlApplicant.addAddress(address);
		address = new Address(AddressType.MAILING);
		address.setCity("Roseville");
		address.setCounty("Placer");
		address.setCreatedDate(new Date());
		address.setZip("95747");
		address.setStateCode(stateCode);
		address.setLine1("8888 Foothills Blvd");
		address.setLine2("#18755");
		calendar = new GregorianCalendar(2009, Calendar.JANUARY, 01);
		address.setEffectiveDate(calendar.getTime());
		dlApplicant.addAddress(address);
		//Set personal info
		CodeSetElement eyeColorCode = new CodeSetElement();
		eyeColorCode.setCode("BLK");
		dlApplicant.setEyeColorCode(eyeColorCode);
		CodeSetElement hairColorCode = new CodeSetElement();
		hairColorCode.setCode("BLK");
		dlApplicant.setHairColorCode(hairColorCode);
		CodeSetElement genderCode = new CodeSetElement();
		genderCode.setCode("M");
		dlApplicant.setGenderCode(genderCode);
		dlApplicant.setDriverLicense(driverLicense);
		dlApplicant.setMinor(true);
		//Set name, AKA, etc
		List <PersonName> nameList = new ArrayList <PersonName>();
		PersonName personName = new PersonName();
		personName.setName("Brad Miller");
		nameList.add(personName);
		dlApplicant.setPersonNames(nameList);
		PersonName personName1 = new PersonName();
		personName1.setFirstName("Brad");
		personName1.setMiddleName("John");
		personName1.setLastName("Miller");
		personName1.setSuffix("Jr");
		personName1.setPrefix("Mr");
		List <PersonName> personNameList = new ArrayList <PersonName>();
		PersonName personName2 = new PersonName();
		personName2.setFirstName("John");
		personName2.setLastName("Doe");
		personNameList.add(personName2);
		dlApplicant.setPersonNames(personNameList);
		dlApplicant.setCurrentName(personName);
		dlApplicant.setGenderChanged(false);
		//Set LegalPresenceDocument
		CodeSetElement legalPresenceDocumentType = new CodeSetElement();
		legalPresenceDocumentType.setCode("A");
		LegalPresenceDocument lpd = new LegalPresenceDocument();
		lpd.setExpirationDate(new Date());
		lpd.setDocumentId("INS");
		lpd.setLegalPresenceDocumentType(legalPresenceDocumentType);
		Passport passport = new Passport();
		passport.setDocumentId("12345");
		passport.setPassportNumber("1234");
		passport.setExpirationDate(new Date());
		List <Document> documents = new ArrayList <Document>();
		documents.add(lpd);
		documents.add(passport);
		dlApplicant.setDocuments(documents);
		//Set organDonor;
		dlApplication.setOrganDonor(true);
		//Set fee;
		Invoice invoice = new Invoice();
		invoice = createInvoiceForPrintDocumentsActivityTest();
		invoice.setAmount(new BigDecimal(50));
		dlApplication.setFeeRequired(true);
		dlApplication.setInvoice(invoice); // invoice should also have a reason set
		//Set DL44# or Barcode#
		String microGraphicsNumber = "DL12345";
		dlApplication.setMicroGraphicsNumber(microGraphicsNumber);
		//Set Bd/LP Code
		CodeSetElement userVerifiedBdlpCode = new CodeSetElement();
		userVerifiedBdlpCode.setCode("L");
		dlApplication.setNewUserVerifiedBdlpCode(userVerifiedBdlpCode);
		//Set Photo Required Code		
		CodeSetElement photoRequiredCode = new CodeSetElement();
		photoRequiredCode.setCode("N");
		dlApplication.setPhotoRequiredCode(photoRequiredCode);
]]>
</codefragment>
</duplication>
<duplication lines="109" tokens="499">
<file line="39" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\NameBirthDateChangeActivityTest.java"/>
<file line="39" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\PrintDlRequestDocumentsActivityTest.java"/>
<codefragment>
<![CDATA[
public class PrintDlRequestDocumentsActivityTest extends TestCase {
	/** The fixture. */
	private PrintDlRequestDocumentsActivity fixture;
	private CdaProcessContext cdaProcessContext;
	private CdaTaskService mockCdaTaskService;

	/*
	 * (non-Javadoc)
	 * 
	 * @see junit.framework.TestCase#setUp()
	 */
	@Override
	@Before
	public void setUp() {
		fixture = new PrintDlRequestDocumentsActivity();
		String key = IProcessLoader.DEFAULT_TRANSITION_KEY;
		fixture.setTransitionKey(key);
		TransitionsMap transitions = new TransitionsMap();
		transitions.addTransitions(key, new EndActivity());
		fixture.setTransitions(transitions);
		mockCdaTaskService = createMock(CdaTaskService.class);
		fixture.setCdaTaskService(mockCdaTaskService);
		SessionContext sessionContext = new SessionContext();
		sessionContext.setUserContext(UserContextFixtureFactory
				.createUserContext());
		cdaProcessContext = new CdaProcessContext();
		cdaProcessContext.setCurrentActivity(fixture);
		cdaProcessContext.startIn(sessionContext);
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	@Override
	protected void tearDown() throws Exception {
		mockCdaTaskService = null;
		super.tearDown();
	}

	public void testInvoke1() {
		cdaProcessContext.getDlApplication().setDlPrintRequestDocumentCode(
				new CodeSetElement("1", "1", "1"));
		PrintResponseTs tsResponse = new PrintResponseTs();
		expect(
				mockCdaTaskService
						.processTestResultsAndIssuanceReferralDocuments(isA(PrintRequestTs.class)))
				.andReturn(tsResponse);
		replay(mockCdaTaskService);
		fixture.execute(cdaProcessContext);
		verify(mockCdaTaskService);
		assertFalse(cdaProcessContext.hasValidationErrors());
	}

	public void testInvoke2() {
		cdaProcessContext.getDlApplication().setDlPrintRequestDocumentCode(
				new CodeSetElement("2", "2", "2"));
		PrintResponseTs tsResponse = new PrintResponseTs();
		expect(
				mockCdaTaskService
						.processTestResultsAndIssuanceReferralDocuments(isA(PrintRequestTs.class)))
				.andReturn(tsResponse);
		replay(mockCdaTaskService);
		fixture.execute(cdaProcessContext);
		verify(mockCdaTaskService);
		assertFalse(cdaProcessContext.hasValidationErrors());
	}

	public void testInvoke3() {
		cdaProcessContext.getDlApplication().setDlPrintRequestDocumentCode(
				new CodeSetElement("3", "3", "3"));
		PrintResponseTs tsResponse = new PrintResponseTs();
		expect(
				mockCdaTaskService
						.processTestResultsAndIssuanceReferralDocuments(isA(PrintRequestTs.class)))
				.andReturn(tsResponse);
		replay(mockCdaTaskService);
		fixture.execute(cdaProcessContext);
		verify(mockCdaTaskService);
		assertFalse(cdaProcessContext.hasValidationErrors());
	}

	public void testInvoke4() {
		cdaProcessContext.getDlApplication().setDlPrintRequestDocumentCode(
				new CodeSetElement("4", "4", "4"));
		PrintResponseTs tsResponse = new PrintResponseTs();
		expect(
				mockCdaTaskService
						.processTestResultsAndIssuanceReferralDocuments(isA(PrintRequestTs.class)))
				.andReturn(tsResponse);
		replay(mockCdaTaskService);
		fixture.execute(cdaProcessContext);
		verify(mockCdaTaskService);
		assertFalse(cdaProcessContext.hasValidationErrors());
	}

	public void testInvoke5() {
		cdaProcessContext.getDlApplication().setDlPrintRequestDocumentCode(
				new CodeSetElement("5", "5", "5"));
		PrintResponseTs tsResponse = new PrintResponseTs();
		expect(
				mockCdaTaskService
						.processTestResultsAndIssuanceReferralDocuments(isA(PrintRequestTs.class)))
				.andReturn(tsResponse);
		replay(mockCdaTaskService);
		fixture.execute(cdaProcessContext);
		verify(mockCdaTaskService);
		assertFalse(cdaProcessContext.hasValidationErrors());
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="95" tokens="497">
<file line="46" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\convert\impl\FtpFtaPaymentReceiptDocumentConverter.java"/>
<file line="76" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpFtaPaymentReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private static final String FILE_COPY_ELEMENT = "ZBPFILCP";
	/** The Constant TRAINING_ELEMENT. */
	private static final String TRAINING_ELEMENT = "ZBPTRAIN";
	/** The Constant DL_ID_NUMBER_ELEMENT. */
	private static final String DL_ID_NUMBER_ELEMENT = "ZBPDLID_";
	/** The Constant AMOUNT_DUE_ELEMENT. */
	private static final String AMOUNT_DUE_ELEMENT = "ZBPTRNV";
	/** The Constant AMOUNT_RECEIVED_ELEMENT. */
	private static final String AMOUNT_RECEIVED_ELEMENT = "ZBPTCASH";
	/** The Constant FULL_NAME_ELEMENT. */
	private static final String FULL_NAME_ELEMENT = "ZBPNAME";
	/** The Constant CHECK_ELEMENT. */
	private static final String CHECK_ELEMENT = "ZBPTCHKS";
	/** The Constant MAIL_ADDRESS_ELEMENT. */
	private static final String MAIL_ADDRESS_ELEMENT = "ZBPADDR";
	/** The Constant CREDIT_ELEMENT. */
	private static final String CREDIT_ELEMENT = "ZBPTCRDT";
	/** The Constant MAIL_CITY_ELEMENT. */
	private static final String MAIL_CITY_ELEMENT = "ZBPCITY";
	/** The Constant MAIL_STATE_ELEMENT. */
	private static final String MAIL_STATE_ELEMENT = "ZBPSTATE";
	/** The Constant MAIL_ZIP_ELEMENT. */
	private static final String MAIL_ZIP_ELEMENT = "ZBPZIP";
	/** The Constant CARD_ELEMENT. */
	private static final String CARD_ELEMENT = "ZBPTCARD";
	/** The Constant CASHBACK_ELEMENT. */
	private static final String CASHBACK_ELEMENT = "ZBPNETAC";
	/** The Constant NET_ELEMENT. */
	private static final String NET_ELEMENT = "ZBPNETAM";
	/** The Constant COURT_ELEMENTS. */
	private static final String[] COURT_ELEMENTS = { "ZBPCRT01", "ZBPCRT02",
			"ZBPCRT03", "ZBPCRT04", "ZBPCRT05", "ZBPCRT06", "ZBPCRT07",
			"ZBPCRT08", "ZBPCRT09", "ZBPCRT10", "ZBPCRT11", "ZBPCRT12",
			"ZBPCRT13", "ZBPCRT14", "ZBPCRT15", "ZBPCRT16", "ZBPCRT17",
			"ZBPCRT18", "ZBPCRT19", "ZBPCRT20", "ZBPCRT21", "ZBPCRT22",
			"ZBPCRT23", "ZBPCRT24", "ZBPCRT25", "ZBPCRT26", "ZBPCRT27",
			"ZBPCRT28", "ZBPCRT29", "ZBPCRT30" };
	/** The Constant DOCKET_NUMBER_ELEMENTS. */
	private static final String[] DOCKET_NUMBER_ELEMENTS = { "ZBPDOC01",
			"ZBPDOC02", "ZBPDOC03", "ZBPDOC04", "ZBPDOC05", "ZBPDOC06",
			"ZBPDOC07", "ZBPDOC08", "ZBPDOC09", "ZBPDOC10", "ZBPDOC11",
			"ZBPDOC12", "ZBPDOC13", "ZBPDOC14", "ZBPDOC15", "ZBPDOC16",
			"ZBPDOC17", "ZBPDOC18", "ZBPDOC19", "ZBPDOC20", "ZBPDOC21",
			"ZBPDOC22", "ZBPDOC23", "ZBPDOC24", "ZBPDOC25", "ZBPDOC26",
			"ZBPDOC27", "ZBPDOC28", "ZBPDOC29", "ZBPDOC30" };
	/** The Constant VIOATION_DATE_ELEMENTS. */
	private static final String[] VIOATION_DATE_ELEMENTS = { "ZBPVDT01",
			"ZBPVDT02", "ZBPVDT03", "ZBPVDT04", "ZBPVDT05", "ZBPVDT06",
			"ZBPVDT07", "ZBPVDT08", "ZBPVDT09", "ZBPVDT10", "ZBPVDT11",
			"ZBPVDT12", "ZBPVDT13", "ZBPVDT14", "ZBPVDT15", "ZBPVDT16",
			"ZBPVDT17", "ZBPVDT18", "ZBPVDT19", "ZBPVDT20", "ZBPVDT21",
			"ZBPVDT22", "ZBPVDT23", "ZBPVDT24", "ZBPVDT25", "ZBPVDT26",
			"ZBPVDT27", "ZBPVDT28", "ZBPVDT29", "ZBPVDT30" };
	/** The Constant VIOATION_DATE_ELEMENTS. */
	private static final String[] FINE_AMOUNT_ELEMENTS = { "ZBPAMT01",
			"ZBPAMT02", "ZBPAMT03", "ZBPAMT04", "ZBPAMT05", "ZBPAMT06",
			"ZBPAMT07", "ZBPAMT08", "ZBPAMT09", "ZBPAMT10", "ZBPAMT11",
			"ZBPAMT12", "ZBPAMT13", "ZBPAMT14", "ZBPAMT15", "ZBPAMT16",
			"ZBPAMT17", "ZBPAMT18", "ZBPAMT19", "ZBPAMT20", "ZBPAMT21",
			"ZBPAMT22", "ZBPAMT23", "ZBPAMT24", "ZBPAMT25", "ZBPAMT26",
			"ZBPAMT27", "ZBPAMT28", "ZBPAMT29", "ZBPAMT30" };
	/** The Constant CC_TYPE_ELEMENT. */
	private static final String CC_TYPE_ELEMENT = "ZBPCCTYP";
	/** The Constant CC_AUTHORIZATION_NUMBER_ELEMENT. */
	private static final String CC_AUTHORIZATION_NUMBER_ELEMENT = "ZBPCCNUM";
	/** The Constant CC_EXPIRATION_ELEMENT. */
	private static final String CC_EXPIRATION_ELEMENT = "ZBPCCEXP";
	/** The Constant CC_AUTHORIZATION_CODE_ELEMENT. */
	private static final String CC_AUTHORIZATION_CODE_ELEMENT = "ZBPCCAUT";
	/** The Constant CC_BAT_ELEMENT. */
	private static final String CC_BAT_ELEMENT = "ZBPCCBAT";
	/** The Constant CC_DASH_ELEMENT. */
	private static final String CC_DASH_ELEMENT = "ZBPDASH";
	/** The Constant CC_ITEM_ELEMENT. */
	private static final String CC_ITEM_ELEMENT = "ZBPCCITM";
	/** The Constant DATE_ELEMENT. */
	private static final String DATE_ELEMENT = "ZBPPRCDT";
	/** The Constant OFFICE_NAME_ELEMENT. */
	private static final String OFFICE_NAME_ELEMENT = "ZBPOFFNA";
	/** The Constant OFFICE_ID_ELEMENT. */
	private static final String OFFICE_ID_ELEMENT = "ZBPOFFID";
	/** The Constant WORK_DATE_ELEMENT. */
	private static final String WORK_DATE_ELEMENT = "ZBPWKSDT";
	/** The Constant KEYERS_ID_ELEMENT. */
	private static final String KEYERS_ID_ELEMENT = "ZBPEMPID";
	/** The Constant CASHIER_SEQUENCE_ELEMENT. */
	private static final String CASHIER_SEQUENCE_ELEMENT = "ZBPCASQ_";
	/** The Constant PAGE_ELEMENT. */
	private static final String PAGE_ELEMENT = "ZBPPAGE1";
	/** The Constant DOCUMENT_TEMPLATE_NAME. */
	private static final String DOCUMENT_TEMPLATE_NAME = "sdd0801.xml";
	/** The Constant PAGE_TWO_TEMPLATE_NAME. */
	private static final String PAGE_TWO_TEMPLATE_NAME = "sdd0802.xml";
	/** The Constant FILE_COPY. */
	private static final String FILE_COPY = "***  DMV FILE COPY  ***";
]]>
</codefragment>
</duplication>
<duplication lines="83" tokens="494">
<file line="125" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\PhotoRetakeNotificationDocumentRequestValidatorTest.java"/>
<file line="130" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\VoterRegisterationRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		dlApplicationFixture = new DlApplication();
		driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		// PhotoInformation object
		photoInformation = new PhotoInformation();
		photoInformation.setPhotoName("YOUNG ONE");
		Address photoAddress = new Address(AddressType.MAILING);
		photoAddress.setLine1("2007");
		photoAddress.setLine2("Arden Way");
		photoAddress.setCity("Sacramento");
		CodeSetElement photoAddressState = new CodeSetElement();
		photoAddressState.setCode("CA");
		photoAddressState.setName("California");
		photoAddressState.setDescription("California");
		photoAddress.setStateCode(photoAddressState);
		photoAddress.setZip("95825");
		photoInformation.setPhotoAddress(photoAddress);
		driverLicense.setPhotoInformation(photoInformation);
		IdCard idCard = new IdCard();
		idCard.setIdNumber("I8005638");
		// Person object
		person = new Person();
		DateFormat format = new SimpleDateFormat("MM-dd-yy");
		Date date = null;
		try {
			date = format.parse("08-15-47");
		}
		catch (ParseException e) {
			LOGGER.error(e);
		}
		PersonName currentName = new PersonName();
		currentName.setName("Tiger Woods");
		PersonName previousName = new PersonName();
		previousName.setName("Cheeta Woods");
		person.setCurrentName(currentName);
		person.setPreviousName(previousName);
		person.setBirthDate(date);
		person.setIdCard(idCard);
		person.setDriverLicense(driverLicense);
		currentMailingAddress = new Address(AddressType.MAILING);
		currentMailingAddress.setLine1("2005");
		currentMailingAddress.setLine2("Evergreen St");
		currentMailingAddress.setCity("Sacramento");
		CodeSetElement currentMailingState = new CodeSetElement();
		currentMailingState.setCode("CA");
		currentMailingState.setName("California");
		currentMailingState.setDescription("California");
		currentMailingAddress.setStateCode(currentMailingState);
		currentMailingAddress.setZip("95815");
		currentResidenceAddress = new Address(AddressType.RESIDENTIAL);
		currentResidenceAddress.setLine1("2006");
		currentResidenceAddress.setLine2("Evergreen St");
		currentResidenceAddress.setCity("Sacramento");
		CodeSetElement currentResidenceState = new CodeSetElement();
		currentResidenceState.setCode("CA");
		currentResidenceState.setName("California");
		currentResidenceState.setDescription("California");
		currentResidenceAddress.setStateCode(currentMailingState);
		currentResidenceAddress.setZip("95815");
		existingMailingAddress = new Address(AddressType.MAILING);
		existingMailingAddress.setLine1("2005");
		existingMailingAddress.setLine2("Evergreen St");
		existingMailingAddress.setCity("Sacramento");
		CodeSetElement existingMailingState = new CodeSetElement();
		existingMailingState.setCode("CA");
		existingMailingState.setName("California");
		existingMailingState.setDescription("California");
		existingMailingAddress.setStateCode(existingMailingState);
		existingMailingAddress.setZip("95815");
		existingResidenceAddress = new Address(AddressType.RESIDENTIAL);
		existingResidenceAddress.setLine1("2006");
		existingResidenceAddress.setLine2("Evergreen St");
		existingResidenceAddress.setCity("Sacramento");
		CodeSetElement existingResidenceState = new CodeSetElement();
		existingResidenceState.setCode("CA");
		existingResidenceState.setName("California");
		existingResidenceState.setDescription("California");
		existingResidenceAddress.setStateCode(existingMailingState);
		existingResidenceAddress.setZip("95815");
		person.addAddress(currentMailingAddress);
		person.addAddress(currentResidenceAddress);
		person.addExistingAddress(existingMailingAddress);
		person.addExistingAddress(existingResidenceAddress);
]]>
</codefragment>
</duplication>
<duplication lines="118" tokens="467">
<file line="286" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ts\dl\service\impl\CdaTaskService.java"/>
<file line="58" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ts\dl\service\impl\EndOfTransactionTaskService.java"/>
<codefragment>
<![CDATA[
	public UpdateTransactionRecordResponseTs execute(
			UpdateTransactionRecordRequestTs tsRequest) {
		UpdateTransactionRecordResponseTs tsResponse = null;
		if ((tsRequest.getDlApplication().isOriginalApplicationIndicator() == null)
				|| Boolean.FALSE.equals(tsRequest.getDlApplication()
						.isOriginalApplicationIndicator())) {
			/** This logic is handled by the converter 
			 
			//			String originalTtc = dlApplication.getOriginalProcessHistory()
			//					.getUserContext().getTtc();
			//			if (ITtcConstants.DLC.equals(originalTtc)
			//					|| ITtcConstants.DLD.equals(originalTtc)
			//					|| ITtcConstants.DRT.equals(originalTtc)) {
			//				//EL2 - Photo Retake Update Request
			//			}
			//			else if (ITtcConstants.DLE.equals(originalTtc)) {
			//				//EL3 
			//			}
			//			else if (ITtcConstants.IDA.equals(originalTtc)
			//					|| ITtcConstants.IDP.equals(originalTtc)
			//					|| ITtcConstants.IDS.equals(originalTtc)) {
			//				//EL4
			//			}
			//			else {
			//				//EL1
			//				UpdateHeadquartersSystemResponseBus updateHeadquartersSystemResponseBus = this
			//						.executeUpdateHeadquaterSystem(tsRequest
			//								.getUserContext(),
			//								tsRequest.getDlApplication(), false);
			//				if (updateHeadquartersSystemResponseBus.hasErrors()) {
			//					tsResponse = new UpdateTransactionRecordResponseTs(
			//							updateHeadquartersSystemResponseBus
			//									.getErrorCollector());
			//				}
			//			} 
			* */
			//EL1 - non original update
			UpdateHeadquartersSystemResponseBus updateHeadquartersSystemResponseBus = this
					.executeUpdateHeadquaterSystem(tsRequest.getUserContext(),
							tsRequest.getDlApplication(), false);
			if (updateHeadquartersSystemResponseBus.hasErrors()) {
				tsResponse = new UpdateTransactionRecordResponseTs(
						updateHeadquartersSystemResponseBus.getErrorCollector());
			}
		}
		else {
			//ELB - original update, execute only once
			UpdateHeadquartersSystemResponseBus updateHeadquartersSystemResponseBus = this
					.executeUpdateHeadquaterSystem(tsRequest.getUserContext(),
							tsRequest.getDlApplication(), true);
			if (updateHeadquartersSystemResponseBus.hasErrors()) {
				tsResponse = new UpdateTransactionRecordResponseTs(
						updateHeadquartersSystemResponseBus.getErrorCollector());
			}
		}
		if (PersonUtil.isNameChanged(tsRequest.getDlApplication()
				.getApplicant())
				|| this.isBirthDateChanged(tsRequest.getDlApplication()
						.getApplicant())) {
			//EN2
			UpdateExtendedNameIndexResponseBus updateExtendedNameIndexResponseBus = this
					.executeUpdateExtendedNameIndex(tsRequest.getUserContext(),
							tsRequest.getDlApplication().getApplicant());
			if (updateExtendedNameIndexResponseBus.hasErrors()) {
				tsResponse = new UpdateTransactionRecordResponseTs(
						updateExtendedNameIndexResponseBus.getErrorCollector());
			}
		}
		// check new incomplete code?
		if (!EaseUtil.isNullOrBlank(tsRequest.getDlApplication()
				.getPdpsRecords())
				&& EaseUtil.isNotNull(tsRequest.getDlApplication()
						.getExistingDlIncompleteAppReasonCode())) {
			//DPS
			ProblemDriverUpdateResponseBus problemDriverUpdateResponseBus = this
					.executeProblemDriverUpdate(tsRequest.getUserContext(),
							tsRequest.getDlApplication());
			if (problemDriverUpdateResponseBus.hasErrors()) {
				tsResponse = new UpdateTransactionRecordResponseTs(
						problemDriverUpdateResponseBus.getErrorCollector());
			}
		}
		if (DlApplicationUtil.isCommercialLicense(tsRequest.getDlApplication()
				.getApplicant().getDriverLicense().getExistingLicenseClasses())
				|| DlApplicationUtil.isCommercialLicense(tsRequest
						.getDlApplication().getApplicant().getDriverLicense()
						.getAppliedLicenseClasses())
				&& PersonUtil.hasOutOfStateDlHistory(tsRequest
						.getDlApplication().getApplicant())) {
			//DPR
			UpdateDlHistoryResponseBus updateDlHistoryResponseBus = this
					.executeUpdateDlHistory(tsRequest.getUserContext(),
							tsRequest.getDlApplication().getApplicant());
			if (updateDlHistoryResponseBus.hasErrors()) {
				tsResponse = new UpdateTransactionRecordResponseTs(
						updateDlHistoryResponseBus.getErrorCollector());
			}
		}
		if (tsResponse == null) {
			tsResponse = new UpdateTransactionRecordResponseTs();
		}
		else if (tsResponse.hasErrors()) {
			//NCC
			SendLogMessageToNetworkControlCenterResponseBus sendLogMessageToNetworkControlCenterResponseBus = this
					.executeSendLogMessageToNetworkControlCenter(tsRequest
							.getUserContext());
			if (sendLogMessageToNetworkControlCenterResponseBus.hasErrors()) {
				tsResponse = new UpdateTransactionRecordResponseTs(
						sendLogMessageToNetworkControlCenterResponseBus
								.getErrorCollector());
			}
		}
		return tsResponse;
	}

	private boolean isBirthDateChanged(Person person) {
		//TODO: ID Card BD change
		return false;
]]>
</codefragment>
</duplication>
<duplication lines="98" tokens="459">
<file line="102" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\CommercialTestResultsDocumentRequestValidatorTest.java"/>
<file line="102" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\NonCommercialTestResultsDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		validateFixture = new NonCommercialTestResultsDocumentRequestValidator();
		if (LOGGER.isDebugEnabled()) {
			LOGGER.debug("setUp() - end");
		}
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	/**
	 * Releases the resources
	 * @throws java.lang.Exception
	 */
	@Override
	@After
	public void onTearDown() throws Exception {
		userContextFixture = null;
		dlApplicationFixture = null;
		errorCollector = null;
		requestFixture = null;
		validateFixture = null;
	}

	/**
	 * Loads DL Application fixture
	 */
	private void initDlApplicationFixture() {
		dlApplicationFixture = new DlApplication();
		driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		// PhotoInformation object
		photoInformation = new PhotoInformation();
		photoInformation.setPhotoName("YOUNG ONE");
		Address photoAddress = new Address(AddressType.MAILING);
		photoAddress.setLine1("2007");
		photoAddress.setLine2("Arden Way");
		photoAddress.setCity("Sacramento");
		CodeSetElement photoAddressState = new CodeSetElement();
		photoAddressState.setCode("CA");
		photoAddressState.setName("California");
		photoAddressState.setDescription("California");
		photoAddress.setStateCode(photoAddressState);
		photoAddress.setZip("95825");
		photoInformation.setPhotoAddress(photoAddress);
		driverLicense.setPhotoInformation(photoInformation);
		// Person object
		person = new Person();
		PersonName currentName = new PersonName();
		currentName.setName("Tiger Woods");
		PersonName previousName = new PersonName();
		previousName.setName("Cheeta Woods");
		Calendar calendar = new GregorianCalendar(1977, Calendar.JUNE, 05);
		person.setBirthDate(calendar.getTime());
		person.setCurrentName(currentName);
		person.setPreviousName(previousName);
		person.setDriverLicense(driverLicense);
		Address currentMailingAddress = new Address(AddressType.MAILING);
		currentMailingAddress.setLine1("2005");
		currentMailingAddress.setLine2("Evergreen St");
		currentMailingAddress.setCity("Sacramento");
		CodeSetElement currentMailingState = new CodeSetElement();
		currentMailingState.setCode("CA");
		currentMailingState.setName("California");
		currentMailingState.setDescription("California");
		currentMailingAddress.setStateCode(currentMailingState);
		currentMailingAddress.setZip("95815");
		person.addAddress(currentMailingAddress);
		List <IProcessHistory> processHistories = new ArrayList <IProcessHistory>();
		IProcessHistory processHistory = new ProcessHistory(
				UserContextFixtureFactory
						.createUserContextForDocumentGeneration(), null, null,
				null, new Date(), new Integer(131), "21");
		processHistories.add(processHistory);
		dlApplicationFixture.setProcessHistory(processHistories);
		dlApplicationFixture.setApplicationDate(new Date());
		dlApplicationFixture.setApplicant(person);
		dlApplicationFixture.setLicense(driverLicense);
	}

	/**
	 * Tests the validation with different request object
	 */
	@Test
	public void testWithInValidRequest() {
		errorCollector = validateFixture
				.validate(new SendCdlisAndPdpsRequestEcs(person, 0,
						userContextFixture, new SendCdlisAndPdpsConverter()));
		assertNotNull(errorCollector);
		assertTrue(errorCollector.getEntries().size() > 0);
		assertNotNull(errorCollector.getEntries().get(0).getExceptionMessage());
	}

	/**
	 * This method tests for UserContext being Null
	 */
	@Test
	public void testWithNullUserContext() {
		requestFixture = new NonCommercialTestResultsDocumentRequestTus(null,
]]>
</codefragment>
</duplication>
<duplication lines="94" tokens="456">
<file line="103" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\FcpProcessingDismissalDocumentRequestValidatorTest.java"/>
<file line="99" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\FtaProcessingDocumentRequestValidatorTest.java"/>
<file line="95" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\FtpFtaPaymentReceiptDocumentRequestValidatorTest.java"/>
<file line="101" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\FtpProcessingDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		validateFixture = new FtpProcessingDocumentRequestValidator();
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	/**
	 * Releases the resources
	 * @throws java.lang.Exception
	 */
	@Override
	@After
	public void onTearDown() throws Exception {
		requestFixture = null;
		validateFixture = null;
		userContextFixture = null;
		personFixture = null;
		mailingAddress = null;
	}

	/**
	 * Initializes Person fixture.
	 */
	private void initPersonFixture() {
		personFixture = new Person();
		Calendar birthDate = Calendar.getInstance();
		birthDate.set(1950, Calendar.JUNE, 03);
		personFixture.setBirthDate(birthDate.getTime());
		PersonName pName = new PersonName();
		pName.setFirstName("Alexander");
		pName.setLastName("Fleming");
		pName.setMiddleName("M");
		personFixture.getPersonNames().add(pName);
		personFixture.setCurrentName(pName);
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415 1st ave");
		mailingAddress.setLine2("SACRAMENTO CA 95818");
		mailingAddress.setCity("SACRAMENTO");
		mailingAddress
				.setStateCode(new CodeSetElement("CA", "CA", "California"));
		mailingAddress.setZip("95827");
		personFixture.addAddress(mailingAddress);
		personFixture.addExistingAddress(mailingAddress);
	}

	/**
	 * Populate citation detail.
	 */
	private void populateCitationDetail() {
		citationDetail = new CitationDetail();
		citationDetail.setDocketNumber("1234");
		citationDetail.setCourtCode(new CodeSetElement("X", "X", "X"));
		Calendar violateDate = Calendar.getInstance();
		violateDate.set(2010, Calendar.FEBRUARY, 02);
		citationDetail.setViolationDate(violateDate.getTime());
		List <SectionViolated> sectionsViolated = new ArrayList <SectionViolated>();
		sectionViolated = new SectionViolated();
		sectionViolated.setStatuteCode(new CodeSetElement("A", "A", "A"));
		sectionViolated.setSectionViolatedNumber("22350");
		sectionsViolated.add(sectionViolated);
		sectionViolated = new SectionViolated();
		sectionViolated.setStatuteCode(new CodeSetElement("X", "X", "X"));
		sectionViolated.setSectionViolatedNumber("0100");
		sectionsViolated.add(sectionViolated);
		citationDetail.setSectionsViolated(sectionsViolated);
		Calendar convictionDate = Calendar.getInstance();
		convictionDate.set(2010, Calendar.MARCH, 03);
		citationDetail.setConvictionDate(convictionDate.getTime());
		citationDetail.setCourtCode(new CodeSetElement("19100", "19100",
				"19100"));
	}

	/**
	 * Test with invalid print service request.
	 */
	@Test
	public void testWithInvalidPrintServiceRequest() {
		OrganDonorDocumentRequestTus wrongRequestFixture = new OrganDonorDocumentRequestTus(
				userContextFixture, applicationFixture.getApplicant(), true,
				null);
		errorCollector = validateFixture.validate(wrongRequestFixture);
		logErrorCollector(errorCollector);
		assertNotNull(errorCollector);
		assertTrue(errorCollector.getEntries().size() > 0);
		assertNotNull(errorCollector.getEntries().get(0).getExceptionMessage());
	}

	/**
	 * This method tests for citationDetail being Null.
	 */
	@Test
	public void testWithNullCitationDetail() {
		applicationFixture.setCitationDetails(null);
		requestFixture = new FtpProcessingDocumentRequestTus(
]]>
</codefragment>
</duplication>
<duplication lines="281" tokens="441">
<file line="404" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\CustomerInfoProcessContext.java"/>
<file line="337" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\DlaProcessContext.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Gets the inventory item.
	 * 
	 * @return the inventoryItem
	 */
	public InventoryItem getInventoryItem() {
		return inventoryItem;
	}

	/**
	 * Gets the inventory requested.
	 * 
	 * @return the inventoryRequested
	 */
	public Boolean getInventoryRequested() {
		return inventoryRequested;
	}

	/**
	 * Gets the invoice.
	 * 
	 * @return the invoice
	 */
	@Override
	public Invoice getInvoice() {
		return getDlApplication().getInvoice();
	}

	/**
	 * Gets the checks if is ani cna.
	 * 
	 * @return the isAniCna
	 */
	public Boolean getIsAniCna() {
		return isAniCna;
	}

	/**
	 * @return the isAnyAniRecordPrimary
	 */
	public Boolean getIsAnyAniRecordPrimary() {
		return isAnyAniRecordPrimary;
	}

	/**
	 * Gets the checks if is dl cna.
	 * 
	 * @return the isDlCna
	 */
	public Boolean getIsDlCna() {
		return isDlCna;
	}

	/**
	 * Gets the checks if is inventory cna.
	 * 
	 * @return the isInventoryCna
	 */
	public Boolean getIsInventoryCna() {
		return isInventoryCna;
	}

	/**
	 * Gets the lpv record.
	 * 
	 * @return the lpvRecord
	 */
	public LpvRecord getLpvRecord() {
		return lpvRecord;
	}

	/**
	 * Gets the New TTCs.
	 * 
	 * @return the newTtcs
	 */
	public List <String> getNewTtcs() {
		return newTtcs;
	}

	/**
	 * Gets the pdps records.
	 * 
	 * @return the pdpsRecords
	 */
	public List <PdpsRecord> getPdpsRecords() {
		return getDlApplication().getPdpsRecords();
	}

	/**
	 * Gets the pdps result hits.
	 * 
	 * @return the pdpsResultHits
	 */
	public List <DrivingRecord> getPdpsResultHits() {
		return this.getDlApplication().getPdpsResultHits();
	}

	/**
	 * Gets the pdps result hits cdu.
	 * 
	 * @return the pdps result hits cdu
	 */
	public List <DrivingRecord> getPdpsResultHitsCdu() {
		return pdpsResultHitsCdu;
	}

	/**
	 * This method returns Person object of the primary record from ANI response.
	 * 
	 * @return the primary ani record
	 */
	public AniRecord getPrimaryAniRecord() {
		Iterator <AniRecord> iterator = getAniRecords().iterator();
		while (iterator.hasNext()) {
			AniRecord aniRecord = iterator.next();
			if (aniRecord.isPrimary()) {
				return aniRecord;
			}
		}
		return null;
	}

	/**
	 * Gets the promise list.
	 * 
	 * @return the promiseList
	 */
	public List <IResponsePromise> getPromiseList() {
		return promiseList;
	}

	/**
	 * Gets the read only dl application.
	 * 
	 * @return the readOnlyDlApplication
	 */
	public DlApplication getReadOnlyDlApplication() {
		return readOnlyDlApplication;
	}

	/**
	 * Gets the record condition indicators.
	 * 
	 * @return the recordConditionIndicators
	 */
	public RecordConditionIndicators getRecordConditionIndicators() {
		if (recordConditionIndicators == null) {
			recordConditionIndicators = new RecordConditionIndicators();
		}
		return recordConditionIndicators;
	}

	/**
	 * This Method returns SocialSecurityDocument object.
	 * 
	 * @return instance of SocialSecurityDocument
	 */
	public SocialSecurityDocument getSocialSecurityDocument() {
		return getDlApplication().getSocialSecurityDocument();
	}

	/**
	 * Gets the transaction.
	 * 
	 * @return the transaction
	 */
	@Override
	public Transaction getTransaction() {
		return transaction;
	}

	/**
	 * This method returns a Voucher object.
	 * 
	 * @return Voucher Object.
	 */
	@Override
	public Voucher getVoucher() {
		return getInvoice().getVoucherPayment();
	}

	/**
	 * Checks if is print response.
	 * 
	 * @return the printResponse
	 */
	public boolean isPrintResponse() {
		return printResponse;
	}

	/**
	 * Sets the action.
	 * 
	 * @param action the new action
	 */
	public void setAction(Action action) {
		this.action = action;
	}

	/**
	 * Sets the additional os dl info.
	 * 
	 * @param additionalOsDlInfo the new additional os dl info
	 */
	public void setAdditionalOsDlInfo(Boolean additionalOsDlInfo) {
		this.additionalOsDlInfo = additionalOsDlInfo;
	}

	/**
	 * This Method sets Person objects returned by ANI search.
	 * 
	 * @param aniResults the ani results
	 */
	public void setAniResults(List <AniRecord> aniResults) {
		this.aniResults = aniResults;
	}

	/**
	 * Sets the ani try number.
	 * 
	 * @param aniTryNumber the new ani try number
	 */
	public void setAniTryNumber(Integer aniTryNumber) {
		this.aniTryNumber = aniTryNumber;
	}

	/**
	 * Sets the cdlis records.
	 * 
	 * @param cdlisRecords the cdlisRecords to set
	 */
	public void setCdlisRecords(List <CdlisRecord> cdlisRecords) {
		this.getDlApplication().setCdlisRecords(cdlisRecords);
	}

	/**
	 * This method sets primary ResponsePromise object from Cdlis and Pdps
	 * inquiry.
	 * 
	 * @param cdlisResponsePromise the cdlis response promise
	 */
	public void setCdlisResponsePromise(IResponsePromise cdlisResponsePromise) {
		this.cdlisResponsePromise = cdlisResponsePromise;
	}

	/**
	 * Sets the cdlis result hits.
	 * 
	 * @param cdlisResultHits the cdlisResultHits to set
	 */
	public void setCdlisResultHits(List <DrivingRecord> cdlisResultHits) {
		this.getDlApplication().setCdlisResultHits(cdlisResultHits);
	}

	/**
	 * Sets the cdlis result hits cdu.
	 * 
	 * @param cdlisResultHitsCdu the new cdlis result hits cdu
	 */
	public void setCdlisResultHitsCdu(List <DrivingRecord> cdlisResultHitsCdu) {
		this.cdlisResultHitsCdu = cdlisResultHitsCdu;
	}

	/**
	 * Sets the cdlis try number.
	 * 
	 * @param cdlisTryNumber the cdlisTryNumber to set
	 */
	public void setCdlisTryNumber(Integer cdlisTryNumber) {
		this.cdlisTryNumber = cdlisTryNumber;
	}

	/**
	 * Sets the current cdlis record.
	 * 
	 * @param primaryCDLISRecord the primaryCDLISRecord to set
	 */
	public void setCurrentCDLISRecord(CdlisRecord primaryCDLISRecord) {
]]>
</codefragment>
</duplication>
<duplication lines="58" tokens="394">
<file line="131" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\CustomerInfoProcessContext.java"/>
<file line="119" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\DlaProcessContext.java"/>
<codefragment>
<![CDATA[
	public DlaProcessContext() {
		this(new DlApplication());
		getDlApplication().setNewLicenseNumberRequired(false);
		aniResults = new ArrayList <AniRecord>();
		Person person = new Person();
		person.setCurrentName(new PersonName());
		List <PersonName> personNames = new ArrayList <PersonName>();
		person.setPersonNames(personNames);
		person.setDriverLicense(new DriverLicense());
		person.getDriverLicense().setAppliedLicenseClasses(
				new ArrayList <CodeSetElement>());
		OutOfStateLicense outOfStateLicense = new OutOfStateLicense();
		outOfStateLicense.setName(new PersonName());
		person.setPreviousLicenses(new ArrayList <OutOfStateLicense>());
		person.addPreviousLicense(outOfStateLicense);
		getDlApplication().setApplicant(person);
		AniRecord aniRecord = new AniRecord();
		aniResults.add(aniRecord);
		lpvRecord = new LpvRecord();
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsnServiceVerificationCode(new CodeSetElement());
		LegalPresenceDocument legalPresenceDocument = new LegalPresenceDocument();
		legalPresenceDocument.setVerificationCode(new CodeSetElement());
		List <Document> list = new ArrayList <Document>();
		Passport passport = new Passport();
		list.add(ssnDocument);
		list.add(legalPresenceDocument);
		list.add(passport);
		person.setDocuments(list);
		getDlApplication().setApplicationTypeCode(
				new CodeSetElement("", "", ""));
		Address mailingAddress = new Address(AddressType.MAILING);
		Address residenceAddress = new Address(AddressType.RESIDENTIAL);
		person.addAddress(mailingAddress);
		person.addAddress(residenceAddress);
		Invoice invoice = new Invoice();
		List <InvoiceItem> items = new ArrayList <InvoiceItem>();
		invoice.setInvoiceItems(items);
		List <Payment> payments = new ArrayList <Payment>();
		invoice.setPayments(payments);
		CashPayment cashPayment = new CashPayment();
		payments.add(cashPayment);
		CheckPayment checkPayment = new CheckPayment();
		payments.add(checkPayment);
		DebitPayment debitPayment = new DebitPayment();
		payments.add(debitPayment);
		List <IProcessHistory> processHistory = new ArrayList <IProcessHistory>();
		getDlApplication().setProcessHistory(processHistory);
		getDlApplication().setInvoice(invoice);
		setChangedName(new PersonName());
	}

	/**
	 * This constructor takes DlApplication as parameter.
	 * 
	 * @param dlApplication the dl application
	 */
	public DlaProcessContext(DlApplication dlApplication) {
]]>
</codefragment>
</duplication>
<duplication lines="68" tokens="386">
<file line="132" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\docs\service\impl\test\DocumentServiceTest.java"/>
<file line="124" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\DlPaymentReceiptRequestTusTest.java"/>
<codefragment>
<![CDATA[
		driverLicense.setAppliedLicenseClasses(licenseCodeList);
		//driverLicense.setLicenseTypeCode(licenseTypeCode);
		// adding the SSN Document
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsn("123-45-6789");
		ArrayList <Document> documentsList = new ArrayList <Document>();
		documentsList.add(ssnDocument);
		dlApplnFixture.setDocuments(documentsList);
		// Setting person object
		Person person = new Person();
		DateFormat format = new SimpleDateFormat("MM-dd-yy");
		Date date = null;
		try {
			date = format.parse("08-15-47");
		}
		catch (ParseException e) {
			LOGGER.error(e);
		}
		person.setBirthDate(date);
		PersonName personName = new PersonName();
		personName.setFirstName("Albert");
		personName.setLastName("Einstein");
		personName.setMiddleName("M");
		ArrayList <PersonName> personNamesList = new ArrayList <PersonName>();
		personNamesList.add(personName);
		person.setPersonNames(personNamesList);
		person.setCurrentName(personName);
		//driverLicense.setApplicant(person);
		// setting mailing address
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415");
		mailingAddress.setLine2("1st Ave");
		mailingAddress.setCity("SACRAMENTO");
		mailingAddress.setStateCode(new CodeSetElement("CA","CA","CA"));
		mailingAddress.setZip("95818");
		//person.addAddress(mailingAddress, true);
		dlApplnFixture.setLicense(driverLicense);
	}

	/**
	 * Setup invoice fixture
	 */
	private void setUpInvoiceFixture() {
		invoiceFixture = new Invoice();
		InvoiceItem invoiceItem = new InvoiceItem();
		Fee fee = new Fee();
		fee.setAmount(new BigDecimal(28));
		invoiceItem.setFee(fee);
		invoiceItem.setWaivedAmount(new BigDecimal(0));
		List <InvoiceItem> invoiceItemsList = new ArrayList <InvoiceItem>();
		invoiceItemsList.add(invoiceItem);
		invoiceFixture.setInvoiceItems(invoiceItemsList);
		// Cash Payments
		CashPayment cashPayment = new CashPayment();
		cashPayment.setAmount(new BigDecimal(28));
		CheckPayment checkPayment = new CheckPayment();
		checkPayment.setAmount(new BigDecimal(0));
		CreditPayment creditPayment = new CreditPayment();
		creditPayment.setAmount(new BigDecimal(0));
		DebitPayment debitPayment = new DebitPayment();
		debitPayment.setAmount(BigDecimal.TEN);
		List <Payment> paymentsList = new ArrayList <Payment>();
		paymentsList.add(cashPayment);
		paymentsList.add(checkPayment);
		paymentsList.add(creditPayment);
		paymentsList.add(debitPayment);
		invoiceFixture.setPayments(paymentsList);
	}
]]>
</codefragment>
</duplication>
<duplication lines="59" tokens="385">
<file line="122" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<file line="188" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ getDafRecordElement(), "131" },
				{ getDlIdNumberElement(), "I7654321" },
				{ getDlExpDateOrTextElement(), "042810" },
				{ getIdExpDateOrTextElement(), "042810" },
				{ getCurrentNameElement(), "Miller Brad, Mr" },
				{ getAkaNameElement(), "Miller Brad, Mr" },
				{ getApplicantMailingAddressElement(),
						"123 Existing Mailing St" },
				{ getApplicantMailingCityElement(), "Sacramento" },
				{ getApplicantMailingStateElement(), "CA" },
				{ getApplicantMailingZipElement(), "95815" },
				{ getApplicantResidenceAddressElement(),
						"456 Current Residence St" },
				{ getApplicantResidenceCityElement(), "Sunnyvale" },
				{ getApplicantResidenceStateElement(), "CA" },
				{ getGenderElement(), "M" },
				{ getHairColorElement(), "BLK" },
				{ getEyeColorElement(), "BLK" },
				{ getHeightInFeetsElement(), "5" },
				{ getHeightInInchesElement(), "10" },
				{ getWeightElement(), "150" },
				{ getBirthDateElement(), "06-05-77" },
				{ getClassOfRecord1Element(), "A" },
				{ getClassOfRecord2Element(), "M" },
				{ getClassOfRecordCommlElement(), "*" },
				{ getNonCommlLicenseCategory1Element(), "C1" },
				{ getNonCommlLicenseCategory2Element(), "C2" },
				{ getRecordStatusesElement().get("RECORD_STATUS1_ELEMENT"),
						"Action Message 0" },
				{ getRecordStatusesElement().get("RECORD_STATUS2_ELEMENT"),
						"Action Message 1" },
				{ getRecordStatusesElement().get("RECORD_STATUS3_ELEMENT"),
						"Action Message 2" },
				{ getRecordStatusesElement().get("RECORD_STATUS4_ELEMENT"),
						"Action Message 3" },
				{ getRecordStatusesElement().get("RECORD_STATUS5_ELEMENT"),
						"Action Message 4" },
				{ getRecordStatusesElement().get("RECORD_STATUS6_ELEMENT"),
						"Action Message 5" },
				{ getRecordStatusesElement().get("RECORD_STATUS7_ELEMENT"),
						"Action Message 6" },
				{ getRecordStatusesElement().get("RECORD_STATUS8_ELEMENT"),
						"Action Message 7" },
				{ getRecordStatusesElement().get("RECORD_STATUS9_ELEMENT"),
						"Action Message 8" },
				{ getRecordStatusesElement().get("RECORD_STATUS10_ELEMENT"),
						"Action Message 9" },
				{ getRecordStatusesElement().get("RECORD_STATUS11_ELEMENT"),
						"Action Message 10" },
				{ getRecordStatusesElement().get("RECORD_STATUS12_ELEMENT"),
						"Action Message 11" },
				{ getRecordStatusesElement().get("RECORD_STATUS13_ELEMENT"),
						"Action Message 12" },
				{ getRecordStatusesElement().get("RECORD_STATUS14_ELEMENT"),
						"Action Message 13" } };
		return dataArray;
	}

	private String[][] populateDataMiscTtcDlId() {
]]>
</codefragment>
</duplication>
<duplication lines="96" tokens="382">
<file line="529" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\RestrictionCodesIndicators.java"/>
<file line="267" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\indicators\impl\test\RestrictionCodesIndicatorsTest.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * This method fetches Driving Restriction based on the Restriction Code.
	 * 
	 * @param restrictionCode the Driving Restriction Code
	 * 
	 * @return the Driving Restriction Code
	 */
	private DrivingRestriction fetchDrivingRestriction(int restrictionCode) {
		DrivingRestriction drivingRestriction = new DrivingRestriction();
		DrivingRestriction restriction71 = new DrivingRestriction();
		DrivingRestriction restriction72 = new DrivingRestriction();
		DrivingRestriction restriction73 = new DrivingRestriction();
		DrivingRestriction restriction80 = new DrivingRestriction();
		DrivingRestriction restriction81 = new DrivingRestriction();
		DrivingRestriction restriction82 = new DrivingRestriction();
		DrivingRestriction restriction83 = new DrivingRestriction();
		DrivingRestriction restriction84 = new DrivingRestriction();
		DrivingRestriction restriction85 = new DrivingRestriction();
		DrivingRestriction restriction86 = new DrivingRestriction();
		DrivingRestriction restriction87 = new DrivingRestriction();
		//TODO Need to fetch it from Service
		restriction71.setRestrictionTypeCode(new CodeSetElement(
				CLASS_A_SINGLE_TRAILER_NO_PAY, CLASS_A_SINGLE_TRAILER_NO_PAY,
				CLASS_A_SINGLE_TRAILER_NO_PAY));
		restriction72.setRestrictionTypeCode(new CodeSetElement(
				CLASS_A_SINGLE_TRAILER_PAY_ONLY,
				CLASS_A_SINGLE_TRAILER_PAY_ONLY,
				CLASS_A_SINGLE_TRAILER_PAY_ONLY));
		restriction73.setRestrictionTypeCode(new CodeSetElement(
				CLASS_AC_SINGLE_TRAILER_NO_PAY, CLASS_AC_SINGLE_TRAILER_NO_PAY,
				CLASS_AC_SINGLE_TRAILER_NO_PAY));
		restriction80.setRestrictionTypeCode(new CodeSetElement(
				CLASS_B_FIREFIGHTING_ONLY, CLASS_B_FIREFIGHTING_ONLY,
				CLASS_B_FIREFIGHTING_ONLY));
		restriction81.setRestrictionTypeCode(new CodeSetElement(
				CLASS_A_FIREFIGHTING_ONLY, CLASS_A_FIREFIGHTING_ONLY,
				CLASS_A_FIREFIGHTING_ONLY));
		restriction82.setRestrictionTypeCode(new CodeSetElement(
				CLASS_BC_FIREFIGHTING_ONLY, CLASS_BC_FIREFIGHTING_ONLY,
				CLASS_BC_FIREFIGHTING_ONLY));
		restriction83.setRestrictionTypeCode(new CodeSetElement(
				CLASS_AC_FIREFIGHTING_ONLY, CLASS_AC_FIREFIGHTING_ONLY,
				CLASS_AC_FIREFIGHTING_ONLY));
		restriction84.setRestrictionTypeCode(new CodeSetElement(
				CLASS_AB_FIREFIGHTING_ONLY, CLASS_AB_FIREFIGHTING_ONLY,
				CLASS_AB_FIREFIGHTING_ONLY));
		restriction85.setRestrictionTypeCode(new CodeSetElement(
				CLASS_A_FIREFIGHTING_OR_TOW_SINGLE,
				CLASS_A_FIREFIGHTING_OR_TOW_SINGLE,
				CLASS_A_FIREFIGHTING_OR_TOW_SINGLE));
		restriction86.setRestrictionTypeCode(new CodeSetElement(
				CLASS_AB_FIREFIGHTING_OR_TOW_SINGLE,
				CLASS_AB_FIREFIGHTING_OR_TOW_SINGLE,
				CLASS_AB_FIREFIGHTING_OR_TOW_SINGLE));
		restriction87.setRestrictionTypeCode(new CodeSetElement(
				CLASS_AC_FIREFIGHTING_OR_TOW_SINGLE,
				CLASS_AC_FIREFIGHTING_OR_TOW_SINGLE,
				CLASS_AC_FIREFIGHTING_OR_TOW_SINGLE));
		if (restrictionCode == 71) {
			drivingRestriction = restriction71;
		}
		else if (restrictionCode == 72) {
			drivingRestriction = restriction72;
		}
		else if (restrictionCode == 73) {
			drivingRestriction = restriction73;
		}
		else if (restrictionCode == 80) {
			drivingRestriction = restriction80;
		}
		else if (restrictionCode == 81) {
			drivingRestriction = restriction81;
		}
		else if (restrictionCode == 82) {
			drivingRestriction = restriction82;
		}
		else if (restrictionCode == 83) {
			drivingRestriction = restriction83;
		}
		else if (restrictionCode == 84) {
			drivingRestriction = restriction84;
		}
		else if (restrictionCode == 85) {
			drivingRestriction = restriction85;
		}
		else if (restrictionCode == 86) {
			drivingRestriction = restriction86;
		}
		else if (restrictionCode == 87) {
			drivingRestriction = restriction87;
		}
		return drivingRestriction;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="50" tokens="381">
<file line="67" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\FailureToAppearDCAConverter.java"/>
<file line="65" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\FailureToPayDCFConverter.java"/>
<codefragment>
<![CDATA[
		Object[] values = new Object[30];
		values[0] = TCODE; 														 //MFTTCODE	3	TRANSACTION CODE           
		values[1] = getTtc(userContext); 										 //MFTTTC  	3	TYPE TRANS CODE
		values[2] = getOfficeId(userContext); 									 //MFTOFFID	3	OFFICE ID
		values[3] = getEmployeeID(userContext); 								 //MFTKEYID	2	KEYERS ID
		values[4] = UPDATE_CODE;			 									 //MFTUPDCD	3	UPDATE CODE
		values[5] = filler(driverLicense.getLicenseNumber(), 8); 				 //MFTDLID#	8	DRIVER LICENSE
		values[6] = SOUNDEX_CODE;			 									 //MFTSNDEX	1	SOUNDEX CODE
		values[7] = filler(dlApplicant.getCurrentName().getLastName()
													.substring(0, 3), 3); 		 //MFT3LNME	3	DRIVERS NAME
		if(EaseUtil.isNullOrBlank(mailingAddress))
		{
			values[8] = filler(BLANK, 35); 						 				 //MFTMADDR*35	MAILING ADDRESS
			values[9] = filler(BLANK, 13);										 //MFTMCITY*13	MAILING CITY
		}
		else
		{
			values[8] = filler(mailingAddress.getLine1(), 35); 					 //MFTMADDR*35	MAILING ADDRESS
			values[9] = filler(mailingAddress.getCity(), 13);					 //MFTMCITY*13	MAILING CITY
		}
		values[10] = filler(convertDateToString(dlApplicant.getBirthDate()), 6); //MFTBRTHD	6	BIRTH DATE
		values[11] = filler(citationDetail.getDocketNumber(), 7); 				 //MFTDCKT#	7	DOCKET NUMBER
		values[12] = filler(convertDateToString(citationDetail
				.getViolationDate()), 6); 										 //MFTVLTND	6	VIOLATION DATE
		int i = 13;
		for (SectionViolated sectionViolated : sectionsViolatedList) {
			values[i++] = this.sectionViolatedValue(sectionViolated);			 //MFTSECV1	7	SECTION VIOLATED 01
			values[i++] = filler(BLANK, 1); 									 //MFTSECE1	1	SECTION ERROR FLAG 01
		}
		if (sectionsViolatedSize < 7) {
			int fillerSize = 7 - sectionsViolatedSize;
			for (int j = 0; j < fillerSize; j++) {
				values[i++] = filler(BLANK, 7); 								 //MFTSECV1	7	SECTION VIOLATED 01
				values[i++] = filler(BLANK, 1); 								 //MFTSECE1	1	SECTION ERROR FLAG 01
			}
		}
		values[i++] = filler(convertDateToString(citationDetail
				.getConvictionDate()), 6); 										 //MFTCVTND	6	CONVICTION DATE
		values[i++] = getCodeSetElementValue(citationDetail.getCourtCode(), 5);  //MFTCRTCD	5	COURT CODE
		if(EaseUtil.isNullOrBlank(dlApplicant.getAkaName()))
		{
			values[i++] = filler(BLANK, 35); 									 //MFTAKA	35	AKA NAME

		}
		else
		{
			values[i++] = filler(dlApplicant.getAkaName().getFullName(
					PersonName.NAME_FORMAT_LAST_FIRST_MIDDLE_SUFFIX), 35); 		 //MFTAKA	35	AKA NAME

		}
]]>
</codefragment>
</duplication>
<duplication lines="252" tokens="379">
<file line="107" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\MedicalReportUpdatePage.java"/>
<file line="49" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\MiscellaneousRecordUpdatePage.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Gets the dlOrIdNumber.
	 * 
	 * @return the dlOrIdNumber
	 */
	public String getDlOrIdNumber() {

		try {
			// return
			// getMedicalReportUpdateApplication().getApplicant().getDriverLicense
			// ().getLicenseNumber();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dlOrIdNumber;

	}

	/**
	 * Sets the dlOrIdNumber.
	 * 
	 * @param dlOrIdNumber
	 *            the new dlOrIdNumber
	 */
	public void setDlOrIdNumber(String dlOrIdNumber) {

		try {
			//getMedicalReportUpdateApplication().getApplicant().getDriverLicense
			// ().setLicenseNumber(dlOrIdNumber);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.dlOrIdNumber = dlOrIdNumber;
	}

	/**
	 * Gets the lastname.
	 * 
	 * @return the lastname
	 */
	public String getLastname() {

		try {
			// return
			// getMedicalReportUpdateApplication().getApplicant().getCurrentName
			// ().getLastname();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.lastname;

	}

	/**
	 * Sets the lastname.
	 * 
	 * @param lastname
	 *            the new lastname
	 */
	public void setLastname(String lastname) {

		try {
			//getMedicalReportUpdateApplication().getApplicant().getCurrentName(
			// ).setLastname(lastname);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.lastname = lastname;
	}

	/**
	 * Gets the dl22mPendingApplication.
	 * 
	 * @return the dl22mPendingApplication
	 */
	public CodeSetElement getDl22mPendingApplication() {

		try {
			// return getDlaProcessContext()
			// .getDl22mPendingApplication().getCode();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dl22mPendingApplication;

	}

	/**
	 * Sets the dl22mPendingApplication.
	 * 
	 * @param dl22mPendingApplication
	 *            the new dl22mPendingApplication
	 */
	public void setDl22mPendingApplication(
			CodeSetElement dl22mPendingApplication) {

		try {
			// setProcessContex(()dl22mPendingApplication);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.dl22mPendingApplication = dl22mPendingApplication;
	}

	/**
	 * Gets the socialSecurityNumberCorrected.
	 * 
	 * @return the socialSecurityNumberCorrected
	 */
	public Integer getSocialSecurityNumberCorrected() {

		try {
			// return getSsnCorrectionApplication().getApplicant().
			// getSocialSecurityDocument().getSsn();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.socialSecurityNumberCorrected;

	}

	/**
	 * Sets the socialSecurityNumberCorrected.
	 * 
	 * @param socialSecurityNumberCorrected
	 *            the new socialSecurityNumberCorrected
	 */
	public void setSocialSecurityNumberCorrected(
			Integer socialSecurityNumberCorrected) {

		try {
			// getSsnCorrectionApplication().getApplicant().
			// getSocialSecurityDocument
			// ().setSsn(socialSecurityNumberCorrected);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.socialSecurityNumberCorrected = socialSecurityNumberCorrected;
	}

	/**
	 * Gets the UserVerifiedCode.
	 * 
	 * @return the UserVerifiedCode
	 */
	public CodeSetElement getUserVerifiedCode() {

		try {
			// return getSsnCorrectionApplication().getUserVerifiedSsnCode();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.UserVerifiedCode;

	}

	/**
	 * Sets the UserVerifiedCode.
	 * 
	 * @param UserVerifiedCode
	 *            the new UserVerifiedCode
	 */
	public void setUserVerifiedCode(CodeSetElement UserVerifiedCode) {

		try {
			// getSsnCorrectionApplication().setUserVerifiedSsnCode((
			// SSNVerificationCode)UserVerifiedCode);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.UserVerifiedCode = UserVerifiedCode;
	}

	/**
	 * Gets the medicalExamExpirationDate.
	 * 
	 * @return the medicalExamExpirationDate
	 */
	public Date getMedicalExamExpirationDate() {

		try {
			// return
			// getMedicalReportUpdateApplication().getMedicalExamExpirationDate
			// ();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.medicalExamExpirationDate;

	}

	/**
	 * Sets the medicalExamExpirationDate.
	 * 
	 * @param medicalExamExpirationDate
	 *            the new medicalExamExpirationDate
	 */
	public void setMedicalExamExpirationDate(Date medicalExamExpirationDate) {

		try {
			// getMedicalReportUpdateApplication().setMedicalExamExpirationDate(
			// medicalExamExpirationDate);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.medicalExamExpirationDate = medicalExamExpirationDate;
	}

	/**
	 * Gets the attachmentCode.
	 * 
	 * @return the attachmentCode
	 */
	public CodeSetElement getAttachmentCode() {

		// Avi Goli
		// MedicalReportUpdateApplication medicalReportUpdateApplication = new
		// MedicalReportUpdateApplication();
		try {
			// return medicalReportUpdateApplication.getAttachmentCode();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.attachmentCode;

	}

	/**
	 * Sets the attachmentCode.
	 * 
	 * @param attachmentCode
	 *            the new attachmentCode
	 */
	public void setAttachmentCode(CodeSetElement attachmentCode) {

		try {
			// getMedicalReportUpdateApplication().setAttachmentCode((
			// AttachmentCode)attachmentCode);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.attachmentCode = attachmentCode;
	}
]]>
</codefragment>
</duplication>
<duplication lines="45" tokens="371">
<file line="83" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\CommercialTestResultsDocumentRequestTusTest.java"/>
<file line="84" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\NonCommercialTestResultsDocumentRequestTusTest.java"/>
<codefragment>
<![CDATA[
	public void testNonCommercialTestResultsDocumentRequestTus() {
		Assert.assertNotNull(requestFixture);
		Assert.assertNotNull(requestFixture.getUserContext());
		Assert.assertNotNull(requestFixture.getDlApplication());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getDriverLicense());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getDriverLicense()
				.getPhotoInformation());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getExistingLicenseClasses());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getExistingCategories());
		Assert
				.assertNotNull(requestFixture.getDlApplication().getLicense()
						.getAppliedLicenseClasses());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getNewCategories());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getExistingRestrictions());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getExistingAttachments());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getExistingEndorsements());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getCertificates());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getNewRestrictions());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getNewAttachments());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getAddress(
				AddressType.RESIDENTIAL));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getAddress(
				AddressType.MAILING));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getExistingAddress(
				AddressType.RESIDENTIAL));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getExistingAddress(
				AddressType.MAILING));
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
]]>
</codefragment>
</duplication>
<duplication lines="79" tokens="356">
<file line="140" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\AutomatedNameIndexDlInquiryConverter.java"/>
<file line="121" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\SearchPersonByNameConverter.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Parse the result.
	 * 
	 * @param names the names
	 * 
	 * @return personName the PersonName
	 */
	private PersonName createPersonName(String names) {
		StringTokenizer token = new StringTokenizer(names);
		PersonName personName = new PersonName();
		int count = 0;
		while (token.hasMoreElements()) {
			String str = ((String) token.nextElement()).trim();
			if (count == 0) {
				personName.setLastName(str);
			}
			else if (count == 1) {
				personName.setFirstName(str);
			}
			else if (count == 2) {
				if ((IEcsConverterConstants.SUFFIX_JR.equalsIgnoreCase(str))
						|| (IEcsConverterConstants.SUFFIX_SR
								.equalsIgnoreCase(str)
								|| (IEcsConverterConstants.SUFFIX_II
										.equalsIgnoreCase(str))
								|| (IEcsConverterConstants.SUFFIX_III
										.equalsIgnoreCase(str)) || (IEcsConverterConstants.SUFFIX_IV
								.equalsIgnoreCase(str)))) {
					personName.setSuffix(str);
				}
				else {
					personName.setMiddleName(str);
				}
			}
			else if (count == 3) {
				personName.setSuffix(str);
			}
			count++;
		}
		return personName;
	}

	/**
	 * Gets the city based on the state of the person.
	 * 
	 * @param person the person
	 * 
	 * @return the city of the person
	 */
	private String getCity(Person person) {
		Address address = null;
		//The list of locators has only 1 address.
		if (isNotNull(person.getLocators())) {
			if (person.getLocators().size() > 0) {
				if (isNotNull(person.getLocators().get(0))) {
					address = (Address) person.getLocators().get(0);
					if (isNotNull(address)) {
						CodeSetElement state = address.getStateCode();
						String city = address.getCity();
						if (isNotNull(city) && isNotNull(state)) {
							if (state.getCode().equalsIgnoreCase(
									IEcsConverterConstants.STATE_CA)
									|| state.getCode().equalsIgnoreCase(
											IEcsConverterConstants.SPACE)) {
								return filler(city, 13);
							}
							else {
								return filler(IEcsConverterConstants.STAR
										+ city, 12)
										+ IEcsConverterConstants.SPACE;
							}
						}
					}
				}
			}
		}
		return null;
]]>
</codefragment>
</duplication>
<duplication lines="73" tokens="351">
<file line="106" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaCommercilaLicenseTestsValidator.java"/>
<file line="215" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaLicenseTestsValidator.java"/>
<codefragment>
<![CDATA[
	}
	
	private void validateRuleD797(CdaProcessContext cdaProcessContext,
			IErrorCollector errorCollector) {
		List<CodeSetElement> licenseClasses = cdaProcessContext
							.getDriverLicense()
							.getExistingLicenseClasses();
		List<CommercialTestResult> trailerCoachTestResults = cdaProcessContext
							.getCommercialTestResultGroup()
							.getCommercialTestResults(CommercialTestResultType.TRAILERCOACH_TEST_RESULT);

		String trailerCoachTestResultCode = trailerCoachTestResults
							.get(trailerCoachTestResults.size() - 1)
							.getTestResultCode()
							.getCode();

		if (licenseClasses.contains("C") || licenseClasses.contains("D")) {
			if (!"P".equalsIgnoreCase(trailerCoachTestResultCode)
					&& !"W".equalsIgnoreCase(trailerCoachTestResultCode)) {
				errorCollector.register(new ApplicationException("D797"));
			}
		}
	}

	private void validateRuleD798(CdaProcessContext cdaProcessContext,
			IErrorCollector errorCollector) {

		List<CodeSetElement> licenseClasses = cdaProcessContext
							.getDriverLicense()
							.getExistingLicenseClasses();

		List<CommercialTestResult> fireFighterTestResults = cdaProcessContext
							.getCommercialTestResultGroup()
							.getCommercialTestResults(CommercialTestResultType.FIREFIGHTER_TEST_RESULT);

		String fireFighterTestResultCode = fireFighterTestResults
							.get(fireFighterTestResults.size() - 1)
							.getTestResultCode()
							.getCode();

		if (licenseClasses.contains("C") || licenseClasses.contains("E")) {
			if (!"P".equalsIgnoreCase(fireFighterTestResultCode)
					&& !"W".equalsIgnoreCase(fireFighterTestResultCode)) {
				errorCollector.register(new ApplicationException("D798"));
			}
		}

	}

	private void validateRuleD799(CdaProcessContext cdaProcessContext,
			IErrorCollector errorCollector) {
		List<CodeSetElement> licenseClasses = cdaProcessContext
							.getDriverLicense()
							.getExistingLicenseClasses();

		List<CommercialTestResult> fireFighterClassAtestResults = cdaProcessContext
							.getCommercialTestResultGroup()
							.getCommercialTestResults( CommercialTestResultType.FIREFIGHTER_CLASSA_TEST_RESULT);

		String fireFighterClassAtestResultCode = fireFighterClassAtestResults
							.get(fireFighterClassAtestResults.size() - 1)
							.getTestResultCode().getCode();

		if (licenseClasses.contains("C") || licenseClasses.contains("E")) {
			if (!"P".equalsIgnoreCase(fireFighterClassAtestResultCode)&&
				!"W".equalsIgnoreCase(fireFighterClassAtestResultCode)) {
				 errorCollector.register(new ApplicationException("D799"));
			}
		}

	}
	
	private void validateRuleD800(CdaProcessContext cdaProcessContext,
]]>
</codefragment>
</duplication>
<duplication lines="60" tokens="349">
<file line="77" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<file line="138" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ IPrintConverterConstants.DL_REC_ZBPDLID, "I1234567" },//
				{ IPrintConverterConstants.DL_REC_ZBPHDR2,
						"RECEIPT - NOT A LICENSE OR PERMIT" },
				{ IPrintConverterConstants.DL_REC_ZBPDISCL,
						"NOT A VERIFIED IDENTIFICATION" },
				{ IPrintConverterConstants.DL_REC_ZBPAPPLH, "APPLICATION FOR" },
				{ IPrintConverterConstants.DL_REC_ZBPPNME1, "Brad Miller, Mr" },
				{ IPrintConverterConstants.DL_REC_ZBPPMAD1,
						"123 Current Mailing St" },
				{ IPrintConverterConstants.DL_REC_ZBPCMCTO, "Sacramento" },
				{ IPrintConverterConstants.DL_REC_ZBPCMSTO, "CA" },
				{ IPrintConverterConstants.DL_REC_ZBPCMZPO, "95815" },
				{ IPrintConverterConstants.DL_REC_ZBPACLS1, "C " },
				{ IPrintConverterConstants.DL_REC_ZBPAND, "&" },
				{ IPrintConverterConstants.DL_REC_ZBPACLS2, "A " },
				{ IPrintConverterConstants.DL_REC_ZBPCLASS, "CLASS:" },
				{ IPrintConverterConstants.DL_REC_ZBPCOML, "*" },
				{ IPrintConverterConstants.DL_REC_ZBPENDOR, "-- " },
				{ IPrintConverterConstants.DL_REC_ZBPTRNV, "199.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCAS, "10000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCHKS, "0.00" },
				{ IPrintConverterConstants.DL_REC_ZBPNETAC, "CASH BACK       :" },
				{ IPrintConverterConstants.DL_REC_ZBPNETAM, "29801.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCRDT, "0.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCARD, "20000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPCCSAL, "SALE " },
				{ IPrintConverterConstants.DL_REC_ZBPCC, "XXXXXXXXXXXX4444" },
				{ IPrintConverterConstants.DL_REC_ZBPTEXT4,
						"DMV TRANS. AMT.         CONVENIENCE FEE            TOTAL AMOUNT PAID" },
				{ IPrintConverterConstants.DL_REC_ZBPTCCCF, "0.00" },
				{
						IPrintConverterConstants.DL_REC_ZBPTEXT5,
						"YOUR CREDIT CARD STATEMENT WILL INCLUDE A $0.00 NON-REFUNDABLE CONVENIENCE FEE" },
				{ IPrintConverterConstants.DL_REC_ZBPTCCAP, "20000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPCCARD, "20000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPCCEXP, "0570" },
				{ IPrintConverterConstants.DL_REC_ZBPCCAUT, "7" },
				{ IPrintConverterConstants.DL_REC_ZBP_SIGN, "$" },
				{ IPrintConverterConstants.DL_REC_ZBPSSTXT, "NEED SSN" },
				{ IPrintConverterConstants.DL_REC_ZBPOFFNM, "OFFICE -" },
				{ IPrintConverterConstants.DL_REC_ZBPOFFID, "130" },
				{ IPrintConverterConstants.DL_REC_ZBPWKSDT, "042110" },
				{ IPrintConverterConstants.DL_REC_ZBPEMPID, "JA" },
				{ IPrintConverterConstants.DL_REC_ZBPCASQ, "9" },
				{ IPrintConverterConstants.DL_REC_ZBPDAFR, "131" },
				{ IPrintConverterConstants.DL_REC_ZBPTEXT1,
						"IF THIS APPLICATION IS NOT COMPLETED" },
				{ IPrintConverterConstants.DL_REC_ZBPTEXT2,
						"BY 04-21-10, IT WILL BE CANCELLED." },
				{ IPrintConverterConstants.DL_REC_ZBPTYPAT, "C" },
				{ IPrintConverterConstants.DL_REC_ZBPOAPDT, "090510" } };
		return dataArray;
	}

	/**
	 * Populate data sales.
	 *
	 * @return the string[][]
	 */
	private String[][] populateDataSalesCredit() {
]]>
</codefragment>
</duplication>
<duplication lines="52" tokens="335">
<file line="251" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<file line="307" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ getIdExpDateOrTextElement(), "" },
				{ getCurrentNameElement(), "Brad Miller, Mr" },
				{ getAkaNameElement(), "Brad Miller, Mr" },
				{ getApplicantMailingAddressElement(),
						"123 Existing Mailing St" },
				{ getApplicantMailingCityElement(), "Sacramento" },
				{ getApplicantMailingStateElement(), "CA" },
				{ getApplicantMailingZipElement(), "95815" },
				{ getApplicantResidenceAddressElement(),
						"456 Current Residence St" },
				{ getApplicantResidenceCityElement(), "Sunnyvale" },
				{ getApplicantResidenceStateElement(), "CA" },
				{ getGenderElement(), "M" },
				{ getHairColorElement(), "BLK" },
				{ getEyeColorElement(), "BLK" },
				{ getHeightInFeetsElement(), "5" },
				{ getHeightInInchesElement(), "10" },
				{ getWeightElement(), "150" },
				{ getBirthDateElement(), "06-05-77" },
				{ getClassOfRecord1Element(), "A" },
				{ getClassOfRecord2Element(), "M" },
				{ getClassOfRecordCommlElement(), "*" },
				{ getNonCommlLicenseCategory1Element(), "C1" },
				{ getNonCommlLicenseCategory2Element(), "C2" },
				{ getRecordStatusesElement().get("RECORD_STATUS1_ELEMENT"),
						"Action Message 0" },
				{ getRecordStatusesElement().get("RECORD_STATUS2_ELEMENT"),
						"Action Message 1" },
				{ getRecordStatusesElement().get("RECORD_STATUS3_ELEMENT"),
						"Action Message 2" },
				{ getRecordStatusesElement().get("RECORD_STATUS4_ELEMENT"),
						"Action Message 3" },
				{ getRecordStatusesElement().get("RECORD_STATUS5_ELEMENT"),
						"Action Message 4" },
				{ getRecordStatusesElement().get("RECORD_STATUS6_ELEMENT"),
						"Action Message 5" },
				{ getRecordStatusesElement().get("RECORD_STATUS7_ELEMENT"),
						"Action Message 6" },
				{ getRecordStatusesElement().get("RECORD_STATUS8_ELEMENT"),
						"Action Message 7" },
				{ getRecordStatusesElement().get("RECORD_STATUS9_ELEMENT"),
						"Action Message 8" },
				{ getRecordStatusesElement().get("RECORD_STATUS10_ELEMENT"),
						"Action Message 9" },
				{ getRecordStatusesElement().get("RECORD_STATUS11_ELEMENT"),
						"Action Message 10" },
				{ getRecordStatusesElement().get("RECORD_STATUS12_ELEMENT"),
						"Action Message 11" } };
		return dataArray;
	}

	private String[][] populateDataMiscTtcId() {
]]>
</codefragment>
</duplication>
<duplication lines="91" tokens="335">
<file line="37" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\fee\request\impl\DldFeeRequest.java"/>
<file line="37" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\fee\request\impl\DleFeeRequest.java"/>
<codefragment>
<![CDATA[
	public DleFeeRequest(Date originalApplicationDate, Date dateFeesReceived,
			String ttc, LICENSECLASS aLicenseClass1, CATEGORY aCategory) {
		super(originalApplicationDate, dateFeesReceived, ttc);
		licenseClass1 = aLicenseClass1;
		category = aCategory;
	}

	/**
	 * @return the category
	 */
	public CATEGORY getCategory() {
		return category;
	}

	/**
	 * @return the licenseClass1
	 */
	public LICENSECLASS getLicenseClass1() {
		return licenseClass1;
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fee.request.impl.FeeRequest#getMyClassifierString()
	 */
	@Override
	public String getMyClassifierString() {
		StringBuilder strBuilder = new StringBuilder();
		String ruleLicense1Type = CLASSIFIERTYPES.CLASS.type();
		String ruleLicense1 = licenseClass1.type();
		String ruleCategoryType = CLASSIFIERTYPES.CATEGORY.type();
		String ruleCategory = category.type();
		strBuilder.append(ruleLicense1Type).append(EQUALS).append(ruleLicense1)
				.append(COLONDELIMITER);
		strBuilder.append(ruleCategoryType).append(EQUALS).append(ruleCategory);
		String keyClassifier = strBuilder.toString();
		return keyClassifier;
	}

	/**
	 * @param category the category to set
	 */
	public void setCategory(CATEGORY category) {
		this.category = category;
	}

	/**
	 * @param licenseClass1 the licenseClass1 to set
	 */
	public void setLicenseClass1(LICENSECLASS licenseClass1) {
		this.licenseClass1 = licenseClass1;
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fee.request.impl.FeeRequest#isInvalidReason()
	 */
	@Override
	protected String isInvalidReason() {
		StringBuilder strBuilder = new StringBuilder();
		if (originalApplicationDate == null) {
			strBuilder.append("originalApplicationDate is null")
					.append(NEWLINE);
		}
		if (dateFeesReceived == null) {
			strBuilder.append("dateFeesReceived is null").append(NEWLINE);
		}
		if (ttc == null) {
			strBuilder.append("ttc is null").append(NEWLINE);
		}
		if (licenseClass1 == null) {
			strBuilder.append("licenseClass1 is null").append(NEWLINE);
		}
		if (category == null) {
			strBuilder.append("category is null").append(NEWLINE);
		}
		return strBuilder.toString();
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fee.request.impl.FeeRequest#isValid()
	 */
	@Override
	protected boolean isValid() {
		if (originalApplicationDate == null || dateFeesReceived == null
				|| ttc == null || licenseClass1 == null || category == null) {
			return false;
		}
		else {
			return true;
		}
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="74" tokens="330">
<file line="104" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CommercialTestResultsDocumentConverterTest.java"/>
<file line="87" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\NonCommercialTestResultsDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		userContextFixture.setTechId("SK");
		userContextFixture.setTtc("DLA");
		userContextFixture.setUserName("MWBRN");
		userContextFixture.setWorkDate(new Date());
		userContextFixture.setOfficeId("130");
		userContextFixture.setRacfId("23");
		userContextFixture.setIpAddress("127.0.0.1");
		CodeSetElement modeI = new CodeSetElement();
		modeI.setCode(IEaseModes.MANUAL);
		userContextFixture.setOperationalMode(modeI);
	}

	/**
	 * Load Photo Information.
	 */
	private void initPhotoInformationFixture() {
		photoInformationFixture = new PhotoInformation();
		photoInformationFixture.setPhotoOfficeId("305");
		Calendar calendarPhotoDate = new GregorianCalendar(2010,
				Calendar.JANUARY, 05);
		photoInformationFixture.setPhotoTakenDate(calendarPhotoDate.getTime());
		photoInformationFixture.setBatesMicrographicsNumber("995");
		photoInformationFixture.setPhotoName("John Jones");
	}

	/**
	 * Load person.
	 * 
	 * @param commonPersonFixture the common person fixture
	 */
	private void initPersonFixture(Person commonPersonFixture) {
		personFixture = PersonFixtureFactory.createPersonForTestResults();
	}

	/**
	 * Load dlApplication.
	 */
	private void initDlApplicationFixture() {
		personFixture.setMedicalExpirationDate(new Date());
		dlApplicationFixture.setApplicant(personFixture);
		CodeSetElement applicationTypeCode = new CodeSetElement();
		applicationTypeCode.setCode("DL ORIGINAL");
		dlApplicationFixture.setApplicationTypeCode(applicationTypeCode);
		CodeSetElement bdlpCode = new CodeSetElement();
		bdlpCode.setCode("N");
		dlApplicationFixture.setNewUserVerifiedBdlpCode(bdlpCode);
		CodeSetElement ssnCode = new CodeSetElement();
		ssnCode.setCode("N");
		dlApplicationFixture.setNewUserVerifiedSsnCode(ssnCode);
		CodeSetElement incompleteAppCode = new CodeSetElement();
		incompleteAppCode.setCode("PH");
		dlApplicationFixture
				.setNewIncompleteApplicationReasonCode(incompleteAppCode);
		CodeSetElement driverEducationCode = new CodeSetElement();
		driverEducationCode.setCode("D");
		dlApplicationFixture.setDriverEducationCode(driverEducationCode);
		CodeSetElement driverTrainingCode = new CodeSetElement();
		driverTrainingCode.setCode("T");
		dlApplicationFixture.setDriverTrainingCode(driverTrainingCode);
		CodeSetElement motorcycleTrainingCode = new CodeSetElement();
		motorcycleTrainingCode.setCode("M");
		dlApplicationFixture.setMotorCycleTrainingCode(motorcycleTrainingCode);
		dlApplicationFixture.setApplicationDate(new Date());
		CodeSetElement rpCode = new CodeSetElement();
		rpCode.setCode("R");
		dlApplicationFixture
				.setOutOfStateDriverEducationAndTrainingWaiveCode(rpCode);
	}

	/**
	 * Inits the drive and law test results fixture.
	 */
	private void initDriveAndLawTestResultsFixture() {
		driveAndLawTestResultsFixture = new DriveAndLawTestResultGroup();
]]>
</codefragment>
</duplication>
<duplication lines="51" tokens="322">
<file line="83" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\core\dl\validator\impl\test\DlOrganDonorReceiptRequestValidatorTest.java"/>
<file line="73" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\core\dl\validator\impl\test\DlVoterRegistrationReceiptValidatorTest.java"/>
<codefragment>
<![CDATA[
		assertTrue(errorCollector.getEntries().size() > 1);
		assertEquals(SpringUtils
				.getMessage(INVALID_DL_APPLICATION_ERROR_MESSAGE),
				errorCollector.getEntries().get(0).getExceptionMessage());
	}

	@Test
	public void testDlApplicationLicenseNumberNull() {
		DlApplication dlApplication = new DlApplication();
		dlApplication.getLicense().setLicenseNumber(null);
		Person person = new Person();
		person.setBirthDate(new Date());
		dlApplication.setApplicant(person);
		IErrorCollector errorCollector = fixture.validate(dlApplication);
		assertTrue(errorCollector.hasErrors());
		assertTrue(errorCollector.getEntries().size() == 1);
		assertEquals(SpringUtils
				.getMessage(INVALID_DL_APPLICATION_ERROR_MESSAGE),
				errorCollector.getEntries().get(0).getExceptionMessage());
	}

	@Test
	public void testDlApplicationPersonNull() {
		DlApplication dlApplication = new DlApplication();
		dlApplication.getLicense().setLicenseNumber("D121121");
		Person person = null;
		dlApplication.setApplicant(person);
		IErrorCollector errorCollector = fixture.validate(dlApplication);
		assertTrue(errorCollector.hasErrors());
		assertTrue(errorCollector.getEntries().size() == 1);
		assertEquals(SpringUtils
				.getMessage(INVALID_DL_APPLICATION_ERROR_MESSAGE),
				errorCollector.getEntries().get(0).getExceptionMessage());
	}

	@Test
	public void testDlApplicationPersonBirthDateNull() {
		DlApplication dlApplication = new DlApplication();
		dlApplication.getLicense().setLicenseNumber("D121121");
		Person person = new Person();
		person.setBirthDate(null);
		dlApplication.setApplicant(person);
		IErrorCollector errorCollector = fixture.validate(dlApplication);
		assertTrue(errorCollector.hasErrors());
		assertTrue(errorCollector.getEntries().size() == 1);
		assertEquals(SpringUtils
				.getMessage(INVALID_DL_APPLICATION_ERROR_MESSAGE),
				errorCollector.getEntries().get(0).getExceptionMessage());
	}

}
]]>
</codefragment>
</duplication>
<duplication lines="50" tokens="319">
<file line="236" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlInfoRequestReceiptDocumentConverterTest.java"/>
<file line="274" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpFtaPaymentReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		Invoice invoiceFixture = new Invoice();
		List <Payment> payments = new ArrayList <Payment>();
		Payment cashPayment = new CashPayment();
		Voucher voucherPayment = new Voucher();
		voucherPayment.setAmount(new BigDecimal(111));
		voucherPayment.setStatusCode(new CodeSetElement("I", "I", "I"));
		cashPayment.setAmount(new BigDecimal(12.46));
		Payment debtPayment = new DebitPayment();
		debtPayment.setAmount(new BigDecimal(26.88));
		//Set CreditPayment
		CreditPayment creditPayment = new CreditPayment();
		creditPayment.setAmount(new BigDecimal(14.56));
		creditPayment.setAuthorizationNumber(new Integer(456789));
		creditPayment.setCreditCardNumber("1111222233334567");
		creditPayment.setExpiryDate(CommonFixtureFactory.convertStringToDate(
				"20160530", CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		CheckPayment checkPayment = new CheckPayment();
		checkPayment.setAmount(new BigDecimal(33.57));
		payments.add(creditPayment);
		payments.add(cashPayment);
		payments.add(voucherPayment);
		payments.add(debtPayment);
		payments.add(checkPayment);
		invoiceFixture.setPayments(payments);
		List <InvoiceItem> invoiceItems = new ArrayList <InvoiceItem>();
		InvoiceItem invoiceItem = new InvoiceItem();
		invoiceItem.setWaivedAmount(new BigDecimal(1));
		invoiceItem.setFeeWaivedReason("fee waived");
		invoiceItem.setModifiedDate(new Date());
		Fee fee = new Fee();
		fee.setAmount(new BigDecimal(3.45));
		invoiceItem.setFee(fee);
		invoiceItems.add(invoiceItem);
		invoiceFixture.setInvoiceItems(invoiceItems);
		invoiceFixture.setTotalFeeWaived(new BigDecimal(0));
		invoiceFixture.setAmount(new BigDecimal(55.55));
		invoiceFixture.setFeeRefundActionCode(new CodeSetElement(
				IPrintConverterConstants.FEE_RETURN_ACTION_CODE_C,
				IPrintConverterConstants.FEE_RETURN_ACTION_CODE_C,
				IPrintConverterConstants.FEE_RETURN_ACTION_CODE_C));
		applicationFixture.setFeeRequired(true);
		applicationFixture.setInvoice(invoiceFixture);
	}

	/**
	 * Sets the up.
	 *
	 * @throws Exception the exception
	 */
	@Before
]]>
</codefragment>
</duplication>
<duplication lines="64" tokens="314">
<file line="1183" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="34" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisD543Rule.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * D543. Required fields cross-validation if Lic Loc is prsent, Prev Lic and
	 * Lic# are required if Prev Lic=OT, Lic loc is present, CNTRY=R, Lic# is
	 * present if Prev Lic=OT, Lic loc is present, CNTRY=R, Lic# is present
	 * display D543 message
	 * 
	 * @param applicant
	 *            applicant data
	 * @param errorCollector
	 *            the error collector
	 */
	public void D543(Person applicant,
			IErrorCollector errorCollector) {
		String prevLicenseLocation = null;
		String prevLicenseNumber = null;
		String prevLicenseState = null;
		String prevLicenseCountry = null;
		if (!EaseUtil.isNullOrBlank(applicant.getPreviousLicenses())) {
			if (applicant.getPreviousLicenses().get(0).getLicenseLocation() != null) {
				prevLicenseLocation = applicant.getPreviousLicenses().get(0)
						.getLicenseLocation().getCode();
			}
			if (applicant.getPreviousLicenses().get(0).getLicenseNumber() != null) {
				prevLicenseNumber = applicant.getPreviousLicenses().get(0)
						.getLicenseNumber();
			}
			if (applicant.getPreviousLicenses().get(0).getIssuedByState() != null) {
				prevLicenseState = applicant.getPreviousLicenses().get(0)
						.getIssuedByState().getCode();
			}
			if (applicant.getPreviousLicenses().get(0).getIssuedByCountry() != null) {
				prevLicenseCountry = applicant.getPreviousLicenses().get(0)
						.getIssuedByCountry();
			}

			// D543 when lic # is present
			// state and loc are required
			if (!EaseUtil.isNullOrBlank(prevLicenseNumber)
					&& (EaseUtil.isNullOrBlank(prevLicenseState) || EaseUtil.isNullOrBlank(prevLicenseLocation))) {
				errorCollector
						.register(new EaseValidationException(
								IDataCollectionErrorMessageConstants.PREV_LIC_VS_LIC_LOC_CNTRY_OR_LIC_NUMBER));
			}
			// D543 when loc is present
			// lic # and loc are required
			if (!EaseUtil.isNullOrBlank(prevLicenseLocation)
					&& (EaseUtil.isNullOrBlank(prevLicenseState) || EaseUtil.isNullOrBlank(prevLicenseNumber))) {
				errorCollector
						.register(new EaseValidationException(
								IDataCollectionErrorMessageConstants.PREV_LIC_VS_LIC_LOC_CNTRY_OR_LIC_NUMBER));
			}
			// D543 when country is present
			// lic # is required
			if (!EaseUtil.isNullOrBlank(prevLicenseCountry)
					&& (EaseUtil.isNullOrBlank(prevLicenseState))) {
				errorCollector
						.register(new EaseValidationException(
								IDataCollectionErrorMessageConstants.PREV_LIC_VS_LIC_LOC_CNTRY_OR_LIC_NUMBER));
			}
		}

	}
]]>
</codefragment>
</duplication>
<duplication lines="76" tokens="309">
<file line="229" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<file line="674" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateDataNoDupLicense() {
		Date currentDate = new Date();
		String systemDate = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_MM_dd_yy);
		String systemTime = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_HH_mm);
		String[][] dataArray = new String[][] {
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_HEADER,
						"ISSUANCE REFERRAL" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_TYPE_OF_APPLICATION_TEXT,
						"DL ORIGINAL" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_HEADER,
						"DL #:" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_NUMBER,
						"I0090909" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_EXP_DATE,
						"051212" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_ID_EXP_DATE,
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_APPLICATION_INCOMPLETE_MESSAGE,
						"APPLICATION INCOMPLETE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_ID,
						"305" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_DATE,
						"01/05/10" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_MICROGRAPHICS_NUMBER,
						"995" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_EMPLOYEE_ID, "BH" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_1,
						"*****************************************************************" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_2,
						"* P O S S I B L E   D O U B L E S   -   R O U T E   T O   R C A *" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_3,
						"*****************************************************************" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_DL_MSG,
						"NEW DL# ASSIGNED - PREVIOUS DL# WAS" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_OLD_DL,
						"A1634333" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_OFFICE_ID, "130" },
]]>
</codefragment>
</duplication>
<duplication lines="46" tokens="309">
<file line="127" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<file line="253" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ getAkaNameElement(), "Brad Miller, Mr" },
				{ getApplicantMailingAddressElement(),
						"123 Existing Mailing St" },
				{ getApplicantMailingCityElement(), "Sacramento" },
				{ getApplicantMailingStateElement(), "CA" },
				{ getApplicantMailingZipElement(), "95815" },
				{ getApplicantResidenceAddressElement(),
						"456 Current Residence St" },
				{ getApplicantResidenceCityElement(), "Sunnyvale" },
				{ getApplicantResidenceStateElement(), "CA" },
				{ getGenderElement(), "M" },
				{ getHairColorElement(), "BLK" },
				{ getEyeColorElement(), "BLK" },
				{ getHeightInFeetsElement(), "5" },
				{ getHeightInInchesElement(), "10" },
				{ getWeightElement(), "150" },
				{ getBirthDateElement(), "06-05-77" },
				{ getClassOfRecord1Element(), "A" },
				{ getClassOfRecord2Element(), "M" },
				{ getClassOfRecordCommlElement(), "*" },
				{ getNonCommlLicenseCategory1Element(), "C1" },
				{ getNonCommlLicenseCategory2Element(), "C2" },
				{ getRecordStatusesElement().get("RECORD_STATUS1_ELEMENT"),
						"Action Message 0" },
				{ getRecordStatusesElement().get("RECORD_STATUS2_ELEMENT"),
						"Action Message 1" },
				{ getRecordStatusesElement().get("RECORD_STATUS3_ELEMENT"),
						"Action Message 2" },
				{ getRecordStatusesElement().get("RECORD_STATUS4_ELEMENT"),
						"Action Message 3" },
				{ getRecordStatusesElement().get("RECORD_STATUS5_ELEMENT"),
						"Action Message 4" },
				{ getRecordStatusesElement().get("RECORD_STATUS6_ELEMENT"),
						"Action Message 5" },
				{ getRecordStatusesElement().get("RECORD_STATUS7_ELEMENT"),
						"Action Message 6" },
				{ getRecordStatusesElement().get("RECORD_STATUS8_ELEMENT"),
						"Action Message 7" },
				{ getRecordStatusesElement().get("RECORD_STATUS9_ELEMENT"),
						"Action Message 8" },
				{ getRecordStatusesElement().get("RECORD_STATUS10_ELEMENT"),
						"Action Message 9" },
				{ getRecordStatusesElement().get("RECORD_STATUS11_ELEMENT"),
						"Action Message 10" },
				{ getRecordStatusesElement().get("RECORD_STATUS12_ELEMENT"),
						"Action Message 11" } };
]]>
</codefragment>
</duplication>
<duplication lines="60" tokens="302">
<file line="888" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="1041" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		String[][] dataArray = populateDataMNotM();
		String expectedXml = createXml(dataArray,
				IPrintConverterConstants.INS_PERMIT_DOCUMENT_TEMPLATE_ELEMENT,
				true);
		DlApplicationFixtureFactory.createInterimPermitClasses(
				dlApplicationFixture,
				IPrintConverterConstants.DL_REC_INPUT_CLASS_M,
				IPrintConverterConstants.BLANK);
		DlApplicationFixtureFactory.setDateOfBirth(dlApplicationFixture, 1996,
				Calendar.JUNE, 25);
		DlApplicationFixtureFactory.createAppliedCategories(
				dlApplicationFixture, "1", "2");
		//Set New Driving Restrictions
		List <DrivingRestriction> newRestrictions = new ArrayList <DrivingRestriction>();
		//Add New Restriction Code - 01 
		CodeSetElement newRestrictionCode = new CodeSetElement();
		newRestrictionCode.setCode("01");
		DrivingRestriction newDrivingRestriction = new DrivingRestriction();
		newDrivingRestriction.setRestrictionTypeCode(newRestrictionCode);
		newDrivingRestriction.setEffectiveDate(CommonFixtureFactory
				.convertStringToDate("20000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newDrivingRestriction.setExpirationDate(CommonFixtureFactory
				.convertStringToDate("21000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newRestrictions.add(newDrivingRestriction);
		//Add New Restriction Code - 59
		CodeSetElement newRestrictionCode1 = new CodeSetElement();
		newRestrictionCode1.setCode("59");
		DrivingRestriction newDrivingRestriction1 = new DrivingRestriction();
		newDrivingRestriction1.setRestrictionTypeCode(newRestrictionCode1);
		newDrivingRestriction1.setEffectiveDate(CommonFixtureFactory
				.convertStringToDate("20000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newDrivingRestriction1.setExpirationDate(CommonFixtureFactory
				.convertStringToDate("21000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newRestrictions.add(newDrivingRestriction1);
		//Add New Restriction Code - 29
		CodeSetElement newRestrictionCode2 = new CodeSetElement();
		newRestrictionCode2.setCode("29");
		DrivingRestriction newDrivingRestriction2 = new DrivingRestriction();
		newDrivingRestriction2.setRestrictionTypeCode(newRestrictionCode2);
		newRestrictions.add(newDrivingRestriction2);
		//Add New Restriction Code - 73
		CodeSetElement newRestrictionCode3 = new CodeSetElement();
		newRestrictionCode3.setCode("73");
		DrivingRestriction newDrivingRestriction3 = new DrivingRestriction();
		newDrivingRestriction3.setRestrictionTypeCode(newRestrictionCode3);
		newRestrictions.add(newDrivingRestriction3);
		//Add New Restriction Code - 72
		CodeSetElement newRestrictionCode4 = new CodeSetElement();
		newRestrictionCode4.setCode("72");
		DrivingRestriction newDrivingRestriction4 = new DrivingRestriction();
		newDrivingRestriction4.setRestrictionTypeCode(newRestrictionCode4);
		newRestrictions.add(newDrivingRestriction4);
		DlApplicationFixtureFactory.createNewDrivingRestrictions(
				dlApplicationFixture, newRestrictions);
		DlApplicationFixtureFactory.createClassOfRecords(dlApplicationFixture,
				IPrintConverterConstants.DL_REC_INPUT_CLASS_A,
]]>
</codefragment>
</duplication>
<duplication lines="73" tokens="293">
<file line="229" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<file line="343" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<file line="764" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateDataXTypeLicense() {
		Date currentDate = new Date();
		String systemDate = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_MM_dd_yy);
		String systemTime = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_HH_mm);
		String[][] dataArray = new String[][] {
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_HEADER,
						"ISSUANCE REFERRAL" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_TYPE_OF_APPLICATION_TEXT,
						"DL ORIGINAL" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_HEADER,
						"DL #:" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_NUMBER,
						"I0090909" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_EXP_DATE,
						"051212" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_ID_EXP_DATE,
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_APPLICATION_INCOMPLETE_MESSAGE,
						"APPLICATION INCOMPLETE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_ID,
						"305" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_DATE,
						"01/05/10" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_MICROGRAPHICS_NUMBER,
						"995" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_EMPLOYEE_ID, "BH" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_1,
						"*****************************************************************" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_2,
						"* P O S S I B L E   D O U B L E S   -   R O U T E   T O   R C A *" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_3,
						"*****************************************************************" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_INITIAL_DL,
]]>
</codefragment>
</duplication>
<duplication lines="62" tokens="285">
<file line="102" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="426" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				dlApplicationFixture, "0", "2");
		//Set New Driving Restrictions
		List <DrivingRestriction> newRestrictions = new ArrayList <DrivingRestriction>();
		//Add New Restriction Code - 01 
		CodeSetElement newRestrictionCode = new CodeSetElement();
		newRestrictionCode.setCode("01");
		DrivingRestriction newDrivingRestriction = new DrivingRestriction();
		newDrivingRestriction.setRestrictionTypeCode(newRestrictionCode);
		newDrivingRestriction.setEffectiveDate(CommonFixtureFactory
				.convertStringToDate("20000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newDrivingRestriction.setExpirationDate(CommonFixtureFactory
				.convertStringToDate("21000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newRestrictions.add(newDrivingRestriction);
		//Add New Restriction Code - 59
		CodeSetElement newRestrictionCode1 = new CodeSetElement();
		newRestrictionCode1.setCode("59");
		DrivingRestriction newDrivingRestriction1 = new DrivingRestriction();
		newDrivingRestriction1.setRestrictionTypeCode(newRestrictionCode1);
		newDrivingRestriction1.setEffectiveDate(CommonFixtureFactory
				.convertStringToDate("20000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newDrivingRestriction1.setExpirationDate(CommonFixtureFactory
				.convertStringToDate("21000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newRestrictions.add(newDrivingRestriction1);
		//Add New Restriction Code - 29
		CodeSetElement newRestrictionCode2 = new CodeSetElement();
		newRestrictionCode2.setCode("29");
		DrivingRestriction newDrivingRestriction2 = new DrivingRestriction();
		newDrivingRestriction2.setRestrictionTypeCode(newRestrictionCode2);
		newRestrictions.add(newDrivingRestriction2);
		//Add New Restriction Code - 73
		CodeSetElement newRestrictionCode3 = new CodeSetElement();
		newRestrictionCode3.setCode("73");
		DrivingRestriction newDrivingRestriction3 = new DrivingRestriction();
		newDrivingRestriction3.setRestrictionTypeCode(newRestrictionCode3);
		newRestrictions.add(newDrivingRestriction3);
		//Add New Restriction Code - 72
		CodeSetElement newRestrictionCode4 = new CodeSetElement();
		newRestrictionCode4.setCode("72");
		DrivingRestriction newDrivingRestriction4 = new DrivingRestriction();
		newDrivingRestriction4.setRestrictionTypeCode(newRestrictionCode4);
		newRestrictions.add(newDrivingRestriction4);
		DlApplicationFixtureFactory.createNewDrivingRestrictions(
				dlApplicationFixture, newRestrictions);
		requestFixture = new InstructionPermitDocumentRequestTus(
				UserContextFixtureFactory
						.createUserContextForDocumentGeneration(),
				dlApplicationFixture, officeFixture, converterFixture);
		String actualXML = converterFixture
				.convertToDocumentBinding(requestFixture);
		Assert.assertEquals(expectedXml, actualXML);
	}

	/**
	 * Populate data b.
	 *
	 * @return the string[][]
	 */
	private String[][] populateDataB() {
]]>
</codefragment>
</duplication>
<duplication lines="51" tokens="285">
<file line="200" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<file line="252" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ IPrintConverterConstants.DL_REC_ZBPDLID, "S1111-111" },//
				{ IPrintConverterConstants.DL_REC_ZBPHDR2,
						"RECEIPT - NOT A LICENSE OR PERMIT" },
				{ IPrintConverterConstants.DL_REC_ZBPDISCL,
						"NOT A VERIFIED IDENTIFICATION" },
				{ IPrintConverterConstants.DL_REC_ZBPAPPLH, "APPLICATION FOR" },
				{ IPrintConverterConstants.DL_REC_ZBPPNME1, "MARK WILSON" },
				{ IPrintConverterConstants.DL_REC_ZBPPMAD1, "12345 FURTER RD" },
				{ IPrintConverterConstants.DL_REC_ZBPCMCTO, "SACRAMENTO" },
				{ IPrintConverterConstants.DL_REC_ZBPCMSTO, "CA" },
				{ IPrintConverterConstants.DL_REC_ZBPCMZPO, "95818" },
				{ IPrintConverterConstants.DL_REC_ZBPTRNV, "199.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCAS, "10000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCHKS, "0.00" },
				{ IPrintConverterConstants.DL_REC_ZBPNETAC, "CASH BACK       :" },
				{ IPrintConverterConstants.DL_REC_ZBPNETAM, "29801.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCRDT, "0.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCARD, "20000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPCCSAL, "SALE " },
				{ IPrintConverterConstants.DL_REC_ZBPCC, "XXXXXXXXXXXX4444" },
				{ IPrintConverterConstants.DL_REC_ZBPTEXT4,
						"DMV TRANS. AMT.         CONVENIENCE FEE            TOTAL AMOUNT PAID" },
				{ IPrintConverterConstants.DL_REC_ZBPTCCCF, "0.00" },
				{
						IPrintConverterConstants.DL_REC_ZBPTEXT5,
						"YOUR CREDIT CARD STATEMENT WILL INCLUDE A $0.00 NON-REFUNDABLE CONVENIENCE FEE" },
				{ IPrintConverterConstants.DL_REC_ZBPTCCAP, "20000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPCCARD, "20000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPCCEXP, "0570" },
				{ IPrintConverterConstants.DL_REC_ZBPCCAUT, "7" },
				{ IPrintConverterConstants.DL_REC_ZBP_SIGN, "$" },
				{ IPrintConverterConstants.DL_REC_ZBPOFFNM, "OFFICE -" },
				{ IPrintConverterConstants.DL_REC_ZBPOFFID, "130" },
				{ IPrintConverterConstants.DL_REC_ZBPWKSDT, "042110" },
				{ IPrintConverterConstants.DL_REC_ZBPEMPID, "JA" },
				{ IPrintConverterConstants.DL_REC_ZBPCASQ, "9" },
				{ IPrintConverterConstants.DL_REC_ZBPDAFR, "131" },
				{ IPrintConverterConstants.DL_REC_ZBPTEXT1,
						"IF THIS APPLICATION IS NOT COMPLETED" },
				{ IPrintConverterConstants.DL_REC_ZBPTEXT2,
						"BY 04-21-10, IT WILL BE CANCELLED." },
				{ IPrintConverterConstants.DL_REC_ZBPOAPDT, "090510" } };
		return dataArray;
	}

	/**
	 * Populate data.
	 *
	 * @return the string[][]
	 */
	private String[][] populateData() {
]]>
</codefragment>
</duplication>
<duplication lines="46" tokens="267">
<file line="209" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\dl\service\impl\test\IssueDlTaskServiceTest.java"/>
<file line="115" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\DlPaymentReceiptRequestTusTest.java"/>
<codefragment>
<![CDATA[
		dlApplnFixture = new DlApplication();
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		CodeSetElement licenseTypeCode = new CodeSetElement();
		licenseTypeCode.setCode("C");
		List<CodeSetElement> licenseCodeList = new ArrayList <CodeSetElement>();
		CodeSetElement licenseClassC = new CodeSetElement();
		licenseClassC.setCode("C");
		licenseCodeList.add(licenseClassC);
		driverLicense.setAppliedLicenseClasses(licenseCodeList);
		//driverLicense.setLicenseTypeCode(licenseTypeCode);
		// adding the SSN Document
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsn("123-45-6789");
		ArrayList <Document> documentsList = new ArrayList <Document>();
		documentsList.add(ssnDocument);
		dlApplnFixture.setDocuments(documentsList);
		// Setting person object
		Person person = new Person();
		DateFormat format = new SimpleDateFormat("MM-dd-yy");
		Date date = null;
		try {
			date = format.parse("08-15-47");
		}
		catch (ParseException e) {
			LOGGER.error(e);
		}
		person.setBirthDate(date);
		PersonName personName = new PersonName();
		personName.setFirstName("Albert");
		personName.setLastName("Einstein");
		personName.setMiddleName("M");
		ArrayList <PersonName> personNamesList = new ArrayList <PersonName>();
		personNamesList.add(personName);
		person.setPersonNames(personNamesList);
		person.setCurrentName(personName);
		//driverLicense.setApplicant(person);
		// setting mailing address
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415");
		mailingAddress.setLine2("1st Ave");
		mailingAddress.setCity("SACRAMENTO");
		mailingAddress.setStateCode(new CodeSetElement("CA","CA","CA"));
		mailingAddress.setZip("95818");
		//person.addAddress(mailingAddress, true);
		dlApplnFixture.setLicense(driverLicense);
]]>
</codefragment>
</duplication>
<duplication lines="44" tokens="263">
<file line="59" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\service\impl\test\CodeSetLoaderTest.java"/>
<file line="56" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\service\impl\test\CodeSetServiceTest.java"/>
<codefragment>
<![CDATA[
	private static CodeSet getCityCodeSet() {
		CodeSetElement sacCityCode = new CodeSetElement();
		sacCityCode.setCode("SA");
		sacCityCode.setName("Sacramento");
		sacCityCode.setDescription("City of Sacramento");
		sacCityCode.setCodeCategory("CITY CODES");
		CodeSetElement rcCityCode = new CodeSetElement();
		rcCityCode.setCode("RC");
		rcCityCode.setName("Rancho Cordova");
		rcCityCode.setDescription("City of Rancho Cordova");
		rcCityCode.setCodeCategory("CITY CODES");
		CodeSetElement flCityCode = new CodeSetElement();
		flCityCode.setCode("FL");
		flCityCode.setName("Folsom");
		flCityCode.setDescription("City of Folsom");
		flCityCode.setCodeCategory("CITY CODES");
		List <ICodeSetElement> cityCodes = new ArrayList <ICodeSetElement>();
		cityCodes.add(sacCityCode);
		cityCodes.add(rcCityCode);
		cityCodes.add(flCityCode);
		return new CodeSet("CITY CODES", cityCodes, new Date(), new Date());
	}

	/**
	 * Utility method to get the hair code set.
	 * 
	 * @return the hair code set
	 */
	private static CodeSet getHairCodeSet() {
		CodeSetElement blkColor = new CodeSetElement();
		blkColor.setCode("BLK");
		blkColor.setName("Black");
		blkColor.setDescription("Black Hair");
		blkColor.setCodeCategory("HAIR CODES");
		CodeSetElement blnColor = new CodeSetElement();
		blnColor.setCode("BLN");
		blnColor.setName("Blonde");
		blnColor.setDescription("Blonde Hair");
		blnColor.setCodeCategory("HAIR CODES");
		List <ICodeSetElement> hairCodes = new ArrayList <ICodeSetElement>();
		hairCodes.add(blkColor);
		hairCodes.add(blnColor);
		return new CodeSet("HAIR CODES", hairCodes, new Date(), new Date());
	}
]]>
</codefragment>
</duplication>
<duplication lines="49" tokens="263">
<file line="178" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\PersonFixtureFactory.java"/>
<file line="183" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\PersonFixtureFactory.java"/>
<codefragment>
<![CDATA[
		driverLicense.setAppliedLicenseClasses(licenseClassCodes);
		person.setDriverLicense(driverLicense);
		Address address = new Address(AddressType.MAILING);
		CodeSetElement city = new CodeSetElement();
		city.setName(CITY);
		List <Locator> locatorSet = new ArrayList <Locator>();
		locatorSet.add(address);
		//person.addAddress(address, true);
		return person;
	}

	/**
	 * This method creates a new Person for SendCdlisPdpsServiceRequest.
	 * 
	 * @return the person
	 */
	public static Person createPersonForSendCdlisPdpsServiceRequest() {
		Person person = new Person();
		List <Document> documents = new ArrayList <Document>();
		SocialSecurityDocument document = new SocialSecurityDocument();
		document.setSsn("568252659");
		document.setDocumentHolderName("BALL@KIM");
		documents.add(document);
		//person.setDocument(documents);
		Date bdate = CommonFixtureFactory.convertStringToDate("19671116",
				CommonFixtureFactory.FORMATTER_CCYY_MM_DD);
		person.setBirthDate(bdate);
		PersonName personName = new PersonName();
		personName.setName("BALL@KIM");
		personName.setFirstName("BALL");
		personName.setLastName("KIM");
		person.setCurrentName(personName);
		List <PersonName> personNames = new ArrayList <PersonName>();
		personNames.add(personName);
		PersonName personName2 = new PersonName();
		personName2.setName("BALL@KIM");
		personName2.setFirstName("BALL");
		personName2.setLastName("KIM");
		personNames.add(personName2);
		PersonName personName3 = new PersonName();
		personName3.setName("BALL@KIM");
		personName3.setFirstName("BALL");
		personName3.setLastName("KIM");
		personNames.add(personName3);
		person.setPersonNames(personNames);
		DriverLicense license = new DriverLicense();
		person.setDriverLicense(license);
		OutOfStateLicense outOfStateLicense = new OutOfStateLicense();
		person.getPreviousLicenses().add(outOfStateLicense);
]]>
</codefragment>
</duplication>
<duplication lines="66" tokens="262">
<file line="40" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\PersonFixtureFactory.java"/>
<file line="39" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\PersonFixtureFactory.java"/>
<codefragment>
<![CDATA[
public final class PersonFixtureFactory {
	/**
	 * This method creates the Person Object.
	 * 
	 * @return Person person.
	 */
	public static Person createPerson() {
		Calendar calendar = new GregorianCalendar(1970, Calendar.AUGUST, 25);
		Person person = new Person();
		person.setBirthDate(calendar.getTime());
		person.setHeightInInch(new Integer(72));
		person.setWeight(new Integer(150));
		person.setDriverLicense(DriverLicenseFixtureFactory
				.createDriverLicense());
		List <PersonName> nameList = new ArrayList <PersonName>();
		PersonName personName = new PersonName();
		personName.setName("Anthony");
		nameList.add(personName);
		person.setPersonNames(nameList);
		PersonName personName1 = new PersonName();
		personName1.setFirstName("John");
		personName1.setLastName("Miller");
		List <PersonName> personNameList = new ArrayList <PersonName>();
		personNameList.add(personName1);
		person.setPersonNames(personNameList);
		person.setCurrentName(personName);
		person.setGenderChanged(false);
		return person;
	}

	/**
	 * This method creates a new Person for Search Person by Name and Four Pay Load.
	 * 
	 * @return the person
	 */
	public static Person createPersonForSearchPersonByNameFourPayload() {
		// FOUR PAYLOAD
		// ATLSKDLAF N00STRUCTURE TESTDRIVER O B051153C row No:252
		String EMPLOYEE_ID = "SK";
		String TYPE_TRANSACTION_CODE = "DLA";
		String CLASS_OF_INQUIRY = "F";
		String LAST_NAME = "STRUCTURE";
		String FIRST_NAME = "TESTDRIVER";
		String MIDDLE_INITIAL = "O";
		String SUFFIX = "";
		String BIRTHDATE = "11/05/1953";
		String CITY = "";
		Person person = new Person();
		/* DCS Integration Test */
		// ctx = new
		// FileSystemXmlApplicationContext("classpath*:spring-config.xml");
		// dcsRequestFactory = (DcsRequestFactory)
		// ctx.getBean("RequestFactory");
		DriverLicense driverLicense = new DriverLicense();
		// Employee employee = new Employee();
		// employee.setEmployeeTechId(EMPLOYEE_ID);
		// Transaction transaction = new Transaction();
		// transaction.setEmployee(employee);
		// transaction.setTypeTranscationCode(TYPE_TRANSACTION_CODE);
		// driverLicense.setTransaction(transaction);
		PersonName personName = new PersonName();
		personName.setLastName(LAST_NAME);
		personName.setFirstName(FIRST_NAME);
		personName.setMiddleName(MIDDLE_INITIAL);
		personName.setSuffix(SUFFIX);
		personName.setName(FIRST_NAME);
]]>
</codefragment>
</duplication>
<duplication lines="34" tokens="257">
<file line="114" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\FailureToAppearDCAConverterTest.java"/>
<file line="111" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateFailureToAppearDCAConverterTest.java"/>
<codefragment>
<![CDATA[
		this.citationDetail.setDispositionCodes(dispositionCodes);
		this.userContext = new UserContext();
		this.userContext.setTtc("FTA");
		this.userContext.setOfficeId("130");
		this.userContext.setTechId("BT");
		this.userContext.setRacfId("123");
		this.userContext.setIpAddress("127.0.0.0");
	}

	/**
	 * Test method for createMessage().
	 */
	@Test
	public void testCreateMessageInquiry() {
		Calendar birthCal = Calendar.getInstance();
		birthCal.set(1982, Calendar.SEPTEMBER, 11);
		Calendar violationCal = Calendar.getInstance();
		violationCal.set(2008, Calendar.APRIL, 21);
		Calendar convictionCal = Calendar.getInstance();
		convictionCal.set(2011, Calendar.OCTOBER, 10);
		List <SectionViolated> sectionViolatedList = new ArrayList <SectionViolated>();
		SectionViolated sectionViolated1 = new SectionViolated();
		sectionViolated1.setSectionViolatedNumber("12500A");
		sectionViolated1.setStatuteCode(new CodeSetElement("A", "A", "A"));
		SectionViolated sectionViolated2 = new SectionViolated();
		sectionViolated2.setSectionViolatedNumber("405095");
		sectionViolated2.setStatuteCode(new CodeSetElement("A", "A", "A"));
		sectionViolatedList.add(sectionViolated1);
		sectionViolatedList.add(sectionViolated2);
		List <CodeSetElement> dispositionCodeList = new ArrayList <CodeSetElement>();
		dispositionCodeList.add(new CodeSetElement("F", "F", "F"));
		this.initData("I1472071", "TEM", birthCal.getTime(), "*CMZ019",
				violationCal.getTime(), convictionCal.getTime(), "30460",
				sectionViolatedList, dispositionCodeList);
]]>
</codefragment>
</duplication>
<duplication lines="50" tokens="254">
<file line="582" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="897" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				Calendar.JUNE, 25);
		DlApplicationFixtureFactory.createAppliedCategories(
				dlApplicationFixture, "1", "2");
		//Set New Driving Restrictions
		List <DrivingRestriction> newRestrictions = new ArrayList <DrivingRestriction>();
		//Add New Restriction Code - 01 
		CodeSetElement newRestrictionCode = new CodeSetElement();
		newRestrictionCode.setCode("01");
		DrivingRestriction newDrivingRestriction = new DrivingRestriction();
		newDrivingRestriction.setRestrictionTypeCode(newRestrictionCode);
		newDrivingRestriction.setEffectiveDate(CommonFixtureFactory
				.convertStringToDate("20000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newDrivingRestriction.setExpirationDate(CommonFixtureFactory
				.convertStringToDate("21000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newRestrictions.add(newDrivingRestriction);
		//Add New Restriction Code - 59
		CodeSetElement newRestrictionCode1 = new CodeSetElement();
		newRestrictionCode1.setCode("59");
		DrivingRestriction newDrivingRestriction1 = new DrivingRestriction();
		newDrivingRestriction1.setRestrictionTypeCode(newRestrictionCode1);
		newDrivingRestriction1.setEffectiveDate(CommonFixtureFactory
				.convertStringToDate("20000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newDrivingRestriction1.setExpirationDate(CommonFixtureFactory
				.convertStringToDate("21000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newRestrictions.add(newDrivingRestriction1);
		//Add New Restriction Code - 29
		CodeSetElement newRestrictionCode2 = new CodeSetElement();
		newRestrictionCode2.setCode("29");
		DrivingRestriction newDrivingRestriction2 = new DrivingRestriction();
		newDrivingRestriction2.setRestrictionTypeCode(newRestrictionCode2);
		newRestrictions.add(newDrivingRestriction2);
		//Add New Restriction Code - 73
		CodeSetElement newRestrictionCode3 = new CodeSetElement();
		newRestrictionCode3.setCode("73");
		DrivingRestriction newDrivingRestriction3 = new DrivingRestriction();
		newDrivingRestriction3.setRestrictionTypeCode(newRestrictionCode3);
		newRestrictions.add(newDrivingRestriction3);
		//Add New Restriction Code - 72
		CodeSetElement newRestrictionCode4 = new CodeSetElement();
		newRestrictionCode4.setCode("72");
		DrivingRestriction newDrivingRestriction4 = new DrivingRestriction();
		newDrivingRestriction4.setRestrictionTypeCode(newRestrictionCode4);
		newRestrictions.add(newDrivingRestriction4);
		DlApplicationFixtureFactory.createNewDrivingRestrictions(
				dlApplicationFixture, newRestrictions);
		DlApplicationFixtureFactory.createClassOfRecords(dlApplicationFixture,
]]>
</codefragment>
</duplication>
<duplication lines="60" tokens="253">
<file line="606" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="565" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateDataSalesPerson() {
		Date currentDate = new Date();
		String systemDate = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_MM_dd_yy);
		String systemTime = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_HH_mm);
		String[][] dataArray = new String[][] {
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_HEADER,
						"OCC LIC REFERRAL" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_TYPE_OF_APPLICATION_TEXT,
						"SP ORIGINAL" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_HEADER,
						"SP #:" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_NUMBER,
						"S123456" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_EXP_DATE,
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_ID_EXP_DATE,
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_ID,
						"305" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_DATE,
						"01/05/10" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_MICROGRAPHICS_NUMBER,
						"995" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_1,
]]>
</codefragment>
</duplication>
<duplication lines="49" tokens="252">
<file line="100" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="582" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				Calendar.JULY, 9);
		DlApplicationFixtureFactory.createAppliedCategories(
				dlApplicationFixture, "1", "2");
		//Set New Driving Restrictions
		List <DrivingRestriction> newRestrictions = new ArrayList <DrivingRestriction>();
		//Add New Restriction Code - 01 
		CodeSetElement newRestrictionCode = new CodeSetElement();
		newRestrictionCode.setCode("01");
		DrivingRestriction newDrivingRestriction = new DrivingRestriction();
		newDrivingRestriction.setRestrictionTypeCode(newRestrictionCode);
		newDrivingRestriction.setEffectiveDate(CommonFixtureFactory
				.convertStringToDate("20000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newDrivingRestriction.setExpirationDate(CommonFixtureFactory
				.convertStringToDate("21000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newRestrictions.add(newDrivingRestriction);
		//Add New Restriction Code - 59
		CodeSetElement newRestrictionCode1 = new CodeSetElement();
		newRestrictionCode1.setCode("59");
		DrivingRestriction newDrivingRestriction1 = new DrivingRestriction();
		newDrivingRestriction1.setRestrictionTypeCode(newRestrictionCode1);
		newDrivingRestriction1.setEffectiveDate(CommonFixtureFactory
				.convertStringToDate("20000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newDrivingRestriction1.setExpirationDate(CommonFixtureFactory
				.convertStringToDate("21000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newRestrictions.add(newDrivingRestriction1);
		//Add New Restriction Code - 29
		CodeSetElement newRestrictionCode2 = new CodeSetElement();
		newRestrictionCode2.setCode("29");
		DrivingRestriction newDrivingRestriction2 = new DrivingRestriction();
		newDrivingRestriction2.setRestrictionTypeCode(newRestrictionCode2);
		newRestrictions.add(newDrivingRestriction2);
		//Add New Restriction Code - 73
		CodeSetElement newRestrictionCode3 = new CodeSetElement();
		newRestrictionCode3.setCode("73");
		DrivingRestriction newDrivingRestriction3 = new DrivingRestriction();
		newDrivingRestriction3.setRestrictionTypeCode(newRestrictionCode3);
		newRestrictions.add(newDrivingRestriction3);
		//Add New Restriction Code - 72
		CodeSetElement newRestrictionCode4 = new CodeSetElement();
		newRestrictionCode4.setCode("72");
		DrivingRestriction newDrivingRestriction4 = new DrivingRestriction();
		newDrivingRestriction4.setRestrictionTypeCode(newRestrictionCode4);
		newRestrictions.add(newDrivingRestriction4);
		DlApplicationFixtureFactory.createNewDrivingRestrictions(
				dlApplicationFixture, newRestrictions);
]]>
</codefragment>
</duplication>
<duplication lines="52" tokens="251">
<file line="53" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\DriverLicenseTerminationUpdateConverter.java"/>
<file line="49" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\MiscDriverLicenseUpdateConverter.java"/>
<codefragment>
<![CDATA[
			(MiscDriverLicenseUpdateRequestEcs) request;

		List<Object> objectList = new ArrayList<Object>(0);
		/* TCODE */
		objectList.add(filler(TCODE, 3));
		/* TYPE TRANS CODE */
		objectList.add(filler(TYPE_TRANS_CODE, 3));
		
		/* TRANSACTION SUB-CODE */
		objectList.add(filler(TRANSACTION_SUB_CODE, 1));
		
		/* REQUESTER CODE PREFIX */
		objectList.add(filler(REQUESTER_CODE_PREFIX, 2));
		
		/* OFFICE ID (REQUESTER CODE SUFFIX) */
		objectList.add(filler(super.getOfficeId(request.getUserContext()), 3));
		
		/* EMPLOYEE ID */
		objectList.add(filler(super.getEmployeeID(request.getUserContext()), 2));
		
		/* DL/ID NUMBER */
		objectList.add(filler(aRequestEcs.getDlOrIdCardNumber(), 8));
		
		/* FIRST 3 POSITIONS LAST NAME */
		objectList.add(filler(aRequestEcs.getLastName(), 3));
		
		/*TERMINATION AUTHORITY */
		objectList.add(filler(aRequestEcs.getTerminationAuthorityCode(),7 ));
		
		/*TERMINATION DATE*/
		objectList.add(filler(convertDateToString(aRequestEcs.getLicenseSurrenderedProcessDate(), EcsConverterHelper.FORMATTER_MM_DD_YY ),6 ));
		
		
		/*ORIGINAL ACTION AUTHORITY*/
		objectList.add(filler(aRequestEcs.getOriginalAuthoritySelection(),7 ));
		
		/*ORIGINAL ACTION EFFECTIVE DATE*/
		objectList.add(filler( convertDateToString(aRequestEcs.getOriginalActionEffectiveDate(), EcsConverterHelper.FORMATTER_MM_DD_YY) ,6 ));
		
		/*LICENSE LOCATION */
		objectList.add(filler(aRequestEcs.getLicenseLocation(),2 ));
		
		/*LICENSE LOCATION CONSTANT*/
		
		objectList.add(filler(LICENSE_LOCATION_CONSTANT, 1 ));
		
		/*RESPONSE CODE*/
		
		objectList.add(filler(RESPONSE_CODE,2 ));
		
		
		Object[] tcodeRequestElementsArray = objectList.toArray();
]]>
</codefragment>
</duplication>
<duplication lines="39" tokens="251">
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD754Rule.java"/>
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD791Rule.java"/>
<codefragment>
<![CDATA[
public class CdaD791Rule extends AbstractValidateRule {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(ProcessContext processContext) {
		CdaProcessContext cdaProcessContext = (CdaProcessContext) processContext;
		Person applicant = cdaProcessContext.getReadOnlyDlApplication()
				.getApplicant();
		IErrorCollector errorCollector = new ErrorCollector();
		Action selectedAction = cdaProcessContext.getSelectedAction();
		if (selectedAction != null
				&& selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.ENTER_ACTION))) {
			List <CodeSetElement> existingAttachments = cdaProcessContext
					.getDriverLicense().getExistingAttachments();
			List <CodeSetElement> newAttachments = cdaProcessContext
					.getDriverLicense().getNewAttachments();
			List <CodeSetElement> attachments = new ArrayList <CodeSetElement>();
			if (existingAttachments != null) {
				attachments.addAll(existingAttachments);
			}
			if (newAttachments != null) {
				attachments.addAll(newAttachments);
			}
			List <DrivingRestriction> existingRestrictions = cdaProcessContext
					.getDriverLicense().getExistingRestrictions();
			List <DrivingRestriction> newRestrictions = cdaProcessContext
					.getDriverLicense().getNewRestrictions();
			List <DrivingRestriction> restrictions = new ArrayList <DrivingRestriction>();
			if (existingRestrictions != null) {
				restrictions.addAll(existingRestrictions);
			}
			if (newRestrictions != null) {
				restrictions.addAll(newRestrictions);
			}
			for (CodeSetElement attachment : attachments) {
				if (attachment != null && attachment.getCode() != null) {
					if ("51".equalsIgnoreCase(attachment.getCode())
							&& applicant.getMedicalExpirationDate() != null) {
]]>
</codefragment>
</duplication>
<duplication lines="52" tokens="250">
<file line="963" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="1116" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateDataMNotM() {
		Date currentDate = new Date();
		String systemDate = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_MM_dd_yy);
		String[][] dataArray = new String[][] {
				{ IPrintConverterConstants.INS_PERMIT_HEADER_ELEMENT,
						"PROVISIONAL INSTRUCTION PERMIT" },
				{ IPrintConverterConstants.INS_PERMIT_DLORID_ELEMENT,
						"I1234567" },
				{
						IPrintConverterConstants.INS_PERMIT_INTERIM_PERMIT_CLASS_1_ELEMENT,
						"M" },
				{ IPrintConverterConstants.INS_PERMIT_ENDORSEMENT_TEXT_ELEMENT,
						"" },
				{ IPrintConverterConstants.INS_PERMIT_ISSUE_DATE_ELEMENT,
						systemDate },
				{ IPrintConverterConstants.INS_PERMIT_OFFICE_ID_ELEMENT, "130" },
				{ IPrintConverterConstants.INS_PERMIT_KEYED_BY_ELEMENT, "JA" },
				{ IPrintConverterConstants.INS_PERMIT_LRE_ID_ELEMENT, "601" },
				{ IPrintConverterConstants.INS_PERMIT_EXPIRATION_DATE_ELEMENT,
						"04-26-10" },
				{ IPrintConverterConstants.INS_PERMIT_PHOTO_NAME_ELEMENT,
						"Brad Miller" },
				{ IPrintConverterConstants.INS_PERMIT_PHOTO_ADDRESS_ELEMENT,
						"332 Photo Info Address" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_CITY_ELEMENT,
						"Sacramento" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_STATE_ELEMENT,
						"CA" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_ZIP_ELEMENT,
						"95815" },
				{ IPrintConverterConstants.INS_PERMIT_GENDER_ELEMENT, "M" },
				{ IPrintConverterConstants.INS_PERMIT_HAIR_COLOR_ELEMENT, "BLK" },
				{ IPrintConverterConstants.INS_PERMIT_EYE_COLOR_ELEMENT, "BLK" },
				{ IPrintConverterConstants.INS_PERMIT_HEIGHT_IN_FEET_ELEMENT,
						"5" },
				{ IPrintConverterConstants.INS_PERMIT_HEIGHT_IN_INCH_ELEMENT,
						"10" },
				{ IPrintConverterConstants.INS_PERMIT_WEIGHT_ELEMENT, "150" },
				{ IPrintConverterConstants.INS_PERMIT_BIRTHDATE_ELEMENT,
						"03-25-96" },
				{
						IPrintConverterConstants.INS_PERMIT_RESTRICTION_HEADER_ELEMENT,
						"RSTR:" },
				{ IPrintConverterConstants.INS_PERMIT_RESTRICTION_LINE_ELEMENT,
						"01-CORR LENS 59 29 73 72 - SEE OVER" },
				{ IPrintConverterConstants.INS_PERMIT_AGE_21_MESSAGE_ELEMENT,
						"AGE 21 IN 2017" },
				{ IPrintConverterConstants.INS_PERMIT_WINDOW_ELEMENT, "10" },
				{ IPrintConverterConstants.INS_PERMIT_PHONE_ELEMENT,
						"(916)657-7755" },
				{ IPrintConverterConstants.INS_PERMIT_LIMITATIONS_MAP_ELEMENT,
]]>
</codefragment>
</duplication>
<duplication lines="48" tokens="248">
<file line="119" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\docs\service\impl\test\DocumentServiceTest.java"/>
<file line="95" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\DlOrganDonorReceiptRequestTusTest.java"/>
<codefragment>
<![CDATA[
		userContextFixture.setWorkDate(new Date());
	}

	/**
	 * Setup DL Application fixture
	 */
	private void setUpDlApplicationFixture() {
		dlApplnFixture = new DlApplication();
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		CodeSetElement licenseClassC = new CodeSetElement();
		licenseClassC.setCode("C");
		driverLicense.getAppliedLicenseClasses().add(licenseClassC);
		// adding the SSN Document
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsn("123-45-6789");
		ArrayList <Document> documentsList = new ArrayList <Document>();
		documentsList.add(ssnDocument);
		dlApplnFixture.setDocuments(documentsList);
		// Setting person object
		Person person = new Person();
		DateFormat format = new SimpleDateFormat("MM-dd-yy");
		Date date = null;
		try {
			date = format.parse("08-15-47");
		}
		catch (ParseException e) {
			LOGGER.error(e);
		}
		person.setBirthDate(date);
		PersonName personName = new PersonName();
		personName.setFirstName("Albert");
		personName.setLastName("Einstein");
		personName.setMiddleName("M");
		ArrayList <PersonName> personNamesList = new ArrayList <PersonName>();
		personNamesList.add(personName);
		person.setPersonNames(personNamesList);
		person.setCurrentName(personName);
		// setting mailing address
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415");
		mailingAddress.setLine2("1st Ave");
		mailingAddress.setCity("SACRAMENTO");
		mailingAddress.setStateCode(new CodeSetElement("CA","CA","CA"));
		mailingAddress.setZip("95818");
		//person.addAddress(mailingAddress, true);
		dlApplnFixture.setLicense(driverLicense);
	}
]]>
</codefragment>
</duplication>
<duplication lines="34" tokens="247">
<file line="128" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\service\response\mock\impl\AniMockResponse.java"/>
<file line="160" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\service\response\mock\impl\AniMockResponse.java"/>
<codefragment>
<![CDATA[
		} else if ("BILL".equals(searchPersonByNameRequest.getPerson()
				.getCurrentName().getFirstName())) {
			EliRecord eliRecord = new EliRecord();
			eliRecord.setPerson(searchPersonByNameRequest.getPerson());
			DriverLicense driverLicense = new DriverLicense();
			driverLicense.setLicenseNumber("I3073843");
			eliRecord.setDriverLicense(driverLicense);
			Person person = eliRecord.getPerson();
			CodeSetElement hairCodeSetElement = new CodeSetElement("BRN",
					"BRN", "BRN");
			CodeSetElement eyeCodeSetElement = new CodeSetElement("BRN", "BRN",
					"BRN");
			CodeSetElement sexCodeSetElement = new CodeSetElement("M", "M", "M");
			person.setHairColorCode(hairCodeSetElement);
			person.setEyeColorCode(eyeCodeSetElement);
			person.setGenderCode(sexCodeSetElement);
			person.setWeight(new Integer(190));
			person.setHeightInFeet(new Integer(6));
			person.setHeightInInch(new Integer(2));
			List<OutOfStateLicense> previousLicenses = new ArrayList<OutOfStateLicense>();
			OutOfStateLicense outOfStateLicense = new OutOfStateLicense();
			outOfStateLicense.setLicenseNumber("I0000000");
			previousLicenses.add(outOfStateLicense);
			person.setPreviousLicenses(previousLicenses);
			Address mailingAddress = new Address(AddressType.MAILING);
			mailingAddress.setCity("SACRAMENTO");
			mailingAddress.setStateCode(new CodeSetElement("CA", "CA", "CA"));
			mailingAddress.setFullAddress("2415 1st AVE");
			mailingAddress.setZip("95818");
			person.addAddress(mailingAddress);
			busResponse = responseFactory
					.createSearchPersonByNameResponseForBus(null, eliRecord);
		}
		else if ("ABCD".equals(searchPersonByNameRequest.getPerson()
]]>
</codefragment>
</duplication>
<duplication lines="38" tokens="247">
<file line="149" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\CustomerInfoProcessContext.java"/>
<file line="85" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\IdProcessContext.java"/>
<codefragment>
<![CDATA[
		aniResults.add(aniRecord);
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsnServiceVerificationCode(new CodeSetElement());
		LegalPresenceDocument legalPresenceDocument = new LegalPresenceDocument();
		legalPresenceDocument.setVerificationCode(new CodeSetElement());
		List <Document> list = new ArrayList <Document>();
		Passport passport = new Passport();
		list.add(ssnDocument);
		list.add(legalPresenceDocument);
		list.add(passport);
		person.setDocuments(list);
		getDlApplication().setApplicationTypeCode(
				new CodeSetElement("", "", ""));
		Address mailingAddress = new Address(AddressType.MAILING);
		Address residenceAddress = new Address(AddressType.RESIDENTIAL);
		person.addAddress(mailingAddress);
		person.addAddress(residenceAddress);
		Invoice invoice = new Invoice();
		List <InvoiceItem> items = new ArrayList <InvoiceItem>();
		invoice.setInvoiceItems(items);
		List <Payment> payments = new ArrayList <Payment>();
		invoice.setPayments(payments);
		CashPayment cashPayment = new CashPayment();
		payments.add(cashPayment);
		CheckPayment checkPayment = new CheckPayment();
		payments.add(checkPayment);
		DebitPayment debitPayment = new DebitPayment();
		payments.add(debitPayment);
		List <IProcessHistory> processHistory = new ArrayList <IProcessHistory>();
		getDlApplication().setProcessHistory(processHistory);
		getDlApplication().setInvoice(invoice);
		setChangedName(new PersonName());
	}

	/**
	 * @return the aniResults
	 */
	public List <AniRecord> getAniResults() {
]]>
</codefragment>
</duplication>
<duplication lines="45" tokens="244">
<file line="243" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtaProcessingDocumentConverterTest.java"/>
<file line="142" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpProcessingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				"19100"));
	}

	/**
	 * Populate user context.
	 */
	private void populateUserContext() {
		userContextFixture = UserContextFixtureFactory
				.createUserContextForDocumentGeneration();
		userContextFixture.setTechId("SK");
		userContextFixture.setTtc("DLA");
		userContextFixture.setUserName("MWBRN");
		userContextFixture.setWorkDate(new Date());
		userContextFixture.setOfficeId("130");
		userContextFixture.setRacfId("23");
		userContextFixture.setIpAddress("127.0.0.1");
		Calendar workDate = Calendar.getInstance();
		workDate.set(2010, Calendar.JUNE, 03);
		userContextFixture.setWorkDate(workDate.getTime());
		CodeSetElement modeI = new CodeSetElement();
		modeI.setCode(IEaseModes.MANUAL);
		userContextFixture.setOperationalMode(modeI);
	}

	/**
	 * Populate person.
	 */
	private void populatePerson() {
		personFixture = PersonFixtureFactory.createPerson();
		DriverLicense driverLicense = personFixture.getDriverLicense();
		PhotoInformation photoInformation = new PhotoInformation();
		driverLicense.setLicenseNumber("I8005638");
		driverLicense.setPhotoInformation(photoInformation);
		personFixture.setDriverLicense(driverLicense);
		Calendar birthDate = Calendar.getInstance();
		birthDate.set(1950, Calendar.JUNE, 03);
		personFixture.setBirthDate(birthDate.getTime());
		PersonName pName = new PersonName();
		pName.setFirstName("Alexander");
		pName.setLastName("Fleming");
		pName.setMiddleName("M");
		personFixture.getPersonNames().add(pName);
		personFixture.setCurrentName(pName);
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415 1st ave");
]]>
</codefragment>
</duplication>
<duplication lines="61" tokens="243">
<file line="65" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\FailureToAppearDCARequestEcsValidatorTest.java"/>
<file line="65" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\UpdateFailureToAppearDCARequestEcsValidatorTest.java"/>
<codefragment>
<![CDATA[
		this.validator = new UpdateFailureToAppearDCARequestEcsValidator();
	}

	/**
	 * This method creates Person for Failure To Appear DCA.
	 * 
	 * @return the Person
	 */
	public static Person createPersonForFailureToAppearDCA() {
		Person person = new Person();
		Calendar calendar = new GregorianCalendar(1970, Calendar.AUGUST, 25);
		person.setBirthDate(calendar.getTime());
		List <PersonName> nameList = new ArrayList <PersonName>();
		PersonName personName = new PersonName();
		personName.setLastName("Anthony");
		personName.setFirstName("Mark");
		nameList.add(personName);
		person.setPersonNames(nameList);
		PersonName currentName = new PersonName();
		currentName.setFirstName("John");
		currentName.setLastName("Miller");
		person.setCurrentName(currentName);
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("D737373");
		person.setDriverLicense(driverLicense);
		return person;
	}

	/**
	 * This method creates Citation Detail for Failure To Appear DCA.
	 * 
	 * @return the Citation Detail
	 */
	public static CitationDetail createCitationDetailForFailureToAppearDCA() {
		CitationDetail citationDetail = new CitationDetail();
		citationDetail.setDocketNumber("1234");
		citationDetail.setViolationDate(new Date());
		citationDetail.setConvictionDate(new Date());
		citationDetail.setCourtCode(new CodeSetElement("X", "X", "X"));
		return citationDetail;
	}

	/**
	 * Tear Down.
	 */
	@After
	public void tearDown() {
		this.validator = null;
		this.request = null;
		this.person = null;
		this.citationDetail = null;
	}

	/**
	 * This method tests for Valid Request.
	 */
	@Test
	public void testForValidRequest() {
		this.person = createPersonForFailureToAppearDCA();
		this.citationDetail = createCitationDetailForFailureToAppearDCA();
		this.request = new UpdateFailureToAppearDCARequestEcs(this.person,
]]>
</codefragment>
</duplication>
<duplication lines="142" tokens="242">
<file line="768" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\CustomerInfoProcessContext.java"/>
<file line="646" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\DlaProcessContext.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Sets the inventory item.
	 * 
	 * @param inventoryItem the inventoryItem to set
	 */
	public void setInventoryItem(InventoryItem inventoryItem) {
		this.inventoryItem = inventoryItem;
	}

	/**
	 * Sets the inventory requested.
	 * 
	 * @param inventoryRequested the inventoryRequested to set
	 */
	public void setInventoryRequested(Boolean inventoryRequested) {
		this.inventoryRequested = inventoryRequested;
	}

	/**
	 * Sets the checks if is ani cna.
	 * 
	 * @param isAniCna the isAniCna to set
	 */
	public void setIsAniCna(Boolean isAniCna) {
		this.isAniCna = isAniCna;
	}

	/**
	 * @param isAnyAniRecordPrimary the isAnyAniRecordPrimary to set
	 */
	public void setIsAnyAniRecordPrimary(Boolean isAnyAniRecordPrimary) {
		this.isAnyAniRecordPrimary = isAnyAniRecordPrimary;
	}

	/**
	 * Sets the checks if is dl cna.
	 * 
	 * @param isDlCna the isDlCna to set
	 */
	public void setIsDlCna(Boolean isDlCna) {
		this.isDlCna = isDlCna;
	}

	/**
	 * Sets the checks if is inventory cna.
	 * 
	 * @param isInventoryCna the isInventoryCna to set
	 */
	public void setIsInventoryCna(Boolean isInventoryCna) {
		this.isInventoryCna = isInventoryCna;
	}

	/**
	 * Sets the lpv record.
	 * 
	 * @param lpvRecord the lpvRecord to set
	 */
	public void setLpvRecord(LpvRecord lpvRecord) {
		this.lpvRecord = lpvRecord;
	}

	/**
	 * Sets the pdps records.
	 * 
	 * @param pdpsRecords the pdpsRecords to set
	 */
	public void setPdpsRecords(List <PdpsRecord> pdpsRecords) {
		this.getDlApplication().setPdpsRecords(pdpsRecords);
	}

	/**
	 * Sets the pdps result hits.
	 * 
	 * @param pdpsResultHits the pdpsResultHits to set
	 */
	public void setPdpsResultHits(List <DrivingRecord> pdpsResultHits) {
		this.getDlApplication().setPdpsResultHits(pdpsResultHits);
	}

	/**
	 * Sets the pdps result hits cdu.
	 * 
	 * @param pdpsResultHitsCdu the new pdps result hits cdu
	 */
	public void setPdpsResultHitsCdu(List <DrivingRecord> pdpsResultHitsCdu) {
		this.pdpsResultHitsCdu = pdpsResultHitsCdu;
	}

	/**
	 * Sets the print response.
	 * 
	 * @param printResponse the printResponse to set
	 */
	public void setPrintResponse(boolean printResponse) {
		this.printResponse = printResponse;
	}

	/**
	 * Sets the read only dl application.
	 * 
	 * @param readOnlyDlApplication the readOnlyDlApplication to set
	 */
	public void setReadOnlyDlApplication(DlApplication readOnlyDlApplication) {
		this.readOnlyDlApplication = readOnlyDlApplication;
	}

	/**
	 * Sets the record condition indicators.
	 * 
	 * @param recordConditionIndicators the recordConditionIndicators to set
	 */
	public void setRecordConditionIndicators(
			RecordConditionIndicators recordConditionIndicators) {
		this.recordConditionIndicators = recordConditionIndicators;
	}

	/**
	 * Sets the transaction.
	 * 
	 * @param transaction the transaction to set
	 */
	@Override
	public void setTransaction(Transaction transaction) {
		this.transaction = transaction;
	}

	/**
	 * @return the aniDatabaseAvailable
	 */
	public boolean isAniDatabaseAvailable() {
		return aniDatabaseAvailable;
	}

	/**
	 * @param aniDatabaseAvailable the aniDatabaseAvailable to set
	 */
	public void setAniDatabaseAvailable(boolean aniDatabaseAvailable) {
		this.aniDatabaseAvailable = aniDatabaseAvailable;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="70" tokens="235">
<file line="362" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<file line="475" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"051212" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_APPLICATION_INCOMPLETE_MESSAGE,
						"APPLICATION INCOMPLETE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_ID,
						"305" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_DATE,
						"01/05/10" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_MICROGRAPHICS_NUMBER,
						"995" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_EMPLOYEE_ID, "BH" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_1,
						"*****************************************************************" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_2,
						"* P O S S I B L E   D O U B L E S   -   R O U T E   T O   R C A *" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_3,
						"*****************************************************************" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_LICENSE_NUMBER
								+ "01", "I2350505" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_OFFICE_ID, "130" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_SYSTEM_DATE,
						systemDate },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_SYSTEM_TIME,
						systemTime } };
		return dataArray;
	}

	/**
	* Test with sales person application.
	*/
	@Test
	public void testWithSalesPersonApplication() {
]]>
</codefragment>
</duplication>
<duplication lines="29" tokens="234">
<file line="517" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\SearchPersonByNumberAndLastNameConverter.java"/>
<file line="871" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\SearchPersonByNumberConverter.java"/>
<codefragment>
<![CDATA[
				startPos += 1); // ** FILLER ** --- not used
		elements.put("LICENSE LOCATION CODE", getSubString(
				anInboundMessagePayload, startPos, startPos += 1));// LICENSE LOCATION CODE
		elements.put("LICENSE EXTENSION CODE", getSubString(
				anInboundMessagePayload, startPos, startPos += 1));// LICENSE EXTENSION CODE		
		elements.put("DOUBLE RECORD CODE", getSubString(
				anInboundMessagePayload, startPos, startPos += 1));// DOUBLE RECORD CODE
		elements.put("ID RENEWAL MSG CODE", getSubString(
				anInboundMessagePayload, startPos, startPos += 1));// ID RENEWAL MSG CODE
		elements.put("DL RENEWAL MSG CODE", getSubString(
				anInboundMessagePayload, startPos, startPos += 1));// DL RENEWAL MSG CODE
		elements.put("PHOTO RETAKE NOT OK INDICATOR", getSubString(
				anInboundMessagePayload, startPos, startPos += 1));// PHOTO RETAKE NOT OK INDICATOR
		elements.put("SERVICE OF ORDER NEEDED", getSubString(
				anInboundMessagePayload, startPos, startPos += 1));// SERVICE OF ORDER NEEDED
		elements.put("INELIGIBLE TO RENEW BY MAIL MSG", getSubString(
				anInboundMessagePayload, startPos, startPos += 1));// INELIGIBLE TO RENEW BY MAIL MSG
		elements.put("ID PHOTO RETAKE", getSubString(anInboundMessagePayload,
				startPos, startPos += 1));// ID PHOTO RETAKE
		elements.put("TYPE APP ERROR", getSubString(anInboundMessagePayload,
				startPos, startPos += 1));// TYPE APP ERROR
		elements.put("APP PENDING INDICATOR", getSubString(
				anInboundMessagePayload, startPos, startPos += 1));// "APP PENDING INDICATOR (D = DL; I = ID; B = BOTH)"
		elements.put("ID CARD RETURNED UNCLAIMED", getSubString(
				anInboundMessagePayload, startPos, startPos += 1));// ID CARD RETURNED UNCLAIMED
		elements.put("SUSPENSE DUE DATE", getSubString(anInboundMessagePayload,
				startPos, startPos += 6));// SUSPENSE DUE DATE (MMDDYY)
		setIdCardExistingIncompleteApplicationReasonCode(getSubString(
				anInboundMessagePayload, startPos, startPos += 2), SEGMENT_E);// ID INCOMPLETE APP REASON CODE --- NOTE: If it exists, then it will overwrite the value set in segment B's ID INCOMPLETE APP REASON CODE
]]>
</codefragment>
</duplication>
<duplication lines="72" tokens="232">
<file line="50" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\convert\impl\ProofOfFilingDocumentConverter.java"/>
<file line="68" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private static final String TRAINING_ELEMENT = "ZBPTRMSG";
	/** The Constant DRIVERS_LICENSE_ELEMENT. */
	private static final String DRIVERS_LICENSE_ELEMENT = "ZBPDLNUM";
	/** The Constant FULL_NAME_ELEMENT. */
	private static final String FULL_NAME_ELEMENT = "ZBPNAME";
	/** The Constant ADDRESS_ELEMENT. */
	private static final String ADDRESS_ELEMENT = "ZBPMADDR";
	/** The Constant CITY_ELEMENT. */
	private static final String CITY_ELEMENT = "ZBPMCITY";
	/** The Constant STATE_ELEMENT. */
	private static final String STATE_ELEMENT = "ZBPMSTAT";
	/** The Constant ZIP_ELEMENT. */
	private static final String ZIP_ELEMENT = "ZBPMZIP";
	/** The Constant INSURANCE_COMPANY_NUMBER_ELEMENT. */
	private static final String INSURANCE_COMPANY_NUMBER_ELEMENT = "ZBPINS_";
	/** The Constant INSURANCE_COMPANY_NAME_ELEMENT. */
	private static final String INSURANCE_COMPANY_NAME_ELEMENT = "ZBPINSNA";
	/** The Constant CERTIFICATE_TYPE_CODE_ELEMENT. */
	private static final String CERTIFICATE_TYPE_CODE_ELEMENT = "ZBPCRTCD";
	/** The Constant CERTIFICATE_TYPE_ELEMENT. */
	private static final String CERTIFICATE_TYPE_ELEMENT = "ZBPTPCRT";
	/** The Constant COVERAGE_ELEMENT. */
	private static final String COVERAGE_CODE_ELEMENT = "ZBPCOVCD";
	/** The Constant COVERAGE_TYPE_ELEMENT. */
	private static final String COVERAGE_TYPE_ELEMENT = "ZBPTPCOV";
	/** The Constant POLICY_NUMBER_ELEMENT. */
	private static final String POLICY_NUMBER_ELEMENT = "ZBPPOLI_";
	/** The Constant EFFECTIVE_DATE_ELEMENT. */
	private static final String EFFECTIVE_DATE_ELEMENT = "ZBPEFFDT";
	/** The Constant RECEIPT_DATE_ELEMENT. */
	private static final String RECEIPT_DATE_ELEMENT = "ZBPRECDT";//SYSTEM
	/** The Constant OFFICE_ID_ELEMENT. */
	private static final String OFFICE_ID_ELEMENT = "ZBPOFFID";
	/** The Constant KEYERS_ID_ELEMENT. */
	private static final String KEYERS_ID_ELEMENT = "ZBPEMPID";
	/** The Constant PROCESS_DATE_ELEMENT. */
	private static final String PROCESS_DATE_ELEMENT = "ZBPPRCDT";//SYSTEM
	/** The Constant SYSTEM_TIME_ELEMENT. */
	private static final String SYSTEM_TIME_ELEMENT = "ZBPCTIME";
	/** The Constant DOCUMENT_1_TEMPLATE_NAME. */
	private static final String DOCUMENT_1_TEMPLATE_NAME = "sddn771.xml";
	/** The Constant DOCUMENT_2_TEMPLATE_NAME. */
	private static final String DOCUMENT_2_TEMPLATE_NAME = "sddn772.xml";
	/** The Constant SOME_CODE_ELEMENT. */
	private static final String SOME_CODE_ELEMENT = "ZBPMFCDE";//TODO
	/** The Constant HQ08_DATE_ELEMENT. */
	private static final String HQ08_DATE_ELEMENT = "HQDATE08";
	/** The Constant HQ11_DATE_ELEMENT. */
	private static final String HQ11_DATE_ELEMENT = "HQDATE11";
	/** The Constant HQ12_DATE_ELEMENT. */
	private static final String HQ12_DATE_ELEMENT = "HQDATE12";
	/** The Constant CUST02_DATE_ELEMENT. */
	private static final String CUST02_DATE_ELEMENT = "CUSTDATE02";
	/** The Constant CUST03_DATE_ELEMENT. */
	private static final String CUST03_DATE_ELEMENT = "CUSTDATE03";
	/** The Constant CUST04_DATE_ELEMENT. */
	private static final String CUST04_DATE_ELEMENT = "CUSTDATE04";
	/** The Constant CUST08_DATE_ELEMENT. */
	private static final String CUST08_DATE_ELEMENT = "CUSTDATE08";
	/** The Constant CUST09_DATE_ELEMENT. */
	private static final String CUST09_DATE_ELEMENT = "CUSTDATE09";
	/** The Constant CUSTOMER_MESSAGES. */
	private static final String CUSTOMER_MESSAGES = "customer";
	/** The Constant HEADQUARTERS_MESSAGES. */
	private static final String HEADQUARTERS_MESSAGES = "headquarters";

	/**
	 * Populate data.
	 * 
	 * @return the string[][]
	 */
	private String[][] populateData() {
]]>
</codefragment>
</duplication>
<duplication lines="37" tokens="231">
<file line="185" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDriverLicenseConverterTest.java"/>
<file line="300" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDriverLicenseConverterTest.java"/>
<codefragment>
<![CDATA[
	private void createFixtureForTestCreateMessage2(String ttc,
			String officeId, String techId, String dlIdNumber, String name,
			String aDateFeesIssued, String workDate, Integer controlCashNo) {
		userContext = new UserContext();
		userContext.setOfficeId(officeId);
		userContext.setTechId(techId);
		userContext.setTtc(ttc);
		userContext.setWorkDate(convertStringToDate(workDate, "MMddyy"));
		userContext.setControlCashierSeqNumber(controlCashNo);
		DriverLicenseFee driverLicenseFee = new DriverLicenseFee();
		FeeRateCode feeRateCodeForfamilylawind = new FeeRateCode();
		///////////////////////////////////////////////////////////
		feeRateCodeForfamilylawind.setCode("762");
		DriverLicenseRateStatus dlStatusForfamilylawind1 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind1.setFeeRatecode(feeRateCodeForfamilylawind);
		DriverLicenseRateStatus dlStatusForfamilylawind2 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind2.setFeeRatecode(feeRateCodeForfamilylawind);
		DriverLicenseRateStatus dlStatusForfamilylawind3 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind3.setFeeRatecode(feeRateCodeForfamilylawind);
		DriverLicenseRateStatus dlStatusForfamilylawind4 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind4.setFeeRatecode(feeRateCodeForfamilylawind);
		DriverLicenseRateStatus dlStatusForfamilylawind5 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind5.setFeeRatecode(feeRateCodeForfamilylawind);
		DriverLicenseRateStatus dlStatusForfamilylawind6 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind6.setFeeRatecode(feeRateCodeForfamilylawind);
		DriverLicenseRateStatus dlStatusForfamilylawind7 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind7.setFeeRatecode(feeRateCodeForfamilylawind);
		DriverLicenseRateStatus dlStatusForfamilylawind8 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind8.setFeeRatecode(feeRateCodeForfamilylawind);
		DriverLicenseRateStatus dlStatusForfamilylawind9 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind9.setFeeRatecode(feeRateCodeForfamilylawind);
		DriverLicenseRateStatus dlStatusForfamilylawind10 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind10.setFeeRatecode(feeRateCodeForfamilylawind);
		///////////////////////////////////////////////////////
		FeeRateCode feeRateCodeForDrugCode = new FeeRateCode();
		feeRateCodeForDrugCode.setCode("749");
		DriverLicenseRateStatus dlStatusForDrugCodeInd1 = new DriverLicenseRateStatus();
]]>
</codefragment>
</duplication>
<duplication lines="31" tokens="230">
<file line="82" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\IdProcessContext.java"/>
<file line="98" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\SsnInquiryProcessContext.java"/>
<codefragment>
<![CDATA[
		person.addPreviousLicense(outOfStateLicense);
		getDlApplication().setApplicant(person);
		AniRecord aniRecord = new AniRecord();
		aniResults.add(aniRecord);
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsnServiceVerificationCode(new CodeSetElement());
		LegalPresenceDocument legalPresenceDocument = new LegalPresenceDocument();
		legalPresenceDocument.setVerificationCode(new CodeSetElement());
		List <Document> list = new ArrayList <Document>();
		Passport passport = new Passport();
		list.add(ssnDocument);
		list.add(legalPresenceDocument);
		list.add(passport);
		person.setDocuments(list);
		getDlApplication().setApplicationTypeCode(
				new CodeSetElement("", "", ""));
		Address mailingAddress = new Address(AddressType.MAILING);
		Address residenceAddress = new Address(AddressType.RESIDENTIAL);
		person.addAddress(mailingAddress);
		person.addAddress(residenceAddress);
		Invoice invoice = new Invoice();
		List <InvoiceItem> items = new ArrayList <InvoiceItem>();
		invoice.setInvoiceItems(items);
		List <Payment> payments = new ArrayList <Payment>();
		invoice.setPayments(payments);
		CashPayment cashPayment = new CashPayment();
		payments.add(cashPayment);
		CheckPayment checkPayment = new CheckPayment();
		payments.add(checkPayment);
		DebitPayment debitPayment = new DebitPayment();
		payments.add(debitPayment);
]]>
</codefragment>
</duplication>
<duplication lines="53" tokens="229">
<file line="502" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="456" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateDataIdApplication() {
		Date currentDate = new Date();
		String systemDate = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_MM_dd_yy);
		String systemTime = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_HH_mm);
		String[][] dataArray = new String[][] {
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_HEADER,
						"ISSUANCE REFERRAL" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_TYPE_OF_APPLICATION_TEXT,
						"ID ORIGINAL" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_HEADER,
						"DL #:" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_NUMBER,
						"I0090909" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_EXP_DATE,
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_ID_EXP_DATE,
						"051212" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_APPLICATION_INCOMPLETE_MESSAGE,
]]>
</codefragment>
</duplication>
<duplication lines="53" tokens="229">
<file line="378" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="229" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateDataNew() {
		Date currentDate = new Date();
		String systemDate = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_MM_dd_yy);
		String systemTime = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_HH_mm);
		String[][] dataArray = new String[][] {
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_HEADER,
						"ISSUANCE REFERRAL" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_TYPE_OF_APPLICATION_TEXT,
						"DL ORIGINAL" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_HEADER,
						"DL #:" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_NUMBER,
						"I0090909" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_EXP_DATE,
						"051212" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_ID_EXP_DATE,
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_APPLICATION_INCOMPLETE_MESSAGE,
]]>
</codefragment>
</duplication>
<duplication lines="43" tokens="229">
<file line="152" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FcpProcessingDismissalDocumentConverterTest.java"/>
<file line="243" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtaProcessingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		citationDetail.setProbationDate(probationDate.getTime());
	}

	/**
	 * Populate user context.
	 */
	private void populateUserContext() {
		userContextFixture = UserContextFixtureFactory
				.createUserContextForDocumentGeneration();
		userContextFixture.setTechId("SK");
		userContextFixture.setTtc("DLA");
		userContextFixture.setUserName("MWBRN");
		userContextFixture.setWorkDate(new Date());
		userContextFixture.setOfficeId("130");
		userContextFixture.setRacfId("23");
		userContextFixture.setIpAddress("127.0.0.1");
		Calendar workDate = Calendar.getInstance();
		workDate.set(2010, Calendar.JUNE, 03);
		userContextFixture.setWorkDate(workDate.getTime());
		CodeSetElement modeI = new CodeSetElement();
		modeI.setCode(IEaseModes.MANUAL);
		userContextFixture.setOperationalMode(modeI);
	}

	/**
	 * Populate person.
	 */
	private void populatePerson() {
		personFixture = PersonFixtureFactory.createPerson();
		DriverLicense driverLicense = personFixture.getDriverLicense();
		PhotoInformation photoInformation = new PhotoInformation();
		driverLicense.setLicenseNumber("I8005638");
		driverLicense.setPhotoInformation(photoInformation);
		personFixture.setDriverLicense(driverLicense);
		Calendar birthDate = Calendar.getInstance();
		birthDate.set(1950, Calendar.JUNE, 03);
		personFixture.setBirthDate(birthDate.getTime());
		PersonName pName = new PersonName();
		pName.setFirstName("Alexander");
		pName.setLastName("Fleming");
		pName.setMiddleName("M");
		personFixture.getPersonNames().add(pName);
		personFixture.setCurrentName(pName);
]]>
</codefragment>
</duplication>
<duplication lines="71" tokens="227">
<file line="63" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\activity\subprocess\impl\HQInquirySalePersonSubProcessActivity.java"/>
<file line="83" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\activity\subprocess\impl\HQInquirySubProcessActivity.java"/>
<codefragment>
<![CDATA[
					.getEliRecord());
		}
		//This need separate sub process activity such as SPInquirySubProcessActivity, time being it is handled in here.....
		/*else if (processContext instanceof SpProcessContext) {
			SpProcessContext spProcessContext = ((SpProcessContext) processContext);
			HqInquiryProcessContext hqInquiryProcessContext = (HqInquiryProcessContext) subprocessContext;
			spProcessContext.setSalesPersonApplication(hqInquiryProcessContext
					.getSalesPersonApplication());
		}*/
	}

	/**
	 * Copy person to vehicle sales person.
	 * 
	 * @param spProcessContext the sp process context
	 */
	private void copyPersonToVehicleSalesPerson(
			SpProcessContext spProcessContext) {
		DlApplication dlApplication = spProcessContext.getDlApplication();
		Person applicant = dlApplication.getApplicant();
		SalesPersonApplication salesPersonApplication = spProcessContext
				.getSalesPersonApplication();
		VehicleSalesPerson vehicleSalesPerson = salesPersonApplication
				.getApplicant();
		vehicleSalesPerson.setBirthDate(applicant.getBirthDate());
		vehicleSalesPerson.setCurrentName(applicant.getCurrentName());
		//		vehicleSalesPerson.setDocuments(applicant.getDocuments());
		vehicleSalesPerson.setDriverLicense(applicant.getDriverLicense());
		//		vehicleSalesPerson.setEffectiveEndDate(applicant.getEffectiveEndDate());
		//		vehicleSalesPerson.setEffectiveStartDate(applicant.getEffectiveStartDate());
		vehicleSalesPerson.setEyeColorCode(applicant.getEyeColorCode());
		vehicleSalesPerson.setGenderChanged(applicant.isGenderChanged());
		vehicleSalesPerson.setGenderCode(applicant.getGenderCode());
		vehicleSalesPerson.setHairColorCode(applicant.getHairColorCode());
		vehicleSalesPerson.setHeightInFeet(applicant.getHeightInFeet());
		vehicleSalesPerson.setHeightInInch(applicant.getHeightInInch());
		//vehicleSalesPerson.setMedicalExpirationDate(applicant.getMedicalExpirationDate());
		//		vehicleSalesPerson.setMinor(applicant.getMinor());
		vehicleSalesPerson.setPersonNames(applicant.getPersonNames());
		//		vehicleSalesPerson.setPreviousLicenseNumber(applicant.getPreviousLicenseNumber());
		//		vehicleSalesPerson.setPreviousLicenses(applicant.getPreviousLicenses());
		vehicleSalesPerson.setPreviousName(applicant.getPreviousName());
		//vehicleSalesPerson.setResidentId(applicant.getResidentId());
		vehicleSalesPerson.setWeight(applicant.getWeight());
		//vehicleSalesPerson.setDuplicateLicenseNumberOfAniChangeInquiry(applicant.getDuplicateLicenseNumberOfAniChangeInquiry());
		vehicleSalesPerson.setIdCard(applicant.getIdCard());
		//vehicleSalesPerson.setId(applicant.getId());
		vehicleSalesPerson
				.addAddress(applicant.getAddress(AddressType.MAILING));
		//		vehicleSalesPerson.addAddress(applicant.getAddress(AddressType.RESIDENTIAL));
		//		vehicleSalesPerson.addAddress(applicant.getAddress(AddressType.HEADQUARTERS_REFUND));
		//		vehicleSalesPerson.addExistingAddress(applicant.getExistingAddress(AddressType.MAILING));
		//		vehicleSalesPerson.addExistingAddress(applicant.getExistingAddress(AddressType.RESIDENTIAL));
		//		vehicleSalesPerson.addExistingAddress(applicant.getExistingAddress(AddressType.HEADQUARTERS_REFUND));
		//		vehicleSalesPerson.addNonAddressLocator(applicant.getNonAddressLocator(NonAddressType.COMPANY_PHONE));
		//		vehicleSalesPerson.addNonAddressLocator(applicant.getNonAddressLocator(NonAddressType.HOME_EMAIL));
		//		vehicleSalesPerson.addNonAddressLocator(applicant.getNonAddressLocator(NonAddressType.HOME_FAX));
		vehicleSalesPerson.addNonAddressLocator(applicant
				.getNonAddressLocator(NonAddressType.HOME_PHONE));
		// TODO: dlApplication.getApplicationDate() is coming null. It is being used in GenerateSequenceAndDafNoActivty to populate the process history.
		salesPersonApplication.setApplicationDate(dlApplication
				.getApplicationDate());// NOTE: assuming that application date for sales person application is same as process date given on HQ inquiry page.	
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.app.activity.impl.SubprocessActivity#preSubprocessExecute(gov.ca.dmv.ease.app.context.impl.ProcessContext, gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	@Override
	protected void preSubprocessExecute(ProcessContext processContext,
			ProcessContext subProcessContext) {
		if (processContext instanceof DlaProcessContext) {
]]>
</codefragment>
</duplication>
<duplication lines="74" tokens="226">
<file line="44" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\DriversLicenseTerminationUpdateConverterTest.java"/>
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\MiscDriversLicenseUpdateConverterTest.java"/>
<codefragment>
<![CDATA[
	private MiscDriverLicenseUpdateRequestEcs aRequestEcs;
	private UserContext userContextFixture = null;
	private DlActionTermination dlActionTerminationFixture = null;
	
	/**
	 * Load user context.
	 */
	private void initUserContextFixture() {
		// userContextFixture = (UserContext) EaseApplicationContext.getApplicationContext().getBean("userContext");
		userContextFixture = new UserContext();
		userContextFixture.setOfficeId("130");
		userContextFixture.setTechId("BT");
		userContextFixture.setTtc("38U");

	}

	
	private void initDlActionTerminationFixture() {

		dlActionTerminationFixture = new DlActionTermination();

		Person driver = new Person();
		PersonName personName = new PersonName();
		personName.setLastName("WILSON");
		driver.setCurrentName(personName);

		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("N6143076");

		driver.setDriverLicense(driverLicense);

		driver.setCurrentName(personName);

		driver.setDriverLicense(driverLicense);

		CodeSetElement terminationAuthorityCode = new CodeSetElement();

		terminationAuthorityCode.setCode("1");

		dlActionTerminationFixture
		.setTerminationAuthorityCode(terminationAuthorityCode);
		
		CodeSetElement  originalAuthoritySectionCode = new CodeSetElement();

		originalAuthoritySectionCode.setCode("1234567");
		
		dlActionTerminationFixture
				.setOriginalAuthoritySection(originalAuthoritySectionCode);

		dlActionTerminationFixture.setDriver(driver);

		dlActionTerminationFixture
				.setOriginalActionEffectiveDate(EcsConverterHelper.convertStringToDate(
								newOriginalActionEffectiveDate_MMDDYY,
								EcsConverterHelper.FORMATTER_MM_DD_YY));

		dlActionTerminationFixture
				.setLicenseSurrenderedProcessDate(EcsConverterHelper.convertStringToDate(
								newLicenseSurrenderedProcessDate_MMDDYY,
								EcsConverterHelper.FORMATTER_MM_DD_YY));

		CodeSetElement licenseLocation = new CodeSetElement();
		licenseLocation.setCode("L");
		dlActionTerminationFixture.setLicenseLocation(licenseLocation);
	}

	@Override
	protected void setUp() {

		initUserContextFixture();
		initDlActionTerminationFixture();
	}

	private void createRequest() {
]]>
</codefragment>
</duplication>
<duplication lines="52" tokens="226">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule281.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule282.java"/>
<codefragment>
<![CDATA[
public class DlaRule282 extends RecordCondition {

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			if (RecordConditionRulesUtil.checkExistingRestrictions(
					eliRecord.getDriverLicense(), RESTRICTIONS_LIST)) {
				//If record restrictions are any of 04, 51, 52, 91, 92, 32, 03, 08, 
				//18, 35, 36, 37, 54, 55, 56, 57, 77, 78, 90, 94, 96, 99.
				if (RecordConditionRulesUtil.isInquiryClassCommercial(
						eliRecord.getEchoedDriverLicense())) {
					//If class of inquiry is A or B or C.
					if (!EaseUtil.isNullOrBlank(eliRecord.getOriginalApplicationTtc())
							&& RecordConditionRulesUtil.isOriginalTtcMatchToAnyOf(
									eliRecord, DLC, DLD, DLA, DLE)) {
						//If original TTC was DLC, DLD, DLA, DLE.
						return Boolean.TRUE;
					}
				}
				else if (eliRecord.getDriverLicense() != null 
						&& RecordConditionRulesUtil.isExistingClassCommercial(
								eliRecord.getDriverLicense())) {
					//If class of record is A or B or C.
					if (!EaseUtil.isNullOrBlank(eliRecord.getOriginalApplicationTtc())
							&& RecordConditionRulesUtil.isOriginalTtcMatchToAnyOf(
									eliRecord, DLD, DLA, DLE)) {
						//If original TTC was DLD, DLA, DLE.
						return Boolean.TRUE;
					}
				}
				else if (RecordConditionRulesUtil.isInquiryClassCommercial(
						eliRecord.getDriverLicense())) {
					//If pending class of inquiry is A or B or C in segment A2.
					if (EaseUtil.isNullOrBlank(eliRecord.getEchoedDriverLicense()) 
							|| (EaseUtil.isNullOrBlank(eliRecord
									.getEchoedDriverLicense().getAppliedLicenseClasses()))
									|| eliRecord.getEchoedDriverLicense()
									.getAppliedLicenseClasses().size() == 0) {
						//If applied license class not present.
						return Boolean.TRUE;
					}
				}
			}
		}
		return Boolean.FALSE;
	}
	
}
]]>
</codefragment>
</duplication>
<duplication lines="63" tokens="221">
<file line="37" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\convert\impl\DlInfoRequestReceiptDocumentConverter.java"/>
<file line="63" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlInfoRequestReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private static final String TRAINING_ELEMENT = "ZBPTRNGV";
	/** The Constant SYSTEM_DATE_ELEMENT. */
	private static final String SYSTEM_DATE_ELEMENT = "ZBPCSXDT";
	/** The Constant AMOUNT_PAID_ELEMENT. */
	private static final String AMOUNT_PAID_ELEMENT = "ZBPAMTPD";
	/** The Constant COMMENTS_ELEMENT. */
	private static final String COMMENTS_ELEMENT = "ZBPCMNTS";
	/** The Constant LICENSCE_TEXT_ELEMENT. */
	private static final String LICENSCE_TEXT_ELEMENT = "ZBPLICHV";
	/** The Constant DL_ID_NUMBER_ELEMENT. */
	private static final String DL_ID_NUMBER_ELEMENT = "ZBPLIC_V";
	/** The Constant AMOUNT_DUE_ELEMENT. */
	private static final String AMOUNT_DUE_ELEMENT = "ZBPAMTDU";
	/** The Constant AMOUNT_CASH_ELEMENT. */
	private static final String AMOUNT_CASH_ELEMENT = "ZBPAMTCA";
	/** The Constant MODE_ELEMENT. */
	private static final String MODE_ELEMENT = "ZBPMODSV";
	/** The Constant AMOUNT_CHECK_ELEMENT. */
	private static final String AMOUNT_CHECK_ELEMENT = "ZBPAMTCK";
	/** The Constant BUNDLE_NUMBER_ELEMENT. */
	private static final String BUNDLE_NUMBER_ELEMENT = "ZBPBLOG_";
	/** The Constant AMOUNT_CREDIT_ELEMENT. */
	private static final String AMOUNT_CREDIT_ELEMENT = "ZBPAMTCR";
	/** The Constant AMOUNT_CREDIT_CARD_ELEMENT. */
	private static final String AMOUNT_CREDIT_CARD_ELEMENT = "ZBPCCAMT";
	/** The Constant ADJV_CREDIT_ELEMENT. */
	private static final String ADJV_CREDIT_ELEMENT = "ZBPADJV";
	/** The Constant ADJAM_CREDIT_ELEMENT. */
	private static final String ADJAM_CREDIT_ELEMENT = "ZBPADJAM";
	/** The Constant CCSAL_CREDIT_ELEMENT. */
	private static final String CCSAL_CREDIT_ELEMENT = "ZBPCCSAL";
	/** The Constant NUMBER_CREDIT_ELEMENT. */
	private static final String NUMBER_CREDIT_ELEMENT = "ZBPCCNBR";
	/** The Constant EXPIRE_CREDIT_ELEMENT. */
	private static final String EXPIRE_CREDIT_ELEMENT = "ZBPCCEXP";
	/** The Constant AUTHORIZATION_CREDIT_ELEMENT. */
	private static final String AUTHORIZATION_CREDIT_ELEMENT = "ZBPCCAUT";
	/** The Constant BATCH_CREDIT_ELEMENT. */
	private static final String BATCH_CREDIT_ELEMENT = "ZBPCCBAT";
	/** The Constant OFFICE_NAME_ELEMENT. */
	private static final String OFFICE_NAME_ELEMENT = "ZBPOFFNA";
	/** The Constant OFFICE_ID_ELEMENT. */
	private static final String OFFICE_ID_ELEMENT = "ZBPOFFID";
	/** The Constant WORK_DATE_ELEMENT. */
	private static final String WORK_DATE_ELEMENT = "ZBPWKSDT";
	/** The Constant KEYERS_ID_ELEMENT. */
	private static final String KEYERS_ID_ELEMENT = "ZBPEMPID";
	/** The Constant CASHIER_SEQUENCE_ELEMENT. */
	private static final String CASHIER_SEQUENCE_ELEMENT = "ZBPCASQ_";
	/** The Constant TTC_ELEMENT. */
	private static final String TTC_ELEMENT = "ZBPTTC";
	/** The Constant TRANSACTION_VALUE_ELEMENT. */
	private static final String TRANSACTION_VALUE_ELEMENT = "ZBPTRNV";
	/** The Constant DL_MODE_ELEMENT. */
	private static final String DL_MODE_ELEMENT = "ZBPCMSET";
	/** The Constant DOCUMENT_1_TEMPLATE_NAME. */
	private static final String DOCUMENT_1_TEMPLATE_NAME = "sdp0036.xml";
	/** The Constant DOCUMENT_2_TEMPLATE_NAME. */
	private static final String DOCUMENT_2_TEMPLATE_NAME = "sdp0034.xml";
	/** The Constant LICENSCE_TEXT. */
	private static final String LICENSCE_TEXT = "LIC#";
	/** The Constant CASHBACK_ELEMENT. */
	private static final String CASHBACK_ELEMENT = "ZBPNETAC";
]]>
</codefragment>
</duplication>
<duplication lines="45" tokens="220">
<file line="163" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="487" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateDataB() {
		Date currentDate = new Date();
		String systemDate = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_MM_dd_yy);
		String[][] dataArray = new String[][] {
				{ IPrintConverterConstants.INS_PERMIT_HEADER_ELEMENT,
						"PROVISIONAL COMMERCIAL INSTRUCTION PERMIT" },
				{ IPrintConverterConstants.INS_PERMIT_DLORID_ELEMENT,
						"I1234567" },
				{
						IPrintConverterConstants.INS_PERMIT_INTERIM_PERMIT_CLASS_1_ELEMENT,
						"A" },
				{ IPrintConverterConstants.AMPERSAND_ELEMENT,
						IPrintConverterConstants.AMPERSAND },
				{
						IPrintConverterConstants.INS_PERMIT_INTERIM_PERMIT_CLASS_2_ELEMENT,
						"M" },
				{ IPrintConverterConstants.INS_PERMIT_ENDORSEMENT_TEXT_ELEMENT,
						"--P S T X H" },
				{ IPrintConverterConstants.INS_PERMIT_ISSUE_DATE_ELEMENT,
						systemDate },
				{ IPrintConverterConstants.INS_PERMIT_OFFICE_ID_ELEMENT, "130" },
				{ IPrintConverterConstants.INS_PERMIT_KEYED_BY_ELEMENT, "JA" },
				{ IPrintConverterConstants.INS_PERMIT_LRE_ID_ELEMENT, "601" },
				{ IPrintConverterConstants.INS_PERMIT_EXPIRATION_DATE_ELEMENT,
						"04-26-10" },
				{ IPrintConverterConstants.INS_PERMIT_PHOTO_NAME_ELEMENT,
						"Brad Miller" },
				{ IPrintConverterConstants.INS_PERMIT_PHOTO_ADDRESS_ELEMENT,
						"332 Photo Info Address" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_CITY_ELEMENT,
						"Sacramento" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_STATE_ELEMENT,
						"CA" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_ZIP_ELEMENT,
						"95815" },
				{ IPrintConverterConstants.INS_PERMIT_GENDER_ELEMENT, "M" },
				{ IPrintConverterConstants.INS_PERMIT_HAIR_COLOR_ELEMENT, "BLK" },
				{ IPrintConverterConstants.INS_PERMIT_EYE_COLOR_ELEMENT, "BLK" },
				{ IPrintConverterConstants.INS_PERMIT_HEIGHT_IN_FEET_ELEMENT,
						"5" },
				{ IPrintConverterConstants.INS_PERMIT_HEIGHT_IN_INCH_ELEMENT,
						"10" },
				{ IPrintConverterConstants.INS_PERMIT_WEIGHT_ELEMENT, "150" },
				{ IPrintConverterConstants.INS_PERMIT_BIRTHDATE_ELEMENT,
]]>
</codefragment>
</duplication>
<duplication lines="39" tokens="217">
<file line="120" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\PhotoRetakeCNADocumentRequestValidatorTest.java"/>
<file line="125" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\PhotoRetakeNotificationDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		driverRecordAppFixture = new DriverRecordUpdateApplication();
		driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		// PhotoInformation object
		photoInformation = new PhotoInformation();
		photoInformation.setPhotoName("YOUNG ONE");
		Address photoAddress = new Address(AddressType.MAILING);
		photoAddress.setLine1("2007");
		photoAddress.setLine2("Arden Way");
		photoAddress.setCity("Sacramento");
		CodeSetElement photoAddressState = new CodeSetElement();
		photoAddressState.setCode("CA");
		photoAddressState.setName("California");
		photoAddressState.setDescription("California");
		photoAddress.setStateCode(photoAddressState);
		photoAddress.setZip("95825");
		photoInformation.setPhotoAddress(photoAddress);
		driverLicense.setPhotoInformation(photoInformation);
		IdCard idCard = new IdCard();
		idCard.setIdNumber("I8005638");
		// Person object
		person = new Person();
		DateFormat format = new SimpleDateFormat("MM-dd-yy");
		Date date = null;
		try {
			date = format.parse("08-15-47");
		}
		catch (ParseException e) {
			LOGGER.error(e);
		}
		PersonName currentName = new PersonName();
		currentName.setName("Tiger Woods");
		PersonName previousName = new PersonName();
		previousName.setName("Cheeta Woods");
		person.setCurrentName(currentName);
		person.setPreviousName(previousName);
		person.setBirthDate(date);
		person.setIdCard(idCard);
		person.setDriverLicense(driverLicense);
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="217">
<file line="81" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\CdlisNdrReportDocumentRequestTusTest.java"/>
<file line="84" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\PdpsNdrReportDocumentRequestTusTest.java"/>
<codefragment>
<![CDATA[
	public void testPdpsNdrReportDocumentRequestTus() {
		Assert.assertNotNull(requestFixture);
		Assert.assertNotNull(requestFixture.getUserContext());
		Assert.assertNotNull(requestFixture.getDlApplication());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getDriverLicense());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getDriverLicense().getPhotoInformation());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getAddress(AddressType.RESIDENTIAL));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getAddress(AddressType.MAILING));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getExistingAddress(AddressType.RESIDENTIAL));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getExistingAddress(AddressType.MAILING));
		Assert.assertNotNull(requestFixture.getDlApplication()
				.getVoterRegistationRequested());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getDriverLicense().getPhotoInformation().getPhotoAddress());
		Assert
				.assertNotNull(requestFixture.getDlApplication()
						.getPdpsRecords());
]]>
</codefragment>
</duplication>
<duplication lines="29" tokens="217">
<file line="63" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\DlFeeProcessContext.java"/>
<file line="101" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\SsnInquiryProcessContext.java"/>
<codefragment>
<![CDATA[
		aniResults.add(aniRecord);
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsnServiceVerificationCode(new CodeSetElement());
		LegalPresenceDocument legalPresenceDocument = new LegalPresenceDocument();
		legalPresenceDocument.setVerificationCode(new CodeSetElement());
		List <Document> list = new ArrayList <Document>();
		Passport passport = new Passport();
		list.add(ssnDocument);
		list.add(legalPresenceDocument);
		list.add(passport);
		person.setDocuments(list);
		getDlApplication().setApplicationTypeCode(
				new CodeSetElement("", "", ""));
		Address mailingAddress = new Address(AddressType.MAILING);
		Address residenceAddress = new Address(AddressType.RESIDENTIAL);
		person.addAddress(mailingAddress);
		person.addAddress(residenceAddress);
		Invoice invoice = new Invoice();
		List <InvoiceItem> items = new ArrayList <InvoiceItem>();
		invoice.setInvoiceItems(items);
		List <Payment> payments = new ArrayList <Payment>();
		invoice.setPayments(payments);
		CashPayment cashPayment = new CashPayment();
		payments.add(cashPayment);
		CheckPayment checkPayment = new CheckPayment();
		payments.add(checkPayment);
		DebitPayment debitPayment = new DebitPayment();
		payments.add(debitPayment);
		getDlApplication().setInvoice(invoice);
]]>
</codefragment>
</duplication>
<duplication lines="39" tokens="214">
<file line="120" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\PhotoRetakeCNADocumentRequestValidatorTest.java"/>
<file line="130" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\VoterRegisterationRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		dlApplicationFixture = new DlApplication();
		driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		// PhotoInformation object
		photoInformation = new PhotoInformation();
		photoInformation.setPhotoName("YOUNG ONE");
		Address photoAddress = new Address(AddressType.MAILING);
		photoAddress.setLine1("2007");
		photoAddress.setLine2("Arden Way");
		photoAddress.setCity("Sacramento");
		CodeSetElement photoAddressState = new CodeSetElement();
		photoAddressState.setCode("CA");
		photoAddressState.setName("California");
		photoAddressState.setDescription("California");
		photoAddress.setStateCode(photoAddressState);
		photoAddress.setZip("95825");
		photoInformation.setPhotoAddress(photoAddress);
		driverLicense.setPhotoInformation(photoInformation);
		IdCard idCard = new IdCard();
		idCard.setIdNumber("I8005638");
		// Person object
		person = new Person();
		DateFormat format = new SimpleDateFormat("MM-dd-yy");
		Date date = null;
		try {
			date = format.parse("08-15-47");
		}
		catch (ParseException e) {
			LOGGER.error(e);
		}
		PersonName currentName = new PersonName();
		currentName.setName("Tiger Woods");
		PersonName previousName = new PersonName();
		previousName.setName("Cheeta Woods");
		person.setCurrentName(currentName);
		person.setPreviousName(previousName);
		person.setBirthDate(date);
		person.setIdCard(idCard);
		person.setDriverLicense(driverLicense);
]]>
</codefragment>
</duplication>
<duplication lines="79" tokens="214">
<file line="52" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DriverLicenseTerminationUpdateRequestEcs.java"/>
<file line="50" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\MiscDriverLicenseUpdateRequestEcs.java"/>
<codefragment>
<![CDATA[
		setMessageConverter(aMiscDriverLicenseUpdateConverter);

	}

	public DlActionTermination getDlActionTermination() {
		return this.dlActionTermination;
	}

	public void setDlActionTermination(DlActionTermination dlActionTermination) {
		this.dlActionTermination = dlActionTermination;
	}

	public String getTerminationAuthorityCode() {

		String terminationAuthorityCode = this.dlActionTermination
				.getTerminationAuthorityCode().getCode();

		if (terminationAuthorityCode.equals("1"))
			return "13362  ";
		else
			return "16480A2";
	}

	public String getLastName() {

		return this.dlActionTermination.getDriver().getCurrentName()
				.getLastName().substring(0, 3);

	}

	public String getDlOrIdCardNumber() {

		return this.dlActionTermination.getDriver().getDriverLicense()
				.getLicenseNumber();

	}

	public String getOriginalAuthoritySelection() {

		return this.dlActionTermination.getOriginalAuthoritySection().getCode();

	}

	public Date getLicenseSurrenderedProcessDate() {

		return this.dlActionTermination.getLicenseSurrenderedProcessDate();

	}

	public Date getOriginalActionEffectiveDate() {

		return this.dlActionTermination.getOriginalActionEffectiveDate();

	}

	public String getLicenseLocation() {

		String licenseLocation = this.dlActionTermination.getLicenseLocation()
				.getCode();

		if (licenseLocation.equals("L"))
			return "60";

		else if (licenseLocation.equals("S"))
			return "75";

		else
			return " ";

	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see gov.ca.dmv.ease.ecs.request.impl.SynchronousEcsRequest#execute()
	 */

	@Override
	public FireAndForgetReceipt execute() {
]]>
</codefragment>
</duplication>
<duplication lines="50" tokens="212">
<file line="81" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\DlEndorsementsAndCategoriesValidator.java"/>
<file line="622" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\HeadQuartersInquiryRules.java"/>
<codefragment>
<![CDATA[
			if (!isError) {
				isError = !hasValidCategoriesWithClass(
						DlEndorsementsCategories.COMMERCIAL_CLASS_C_1
								.getCategories(), categories);
				isError = !hasValidCategoriesWithClass(
						DlEndorsementsCategories.COMMERCIAL_CLASS_C_2
								.getCategories(), categories);
			}
			break;
		case NON_COMMERCIAL_CLASS_A:
			isError = !hasValidEndorsements(endorsements,
					DlEndorsementsCategories.NON_COMMERCIAL_CLASS_D_1
							.getEndorsements());
			if (!isError) {
				isError = !hasValidCategoriesWithClass(
						DlEndorsementsCategories.NON_COMMERCIAL_CLASS_D_1
								.getCategories(), categories);
				isError = !hasValidCategoriesWithClass(
						DlEndorsementsCategories.NON_COMMERCIAL_CLASS_D_2
								.getCategories(), categories);
			}
			break;
		case NON_COMMERCIAL_CLASS_B:
			isError = !hasValidEndorsements(endorsements,
					DlEndorsementsCategories.NON_COMMERCIAL_CLASS_E
							.getEndorsements());
			if (!isError)
				isError = !hasValidCategoriesWithClass(
						DlEndorsementsCategories.NON_COMMERCIAL_CLASS_E
								.getCategories(), categories);
			break;
		case NON_COMMERCIAL_CLASS_C:
			isError = !hasValidEndorsements(endorsements,
					DlEndorsementsCategories.NON_COMMERCIAL_CLASS_F
							.getEndorsements());
			if (!isError)
				isError = !hasValidCategoriesWithClass(
						DlEndorsementsCategories.NON_COMMERCIAL_CLASS_F
								.getCategories(), categories);
			break;
		case MOTOR_CYCLE:
			isError = !hasValidEndorsements(endorsements,
					DlEndorsementsCategories.NON_COMMERCIAL_CLASS_M
							.getEndorsements());
			if (!isError)
				isError = !hasValidCategoriesWithClass(
						DlEndorsementsCategories.NON_COMMERCIAL_CLASS_M
								.getCategories(), categories);
			break;
		}
]]>
</codefragment>
</duplication>
<duplication lines="27" tokens="210">
<file line="343" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\SearchPersonByNumberAndLastNameConverter.java"/>
<file line="457" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\SearchPersonByNumberConverter.java"/>
<codefragment>
<![CDATA[
				startPos, startPos += 1); // MINOR GUARANTOR CODE
		String classOfRecord = getSubString(anInboundMessagePayload, startPos,
				startPos += 2);
		elements.put("CLASS OF RECORD", classOfRecord);// CLASS OF RECORD
		elements.put("MAIL ADDRESS", getSubString(anInboundMessagePayload,
				startPos, startPos += 35));// MAIL ADDRESS
		elements.put("MAIL CITY", getSubString(anInboundMessagePayload,
				startPos, startPos += 13));// MAIL CITY
		elements.put("MAIL ZIP", getSubString(anInboundMessagePayload,
				startPos, startPos += 5));// MAIL ZIP
		elements.put("GENDER", getSubString(anInboundMessagePayload, startPos,
				startPos += 1)); // SEX 
		elements.put("HAIR", getSubString(anInboundMessagePayload, startPos,
				startPos += 1)); // HAIR
		elements.put("EYES", getSubString(anInboundMessagePayload, startPos,
				startPos += 1)); // EYES
		elements.put("HEIGHT", getSubString(anInboundMessagePayload, startPos,
				startPos += 3)); // HEIGHT
		elements.put("WEIGHT", getSubString(anInboundMessagePayload, startPos,
				startPos += 3)); // WEIGHT
		elements.put("BIRTH DATE", getSubString(anInboundMessagePayload,
				startPos, startPos += 6)); // BIRTH DATE
		elements.put("RESIDENCE ADDRESS", getSubString(anInboundMessagePayload,
				startPos, startPos += 35));// RESIDENCE ADDRESS
		elements.put("RESIDENCE CITY", anInboundMessagePayload.substring(
				startPos, startPos += 13));// RESIDENCE CITY 
		String dlExpirationCode = getSubString(anInboundMessagePayload,
]]>
</codefragment>
</duplication>
<duplication lines="46" tokens="209">
<file line="74" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\SendFailureToAppearInformationConverterTest.java"/>
<file line="75" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\SendFailureToPayInformationConverterTest.java"/>
<codefragment>
<![CDATA[
	@Before
	public void setUp() throws Exception {
	}

	/**
	 * @throws java.lang.Exception
	 */
	@After
	public void tearDown() throws Exception {
	}

	/**
	 * Test method for {@link gov.ca.dmv.ease.ecs.convert.impl.SendFailureToPayInformationConverter#createMessage(gov.ca.dmv.ease.ecs.request.IEcsRequest)}.
	 */
	@Test
	public void testCreateMessage() {
		userContext = (UserContext) EaseApplicationContext
				.getApplicationContext().getBean("userContext");
		userContext.setTtc("FCP");
		userContext.setTechId("BT");
		userContext.setOfficeId("130");
		Calendar workDate = Calendar.getInstance();
		workDate.set(2011, Calendar.NOVEMBER, 15);
		userContext.setWorkDate(workDate.getTime());
		
		person = new Person();
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I3077624");
		
		PersonName currentName = new PersonName();
		currentName.setLastName("PINTU");
		currentName.setFirstName("PATEL");
		currentName.setMiddleName("J");
		
		Calendar birthDate = Calendar.getInstance();
		birthDate.set(1958, Calendar.DECEMBER, 21);
		
		person.setDriverLicense(driverLicense);
		person.setCurrentName(currentName);
		person.setBirthDate(birthDate.getTime());
		
		citationDetail = new CitationDetail();
		Calendar violateDate = Calendar.getInstance();
		violateDate.set(2010, Calendar.FEBRUARY, 02);
		
		citationDetail.setDocketNumber("2TEST");
]]>
</codefragment>
</duplication>
<duplication lines="28" tokens="209">
<file line="149" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\CustomerInfoProcessContext.java"/>
<file line="63" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\DlFeeProcessContext.java"/>
<codefragment>
<![CDATA[
		getDlApplication().setApplicant(person);
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsnServiceVerificationCode(new CodeSetElement());
		LegalPresenceDocument legalPresenceDocument = new LegalPresenceDocument();
		legalPresenceDocument.setVerificationCode(new CodeSetElement());
		List <Document> list = new ArrayList <Document>();
		Passport passport = new Passport();
		list.add(ssnDocument);
		list.add(legalPresenceDocument);
		list.add(passport);
		person.setDocuments(list);
		getDlApplication().setApplicationTypeCode(
				new CodeSetElement("", "", ""));
		Address mailingAddress = new Address(AddressType.MAILING);
		Address residenceAddress = new Address(AddressType.RESIDENTIAL);
		person.addAddress(mailingAddress);
		person.addAddress(residenceAddress);
		Invoice invoice = new Invoice();
		List <InvoiceItem> items = new ArrayList <InvoiceItem>();
		invoice.setInvoiceItems(items);
		List <Payment> payments = new ArrayList <Payment>();
		invoice.setPayments(payments);
		CashPayment cashPayment = new CashPayment();
		payments.add(cashPayment);
		CheckPayment checkPayment = new CheckPayment();
		payments.add(checkPayment);
		DebitPayment debitPayment = new DebitPayment();
		payments.add(debitPayment);
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="209">
<file line="106" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\CdlisPdpsProcessContext.java"/>
<file line="150" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\HqInquiryProcessContext.java"/>
<codefragment>
<![CDATA[
		person.setIdCard(idCard);
		person.setCurrentName(new PersonName());
		List <PersonName> personNames = new ArrayList <PersonName>();
		personNames.add(new PersonName());
		person.setPersonNames(personNames);
		person.setDriverLicense(new DriverLicense());
		person.getDriverLicense().setAppliedLicenseClasses(
				new ArrayList <CodeSetElement>());
		dlApplication.setApplicant(person);
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsnServiceVerificationCode(new CodeSetElement());
		LegalPresenceDocument legalPresenceDocument = new LegalPresenceDocument();
		legalPresenceDocument.setVerificationCode(new CodeSetElement());
		List <Document> list = new ArrayList <Document>();
		list.add(ssnDocument);
		list.add(legalPresenceDocument);
		person.setDocuments(list);
		Address mailingAddress = new Address(AddressType.MAILING);
		Address residenceAddress = new Address(AddressType.RESIDENTIAL);
		person.addAddress(mailingAddress);
		person.addAddress(residenceAddress);
		Invoice invoice = new Invoice();
		List <InvoiceItem> items = new ArrayList <InvoiceItem>();
		invoice.setInvoiceItems(items);
		List <Payment> payments = new ArrayList <Payment>();
		invoice.setPayments(payments);
]]>
</codefragment>
</duplication>
<duplication lines="46" tokens="207">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule118.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule119.java"/>
<codefragment>
<![CDATA[
public class DlaRule119 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			// If single hit.
			if (RecordConditionRulesUtil.isTypeTransactionCodeMatchToAnyOf(
					processContext, CDA, DAF)) {
				// If current TTC is CDA, DAF.
				if (eliRecord.getOriginalApplicationDate() != null
						&& RecordConditionRulesUtil.isOriginalTtcNotMatchAnyOf(
								eliRecord, DRIVER_LICENSE_APPLICATION_TTC)) {
					// If original TTC is not D*.
					if (eliRecord.getPerson() != null
							&& eliRecord.getPerson().getBirthDate() != null) {
						if (eliRecord.getPerson().getBirthDate().compareTo(
								getDlProcessDate(processContext)) > 0) {
							// If Birth date is after process date
							if (RecordConditionRulesUtil.isFutureIdIssueDate(
									eliRecord, processContext)) {
								// If future ID issue date.
								if (eliRecord.getPerson() != null
										&& eliRecord.getPerson().getIdCard() != null
										&& !EaseUtil.isNullOrBlank(eliRecord
												.getPerson().getIdCard()
												.getFeeDueYear())) {
									// If ID Card Fee Due Year is present.
									return Boolean.TRUE;
								} else if (eliRecord.getFeeRequiredReasonCode() == null
										|| eliRecord.getFeeRequiredReasonCode()
												.hasCodeNotEqualTo(L)) {
									// If FEE REASON CODE is not L.
									return Boolean.TRUE;
								}
							}
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="84" tokens="204">
<file line="47" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\CommonFixtureFactory.java"/>
<file line="46" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\CommonFixtureFactory.java"/>
<codefragment>
<![CDATA[
public final class CommonFixtureFactory {
	/** The EMPT y_ filler. */
	public static char EMPTY_FILLER = ' ';
	/** The FORMATTE r_ ccy y_ m m_ dd. */
	public static String FORMATTER_CCYY_MM_DD = "yyyyMMdd";
	/** The FORMATTE r_ d d_ mm m_ yy. */
	public static String FORMATTER_DD_MMM_YY = "dd-MMM-yy";
	/** The FORMATTE r_ HH_ MM_ SS. */
	public static String FORMATTER_HH_MM_SS = "HHmmss";
	/** The FORMATTE r_ m m_ d d_ yy. */
	public static String FORMATTER_MM_DD_YY = "MMddyy";
	/** The FORMATTER_ yy_ mm_ dd. */
	public static String FORMATTER_YY_MM_DD = "yyMMdd";
	/** The HE x_ seperator. */
	public static int HEX_SEPERATOR = 0x1C;
	/** The PA d_ left. */
	public static int PAD_LEFT = 01;
	/** The PA d_ right. */
	public static int PAD_RIGHT = 02;

	/**
	 * Convert string to date.
	 * 
	 * @param date  the date
	 * @param format the format
	 * 
	 * @return the date
	 */
	public static Date convertStringToDate(String date, String format) {
		DateFormat formatter = new SimpleDateFormat(format);
		Date formattedDate = null;
		try {
			formattedDate = formatter.parse(date);
		}
		catch (ParseException e) {
			e.printStackTrace();
		}
		return formattedDate;
	}

	/**
	 * This method creates a new CodeSetElement.
	 * 
	 * @return the codeSetElement
	 */
	public static CodeSetElement createCodeSetElement() {
		return new CodeSetElement("Code Set Name", "Code Set Value",
				"Code Set Desc");
	}

	/**
	 * This method creates a new codeSetName.
	 * 
	 * @return the codeSetName
	 */
	public static CodeSet createCodeSetName() {
		List <ICodeSetElement> codeSetElements = new ArrayList <ICodeSetElement>();
		codeSetElements.add(createCodeSetElement());
		CodeSet codeSetName = new CodeSet("Code Name",codeSetElements, new Date(), new Date());
		return codeSetName;
	}

	/**
	 * This method creates a new County Code.
	 * 
	 * @return the county code
	 */
	public static String createCountyCode() {
		return "Test Country";
	}

	/**
	 * This method creates a new EliRecord.
	 * 
	 * @return the EliRecord
	 */
	public static EliRecord createEliRecord() {
		EliRecord eliRecord = new EliRecord();
		/*eliRecord.setDriverLicense(DriverLicenseFixtureFactory*/
		/*		.createDriverLicense());
		eliRecord.setLegalPresenceDocument(LegalPresenceFixtureFactory
				.createLegalPresenceDocument());*/
		eliRecord
				.setSocialSecurityDocument(SocialSecurityDocumentFixtureFactory
]]>
</codefragment>
</duplication>
<duplication lines="125" tokens="201">
<file line="188" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\CustomerInfoProcessContext.java"/>
<file line="176" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\DlaProcessContext.java"/>
<codefragment>
<![CDATA[
	public DlaProcessContext(DlApplication dlApplication) {
		setDlApplication(dlApplication);
		aniResults = new ArrayList <AniRecord>();
		lpvRecord = new LpvRecord();
	}

	/**
	 * This method adds the Action Message to the existing list of Action
	 * Messages.
	 * 
	 * @param actionMessage the actionMessages to add
	 */
	public void addActionMessage(String actionMessage) {
		this.getActionMessages().add(actionMessage);
	}

	/**
	 * This method adds the New TTC to the existing list of New TTCs.
	 * 
	 * @param newTtc the new ttc
	 */
	public void addNewTtc(String newTtc) {
		this.getNewTtcs().add(newTtc);
	}

	/**
	 * Gets the action.
	 * 
	 * @return the action
	 */
	public Action getAction() {
		return action;
	}

	/**
	 * Gets the Action Messages.
	 * 
	 * @return the actionMessages
	 */
	public List <String> getActionMessages() {
		return actionMessages;
	}

	/**
	 * Gets the additional os dl info.
	 * 
	 * @return the additional os dl info
	 */
	public Boolean getAdditionalOsDlInfo() {
		return additionalOsDlInfo;
	}

	/**
	 * This method returns a List of Person objects which are found as per ANI
	 * search.
	 * 
	 * @return list of Person Objects
	 */
	public List <AniRecord> getAniRecords() {
		if (aniResults == null) {
			setAniResults(new ArrayList <AniRecord>());
		}
		return aniResults;
	}

	/**
	 * Gets the ani try number.
	 * 
	 * @return the ani try number
	 */
	public Integer getAniTryNumber() {
		return aniTryNumber;
	}

	/**
	 * Gets the cdlis records.
	 * 
	 * @return the cdlisRecords
	 */
	public List <CdlisRecord> getCdlisRecords() {
		return getDlApplication().getCdlisRecords();
	}

	/**
	 * This method returns ResponsePromise object of the Cdlis and Pdps inquiry.
	 * 
	 * @return the cdlis response promise
	 */
	public IResponsePromise getCdlisResponsePromise() {
		return cdlisResponsePromise;
	}

	/**
	 * Gets the cdlis result hits.
	 * 
	 * @return the cdlisResultHits
	 */
	public List <DrivingRecord> getCdlisResultHits() {
		return this.getDlApplication().getCdlisResultHits();
	}

	/**
	 * Gets the cdlis result hits cdu.
	 * 
	 * @return the cdlis result hits cdu
	 */
	public List <DrivingRecord> getCdlisResultHitsCdu() {
		return cdlisResultHitsCdu;
	}

	/**
	 * Gets the cdlis try number.
	 * 
	 * @return the cdlisTryNumber
	 */
	public Integer getCdlisTryNumber() {
		return cdlisTryNumber;
	}

	/**
	 * Gets the current cdlis record.
	 * 
	 * @return the primaryCDLISRecord
	 */
	public CdlisRecord getCurrentCDLISRecord() {
]]>
</codefragment>
</duplication>
<duplication lines="34" tokens="200">
<file line="28" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaQ562Rule.java"/>
<file line="28" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaQ563Rule.java"/>
<codefragment>
<![CDATA[
public class CdaQ563Rule extends AbstractValidateRule {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(ProcessContext processContext) {
		CdaProcessContext cdaProcessContext = (CdaProcessContext) processContext;
		IErrorCollector errorCollector = new ErrorCollector();
		String cdaActivityName = cdaProcessContext.getCurrentActivity()
				.getActivityName();
		Action selectedAction = cdaProcessContext.getSelectedAction();
		if (cdaActivityName != null
				&& cdaActivityName.equalsIgnoreCase("CollectDafRecordActivity")) {
			if (selectedAction != null
					&& (selectedAction.equals(getActionsRegistry().getAction(
							IActionsRegistry.ENTER_ACTION)))) {
				String orignalOperationalMode = null;
				if (cdaProcessContext.getDlApplication()
						.getOriginalProcessHistory() != null
						&& cdaProcessContext.getDlApplication()
								.getOriginalProcessHistory().getUserContext()
								.getOperationalMode() != null) {
					orignalOperationalMode = cdaProcessContext
							.getDlApplication().getOriginalProcessHistory()
							.getUserContext().getOperationalMode().getCode();
				}
				String currentOperationalMode = null;
				if (cdaProcessContext.getUserContext().getOperationalMode() != null) {
					currentOperationalMode = cdaProcessContext.getUserContext()
							.getOperationalMode().getCode();
				}
				Integer dafNumber = cdaProcessContext.getDafNumber();
				String driverLicense = cdaProcessContext
						.getDriverLicenseNumber();
				if ((!("T".equalsIgnoreCase(orignalOperationalMode)))
]]>
</codefragment>
</duplication>
<duplication lines="38" tokens="199">
<file line="107" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\DlOrganDonorReceiptRequestTusTest.java"/>
<file line="124" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\DlPaymentReceiptRequestTusTest.java"/>
<codefragment>
<![CDATA[
		driverLicense.setAppliedLicenseClasses(licenseCodeList);
		//driverLicense.setLicenseTypeCode(licenseTypeCode);
		// adding the SSN Document
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsn("123-45-6789");
		ArrayList <Document> documentsList = new ArrayList <Document>();
		documentsList.add(ssnDocument);
		dlApplnFixture.setDocuments(documentsList);
		// Setting person object
		Person person = new Person();
		DateFormat format = new SimpleDateFormat("MM-dd-yy");
		Date date = null;
		try {
			date = format.parse("08-15-47");
		}
		catch (ParseException e) {
			LOGGER.error(e);
		}
		person.setBirthDate(date);
		PersonName personName = new PersonName();
		personName.setFirstName("Albert");
		personName.setLastName("Einstein");
		personName.setMiddleName("M");
		ArrayList <PersonName> personNamesList = new ArrayList <PersonName>();
		personNamesList.add(personName);
		person.setPersonNames(personNamesList);
		person.setCurrentName(personName);
		//driverLicense.setApplicant(person);
		// setting mailing address
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415");
		mailingAddress.setLine2("1st Ave");
		mailingAddress.setCity("SACRAMENTO");
		mailingAddress.setStateCode(new CodeSetElement("CA","CA","CA"));
		mailingAddress.setZip("95818");
		//person.addAddress(mailingAddress, true);
		dlApplnFixture.setLicense(driverLicense);
	}
]]>
</codefragment>
</duplication>
<duplication lines="28" tokens="199">
<file line="55" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\service\response\mock\impl\AniMockResponse.java"/>
<file line="133" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\service\response\mock\impl\AniMockResponse.java"/>
<codefragment>
<![CDATA[
			driverLicense.setLicenseNumber("I3073843");
			eliRecord.setDriverLicense(driverLicense);
			Person person = eliRecord.getPerson();
			CodeSetElement hairCodeSetElement = new CodeSetElement("BRN",
					"BRN", "BRN");
			CodeSetElement eyeCodeSetElement = new CodeSetElement("BRN", "BRN",
					"BRN");
			CodeSetElement sexCodeSetElement = new CodeSetElement("M", "M", "M");
			person.setHairColorCode(hairCodeSetElement);
			person.setEyeColorCode(eyeCodeSetElement);
			person.setGenderCode(sexCodeSetElement);
			person.setWeight(new Integer(190));
			person.setHeightInFeet(new Integer(6));
			person.setHeightInInch(new Integer(2));
			List<OutOfStateLicense> previousLicenses = new ArrayList<OutOfStateLicense>();
			OutOfStateLicense outOfStateLicense = new OutOfStateLicense();
			outOfStateLicense.setLicenseNumber("I0000000");
			previousLicenses.add(outOfStateLicense);
			person.setPreviousLicenses(previousLicenses);
			Address mailingAddress = new Address(AddressType.MAILING);
			mailingAddress.setCity("SACRAMENTO");
			mailingAddress.setStateCode(new CodeSetElement("CA", "CA", "CA"));
			mailingAddress.setFullAddress("2415 1st AVE");
			mailingAddress.setZip("95818");
			person.addAddress(mailingAddress);
			busResponse = responseFactory
					.createSearchPersonByNameResponseForBus(null, eliRecord);
		} else if ("BILL".equals(searchPersonByNameRequest.getPerson()
]]>
</codefragment>
</duplication>
<duplication lines="35" tokens="198">
<file line="218" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\dl\service\impl\test\IssueDlTaskServiceTest.java"/>
<file line="132" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\docs\service\impl\test\DocumentServiceTest.java"/>
<codefragment>
<![CDATA[
		driverLicense.getAppliedLicenseClasses().add(licenseClassC);
		// adding the SSN Document
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsn("123-45-6789");
		ArrayList <Document> documentsList = new ArrayList <Document>();
		documentsList.add(ssnDocument);
		dlApplnFixture.setDocuments(documentsList);
		// Setting person object
		Person person = new Person();
		DateFormat format = new SimpleDateFormat("MM-dd-yy");
		Date date = null;
		try {
			date = format.parse("08-15-47");
		}
		catch (ParseException e) {
			LOGGER.error(e);
		}
		person.setBirthDate(date);
		PersonName personName = new PersonName();
		personName.setFirstName("Albert");
		personName.setLastName("Einstein");
		personName.setMiddleName("M");
		ArrayList <PersonName> personNamesList = new ArrayList <PersonName>();
		personNamesList.add(personName);
		person.setPersonNames(personNamesList);
		person.setCurrentName(personName);
		// setting mailing address
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415");
		mailingAddress.setLine2("1st Ave");
		mailingAddress.setCity("SACRAMENTO");
		mailingAddress.setStateCode(new CodeSetElement("CA", "CA", "CA"));
		mailingAddress.setZip("95818");
		//person.addAddress(mailingAddress, true);
		dlApplnFixture.setLicense(driverLicense);
]]>
</codefragment>
</duplication>
<duplication lines="33" tokens="198">
<file line="35" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD709Rule.java"/>
<file line="32" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD789Rule.java"/>
<codefragment>
<![CDATA[
public class CdaD789Rule extends AbstractValidateRule {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(ProcessContext processContext) {
		CdaProcessContext cdaProcessContext = (CdaProcessContext) processContext;
		IErrorCollector errorCollector = new ErrorCollector();
		Action selectedAction = cdaProcessContext.getSelectedAction();
		if (selectedAction != null
				&& selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.ENTER_ACTION))) {
			List <CodeSetElement> existingAttachments = cdaProcessContext
					.getDriverLicense().getExistingAttachments();
			List <CodeSetElement> newAttachments = cdaProcessContext
					.getDriverLicense().getNewAttachments();
			List <CodeSetElement> attachments = new ArrayList <CodeSetElement>();
			if (existingAttachments != null) {
				attachments.addAll(existingAttachments);
			}
			if (newAttachments != null) {
				attachments.addAll(newAttachments);
			}
			List <CodeSetElement> existingCategories = cdaProcessContext
					.getDriverLicense().getExistingCategories();
			List <CodeSetElement> newCategories = cdaProcessContext
					.getDriverLicense().getNewCategories();
			List <CodeSetElement> categories = new ArrayList <CodeSetElement>();
			if (existingCategories != null) {
				categories.addAll(existingCategories);
			}
			if (newCategories != null) {
				categories.addAll(newCategories);
			}
]]>
</codefragment>
</duplication>
<duplication lines="54" tokens="197">
<file line="248" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<file line="475" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"051212" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_APPLICATION_INCOMPLETE_MESSAGE,
						"APPLICATION INCOMPLETE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_ID,
						"305" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_DATE,
						"01/05/10" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_MICROGRAPHICS_NUMBER,
						"995" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_EMPLOYEE_ID, "BH" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_1,
						"*****************************************************************" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_2,
						"* P O S S I B L E   D O U B L E S   -   R O U T E   T O   R C A *" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_HEADER_LINE_3,
						"*****************************************************************" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_DOUBLES_LICENSE_NUMBER
]]>
</codefragment>
</duplication>
<duplication lines="53" tokens="197">
<file line="44" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\DriverLicenseFixtureFactory.java"/>
<file line="57" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\DriverLicenseFixtureFactory.java"/>
<codefragment>
<![CDATA[
		dlApplication.setInvoice(invoice);
		return dlApplication;
	}

	/**
	 * This method creates a new DlApplication Object.
	 * 
	 * @return a dlApplication.
	 */
	public static DlApplication createDlApplicationRecordMatchHitForTrue() {
		DlApplication dlApplication = new DlApplication();
		dlApplication.setApplicationNumber("12343456");
		dlApplication.setBusinessObjectId(23l);
		dlApplication.setCreatedBy("122345");
		DriverLicense license = new DriverLicense();
		license.setLicenseNumber("D737373");
		dlApplication.setLicense(license);
		dlApplication.setNewLicenseNumberRequired(true);
		//dlApplication.setDesignate("S");
		return dlApplication;
	}

	/**
	 * This method creates the DriverLicense Object.
	 * 
	 * @return DriverLicense driver license.
	 */
	public static DriverLicense createDriverLicense() {
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setCreatedBy("122345");
		driverLicense.setCreatedDate(new Date());
		driverLicense.setEffectiveDate(new Date());
		driverLicense.setExpirationDate(new Date());
		driverLicense.setExpirationDate(new Date());
		CodeSetElement licenseLocation = new CodeSetElement();
		licenseLocation.setCode("SAC");
		licenseLocation.setName("Sacramento");
		driverLicense.setLicenseLocation(licenseLocation);
		driverLicense.setLicenseStatusCode(new CodeSetElement());
		driverLicense.setLicenseNumber("D737373");
		driverLicense.setLicenseStatusCode(new CodeSetElement());
		return driverLicense;
	}

	/**
	 * Creates a new BusinessObjectFixture object.
	 * 
	 * @return the inventory item
	 */
	public static InventoryItem createInventoryItem() {
		InventoryItem inventoryItem = new InventoryItem();
		CodeSetElement inventoryTypeCode = new CodeSetElement();
		inventoryTypeCode.setCode("D12332345");
]]>
</codefragment>
</duplication>
<duplication lines="55" tokens="196">
<file line="121" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\PersonFixtureFactory.java"/>
<file line="123" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\PersonFixtureFactory.java"/>
<codefragment>
<![CDATA[
		driverLicense.setAppliedLicenseClasses(licenseClassCodes);
		person.setDriverLicense(driverLicense);
		Address address = new Address(AddressType.MAILING);
		CodeSetElement city = new CodeSetElement();
		city.setName(CITY);
		List <Locator> locatorSet = new ArrayList <Locator>();
		locatorSet.add(address);
		//person.addAddress(address, true);
		return person;
	}

	/**
	 * This method creates a new Person for Search Person by Name and Two Pay Load.
	 * 
	 * @return the person
	 */
	public static Person createPersonForSearchPersonByNameTwoPayload() {
		// TWO PAYLOAD
		String CLASS_OF_INQUIRY = "F";
		String LAST_NAME = "ZBROKENX";
		String FIRST_NAME = "CORNELIUS";
		String MIDDLE_INITIAL = "B";
		String SUFFIX = "";
		String BIRTHDATE = "16/02/1954";
		String CITY = "";
		Person person = new Person();
		/* DCS Integration Test */
		// ctx = new
		// FileSystemXmlApplicationContext("classpath*:spring-config.xml");
		// dcsRequestFactory = (DcsRequestFactory)
		// ctx.getBean("RequestFactory");
		DriverLicense driverLicense = new DriverLicense();
		// Employee employee = new Employee();
		// employee.setEmployeeTechId(EMPLOYEE_ID);
		// Transaction transaction = new Transaction();
		// transaction.setEmployee(employee);
		// transaction.setTypeTranscationCode(TYPE_TRANSACTION_CODE);
		// driverLicense.setTransaction(transaction);
		PersonName personName = new PersonName();
		personName.setLastName(LAST_NAME);
		personName.setFirstName(FIRST_NAME);
		personName.setMiddleName(MIDDLE_INITIAL);
		personName.setSuffix(SUFFIX);
		List <PersonName> personNames = new ArrayList <PersonName>();
		personNames.add(personName);
		person.setPersonNames(personNames);
		DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
		Date bdate;
		try {
			bdate = df.parse(BIRTHDATE);
			person.setBirthDate(bdate);
		}
		catch (ParseException e) {
			e.printStackTrace();
		}
]]>
</codefragment>
</duplication>
<duplication lines="45" tokens="195">
<file line="119" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="280" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="761" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		newRestrictionCode1.setCode("56");
		DrivingRestriction newDrivingRestriction1 = new DrivingRestriction();
		newDrivingRestriction1.setRestrictionTypeCode(newRestrictionCode1);
		newDrivingRestriction1.setEffectiveDate(CommonFixtureFactory
				.convertStringToDate("20000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newDrivingRestriction1.setExpirationDate(CommonFixtureFactory
				.convertStringToDate("21000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newRestrictions.add(newDrivingRestriction1);
		//Add New Restriction Code - 29
		CodeSetElement newRestrictionCode2 = new CodeSetElement();
		newRestrictionCode2.setCode("29");
		DrivingRestriction newDrivingRestriction2 = new DrivingRestriction();
		newDrivingRestriction2.setRestrictionTypeCode(newRestrictionCode2);
		newRestrictions.add(newDrivingRestriction2);
		//Add New Restriction Code - 73
		CodeSetElement newRestrictionCode3 = new CodeSetElement();
		newRestrictionCode3.setCode("73");
		DrivingRestriction newDrivingRestriction3 = new DrivingRestriction();
		newDrivingRestriction3.setRestrictionTypeCode(newRestrictionCode3);
		newRestrictions.add(newDrivingRestriction3);
		//Add New Restriction Code - 72
		CodeSetElement newRestrictionCode4 = new CodeSetElement();
		newRestrictionCode4.setCode("72");
		DrivingRestriction newDrivingRestriction4 = new DrivingRestriction();
		newDrivingRestriction4.setRestrictionTypeCode(newRestrictionCode4);
		newRestrictions.add(newDrivingRestriction4);
		DlApplicationFixtureFactory.createNewDrivingRestrictions(
				dlApplicationFixture, newRestrictions);
		requestFixture = new InstructionPermitDocumentRequestTus(
				UserContextFixtureFactory
						.createUserContextForDocumentGeneration(),
				dlApplicationFixture, officeFixture, converterFixture);
		String actualXML = converterFixture
				.convertToDocumentBinding(requestFixture);
		Assert.assertEquals(expectedXml, actualXML);
	}

	/**
	 * Populate data e.
	 *
	 * @return the string[][]
	 */
	private String[][] populateDataE() {
]]>
</codefragment>
</duplication>
<duplication lines="34" tokens="195">
<file line="38" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\activity\dl\business\impl\NameBirthDateChangeActivity.java"/>
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\activity\dl\business\impl\PrintDlRequestDocumentsActivity.java"/>
<codefragment>
<![CDATA[
	@Override
	protected void invokeService(ProcessContext context) {
		DlProcessContext dlProcessContext = (DlProcessContext) context;
		PrintRequestTs tsRequest = new PrintRequestTs(dlProcessContext
				.getUserContext(), dlProcessContext.getDlApplication());
		Set <PrintRequestTypes> printRequestTypes = new HashSet <PrintRequestTypes>();
		if (dlProcessContext.getDlApplication().getDlPrintRequestDocumentCode() != null) {
			String selectedCode = dlProcessContext.getDlApplication()
					.getDlPrintRequestDocumentCode().getCode();
			if (selectedCode != null) {
				if ("1".equals(selectedCode)) {
					printRequestTypes
							.add(PrintRequestTypes.TEMP_OR_INTERIM_LICENSE_LDD0602);
				}
				if ("2".equals(selectedCode)) {
					printRequestTypes
							.add(PrintRequestTypes.INSTRUCTION_PERMIT_LDD0611);
				}
				if ("3".equals(selectedCode)) {
					printRequestTypes
							.add(PrintRequestTypes.TEMP_OR_INTERIM_LICENSE_LDD0602);
				}
				if ("4".equals(selectedCode)) {
					printRequestTypes
							.add(PrintRequestTypes.INSTRUCTION_PERMIT_LDD0611);
					printRequestTypes
							.add(PrintRequestTypes.TEMP_OR_INTERIM_LICENSE_LDD0602);
				}
				//5 Receipt only
			}
			tsRequest.setPrintRequestTypes(printRequestTypes);
			PrintResponseTs tsResponse = cdaTaskService
					.processTestResultsAndIssuanceReferralDocuments(tsRequest);
			if (tsResponse.hasErrors()) {
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="190">
<file line="121" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpProcessingDocumentConverterTest.java"/>
<file line="154" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\FcpProcessingDismissalDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
	private void populateCitationDetail() {
		citationDetail = new CitationDetail();
		citationDetail.setDocketNumber("1234");
		citationDetail.setCourtCode(new CodeSetElement("X", "X", "X"));
		Calendar violateDate = Calendar.getInstance();
		violateDate.set(2010, Calendar.FEBRUARY, 02);
		citationDetail.setViolationDate(violateDate.getTime());
		List<SectionViolated> sectionsViolated = new ArrayList<SectionViolated>();
		sectionViolated = new SectionViolated();
		sectionViolated.setStatuteCode(new CodeSetElement("A", "A", "A"));
		sectionViolated.setSectionViolatedNumber("22350");
		sectionsViolated.add(sectionViolated);
		sectionViolated = new SectionViolated();
		sectionViolated.setStatuteCode(new CodeSetElement("X", "X", "X"));
		sectionViolated.setSectionViolatedNumber("0100");
		sectionsViolated.add(sectionViolated);
		citationDetail.setSectionsViolated(sectionsViolated);
		Calendar convictionDate = Calendar.getInstance();
		convictionDate.set(2010, Calendar.MARCH, 03);
		citationDetail.setConvictionDate(convictionDate.getTime());
		citationDetail.setCourtCode(new CodeSetElement("19100", "19100",
				"19100"));
	}
]]>
</codefragment>
</duplication>
<duplication lines="39" tokens="188">
<file line="26" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\AddressFixtureFactory.java"/>
<file line="26" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\AddressFixtureFactory.java"/>
<codefragment>
<![CDATA[
public final class AddressFixtureFactory {
	private static final String ADDRESS_1_LINE_1 = "2490 1st Avenue";
	private static final String ADDRESS_2_LINE_1 = "4850 Natomas Blvd";
	private static final String ADDRESS_3_LINE_1 = "1476 UPPINGHAM DR";
	private static final String ADDRESS_4_LINE_1 = "2415 1st Ave";
	//Constants
	private static final String ADDRESS_LINE_1 = "12345, folsom blvd";
	private static final String CITY = "Sacaramento";
	private static final String CITY_1 = "THOUSAND OAKS";
	private static final String COUNTY_CODE = "34";
	private static final String COUNTY_CODE_DEFAULT = "00";
	private static final String ZIP_CODE = "95818";
	private static final String ZIP_CODE_1 = "95835";

	/**
	 * This method creates the Address List.
	 * 
	 * @return an Address.
	 */
	public static List <Address> createAddress() {
		Address address = new Address(AddressType.MAILING);
		address.setLine1(AddressFixtureFactory.ADDRESS_1_LINE_1);
		CodeSetElement city = new CodeSetElement();
		city.setName(AddressFixtureFactory.CITY);
		address.setZip(AddressFixtureFactory.ZIP_CODE);
		address.setCity(AddressFixtureFactory.CITY);
		List <Address> addressList = new ArrayList <Address>();
		addressList.add(address);
		return addressList;
	}

	/**
	 * This method creates a Legal Address Object.
	 * 
	 * @return the address
	 */
	public static Address createLegalOwnerAddress() {
		Address address = new Address(AddressType.MAILING);
		address.setLine1(AddressFixtureFactory.ADDRESS_3_LINE_1);
]]>
</codefragment>
</duplication>
<duplication lines="64" tokens="187">
<file line="170" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\InvoiceFixtureFactory.java"/>
<file line="187" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\InvoiceFixtureFactory.java"/>
<codefragment>
<![CDATA[
		invoiceItems.add(InvoiceFixtureFactory.createInvoiceItem());
		invoice.setInvoiceItems(invoiceItems);
		invoice.setTotalFeeWaived(new BigDecimal(0));
		return invoice;
	}

	/**
	 * This method creates a new InvoiceItem.
	 * 
	 * @return the invoice item
	 */
	public static InvoiceItem createInvoiceItem() {
		InvoiceItem invoiceItem = new InvoiceItem();
		invoiceItem.setWaivedAmount(new BigDecimal(1));
		invoiceItem.setFeeWaivedReason("fee waived");
		invoiceItem.setModifiedDate(new Date());
		//invoiceItem.setWaivedAmount(new BigDecimal(10));
		invoiceItem.setFee(InvoiceFixtureFactory.createFee1());
		return invoiceItem;
	}

	/**
	 * This method creates a new Invoice Item.
	 * 
	 * @return the Invoice Item
	 */
	private static InvoiceItem createInvoiceItem1() {
		InvoiceItem invoiceItem = new InvoiceItem();
		invoiceItem.setWaivedAmount(new BigDecimal(1));
		invoiceItem.setFee(InvoiceFixtureFactory.createFee1());
		return invoiceItem;
	}

	/**
	 * @return
	 */
	private static InvoiceItem createInvoiceItemForPaymentEqualFalseCase() {
		InvoiceItem invoiceItem = new InvoiceItem();
		invoiceItem.setWaivedAmount(new BigDecimal(1));
		invoiceItem.setFeeWaivedReason("fee waived");
		invoiceItem.setModifiedDate(new Date());
		//invoiceItem.setWaivedAmount(new BigDecimal(10));
		invoiceItem.setFee(InvoiceFixtureFactory
				.createFeeForPaymentEqualFalseCase());
		return invoiceItem;
	}

	/**
	 * This method creates a new Payment.
	 * 
	 * @return the payment.
	 */
	public static Payment createPayment() {
		Payment payment = new CashPayment();
		return payment;
	}

	/**
	 * Private Constructor.
	 */
	private InvoiceFixtureFactory() {
		// Empty Constructor
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="48" tokens="185">
<file line="21" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule155.java"/>
<file line="23" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule156.java"/>
<codefragment>
<![CDATA[
public class DlaRule156 extends RecordCondition {

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			if (!EaseUtil.isNullOrBlank(getCurrentSsn(processContext))) {
				// If current SSN is present.
				if (eliRecord.getSocialSecurityDocument() != null
						&& !EaseUtil.isNullOrBlank(eliRecord
								.getSocialSecurityDocument().getSsn())) {
					// If record ssn is present.
					if (getCurrentSsn(processContext) != eliRecord
							.getSocialSecurityDocument().getSsn()) {
						// If current SSN is not equal to record ssn.
						if (eliRecord.getDriverLicense() != null) {
							if (RecordConditionRulesUtil
									.hasPendingClassMatchAnyOf(eliRecord, A, B,
											C)) {
								// If pending license classes are A, B, C.
								if (RecordConditionRulesUtil
										.isRecordClassContainsAnyOf(eliRecord
												.getDriverLicense(), A, B, C)) {
									// If existing license classes are
									// commercial.
									if (RecordConditionRulesUtil
											.isChangeInquiry(processContext)) {
										// If change inquiry.
										return Boolean.TRUE;
									} else if (RecordConditionRulesUtil
											.isInitialInquiry(processContext)
											&& code != null && code == DLA) {
										// If Initial ANI inquiry.
										return Boolean.TRUE;
									}
								}
							}
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="52" tokens="185">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule106.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule108.java"/>
<codefragment>
<![CDATA[
public class DlaRule108 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			// If single hit.
			if (RecordConditionRulesUtil.isInitialInquiry(processContext)
					&& !RecordConditionRulesUtil
							.hasAnyMultipleAniHitsPresent(processContext)) {
				// If initial ANI/DL inquiry
				if (RecordConditionRulesUtil.isTypeTransactionCodeMatchAnyOf(
						processContext, DRIVER_LICENSE_APPLICATION_TTC)) {
					// If current TTC is D*.
					if (eliRecord.getDriverLicense() != null
							&& !EaseUtil.isNullOrBlank(eliRecord
									.getDriverLicense()
									.getExistingLicenseClasses())) {
						// If Class of Record present.
						if (RecordConditionRulesUtil.isFutureDlIssueDate(
								eliRecord, processContext)) {
							// If DL Issue Date is after Process date.
							if (eliRecord.getOriginalApplicationDate() != null
									&& getDlProcessDate(processContext) != null) {
								if (eliRecord
										.getOriginalApplicationDate()
										.compareTo(
												getDlProcessDate(processContext)) <= 0) {
									// If original application date is equal to
									// or before the process date.
									return Boolean.TRUE;
								} else if (!EaseUtil.isNullOrBlank(eliRecord
										.getSegments())
										&& !eliRecord
												.isDlPendingSubRecordSegmentAPresent()
										&& !eliRecord
												.isDlPendingSubRecordSegmentBPresent()) {
									// If Pending Segments A and B are not
									// present.
									return Boolean.TRUE;
								}
							}
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="51" tokens="184">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\SocialSecurityDocumentFixtureFactory.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\SocialSecurityDocumentFixtureFactory.java"/>
<codefragment>
<![CDATA[
public final class SocialSecurityDocumentFixtureFactory {
	/**
	 * This method creates the SocialSecurityDocument Object.
	 * 
	 * @return SocialSecurityDocument Social Security Document
	 */
	public static SocialSecurityDocument createSocialSecurityDocument() {
		SocialSecurityDocument socialSecurityDocument = null;
		socialSecurityDocument = new SocialSecurityDocument();
		//FIXME Document no longer contains Person
		//socialSecurityDocument.setPerson(PersonFixtureFactory.createPerson());
		socialSecurityDocument.setEffectiveDate(new Date());
		socialSecurityDocument.setExpirationDate(new Date());
		socialSecurityDocument.setExpirationDate(new Date());
		socialSecurityDocument.setCreatedDate(new Date());
		socialSecurityDocument.setCreatedBy("122345");
		socialSecurityDocument.setSsn("111-11-1111");
		socialSecurityDocument.setDocumentHolderName("JOHN MILLER");
		return socialSecurityDocument;
	}

	/**
	 * This method creates the SocialSecurityDocument Object.
	 */
	public static SocialSecurityDocument createSocialSecurityDocumentFixture() {
		SocialSecurityDocument document = new SocialSecurityDocument();
		document.setSsn("123454545");
		Person person = new Person();
		// Set person name
		PersonName personName = new PersonName();
		personName.setLastName("Driver");
		personName.setFirstName("Keith");
		personName.setMiddleName("M");
		personName.setSuffix("Mr");
		person.setCurrentName(personName);
		person.setBirthDate(new Date());
		//document.setPerson(person);
		return document;
	}

	/**
	 * This method creates a new Social Security Document for Sending CDLIS and PDPS Request.
	 * 
	 * @return the social security document
	 */
	public static SocialSecurityDocument createSocialSecurityDocumentForSendCdlisPdpsRequest() {
		SocialSecurityDocument document = new SocialSecurityDocument();
		document.setSsn("568252659");
		document.setDocumentHolderName("BALL@KIM");
		return document;
	}
]]>
</codefragment>
</duplication>
<duplication lines="46" tokens="183">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule114.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule115.java"/>
<codefragment>
<![CDATA[
public class DlaRule115 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			// If single hit.
			if (RecordConditionRulesUtil.isTypeTransactionCodeMatchToAnyOf(
					processContext, CDA, DAF)) {
				// If current TTC is CDA, DAF.
				if (RecordConditionRulesUtil.isOriginalTtcMatchAnyOf(eliRecord,
						DRIVER_LICENSE_APPLICATION_TTC)) {
					// If Original TTC is D*.
					if (RecordConditionRulesUtil.isPastDlIssueDate(eliRecord,
							processContext)) {
						// If DL Issue Date is on or before Process date.
						if (eliRecord.getFeeRequiredReasonCode() == null
								|| eliRecord.getFeeRequiredReasonCode()
										.hasCodeNotEqualTo(L)) {
							// If FEE REASON CODE is not L.
							return Boolean.TRUE;
						} else if (eliRecord.getDriverLicense() != null
								&& !EaseUtil.isNullOrBlank(eliRecord
										.getDriverLicense().getFeeDueYear())) {
							// If Fee Due Year is present.
							if (eliRecord.getPerson() != null
									&& eliRecord.getPerson().getBirthDate() != null) {
								if (eliRecord
										.getPerson()
										.getBirthDate()
										.compareTo(
												getDlProcessDate(processContext)) > 0) {
									// If Birth date is after process date
									return Boolean.TRUE;
								}
							}
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="57" tokens="182">
<file line="1045" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="40" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisD717Rule.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * D717. For TTC = DLP When processing a Pending application (DLP) and a
	 * name, birth date, gender, or DL # was changed in the initial process on a
	 * DL application then the System will remind the user to make the same
	 * change to the ID
	 * 
	 * @param ttc
	 *            transaction code
	 * @param eliRecord
	 *            data from storage
	 * @param applicant
	 *            applicant data
	 * @param changedBirthDate
	 *            keyed in birthdate
	 * @param changedGender
	 *            keyed in gender change
	 * @param driverLicense
	 *            driver Lic data
	 * @param errorCollector
	 *            the error collector
	 */
	public void D717(String ttc,EliRecord eliRecord, Person applicant, Date changedBirthDate, CodeSetElement changedGender, DriverLicense driverLicense,
			IErrorCollector errorCollector) {
		IdCard idCard = null;
			if (!EaseUtil.isNullOrBlank(eliRecord) ) {
				idCard = eliRecord.getPerson()
						.getIdCard();
			}
		if ("DLP".equalsIgnoreCase(ttc)
				&& idCard != null
				&& (!applicant.getBirthDate()
						.equals(changedBirthDate))) {
			errorCollector
					.register(new EaseValidationException(
							IDataCollectionErrorMessageConstants.CHANGES_MADE_IN_INITIAL_PROCESS_REQUIRE_CHANGES_ON_ID));
		}
		if ("DLP".equalsIgnoreCase(ttc)
				&& idCard != null
				&& (!applicant.getGenderCode()
						.equals(changedGender))) {
			errorCollector
					.register(new EaseValidationException(
							IDataCollectionErrorMessageConstants.CHANGES_MADE_IN_INITIAL_PROCESS_REQUIRE_CHANGES_ON_ID));
		}
		if ("DLP".equalsIgnoreCase(ttc)
				&& idCard != null
				&& driverLicense != null
				&& (!driverLicense.equals(
						idCard.getLicenseNumber()))) {
			errorCollector
					.register(new EaseValidationException(
							IDataCollectionErrorMessageConstants.CHANGES_MADE_IN_INITIAL_PROCESS_REQUIRE_CHANGES_ON_ID));
		}

	}
]]>
</codefragment>
</duplication>
<duplication lines="27" tokens="181">
<file line="116" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\FailureToAppearDCAConverterTest.java"/>
<file line="110" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\FailureToPayDCFConverterTest.java"/>
<codefragment>
<![CDATA[
		this.userContext.setTtc("FTP");
		this.userContext.setOfficeId("130");
		this.userContext.setTechId("BT");
		this.userContext.setRacfId("123");
		this.userContext.setIpAddress("127.0.0.0");
	}

	/**
	 * Test method for createMessage().
	 */
	@Test
	public void testCreateMessageInquiry() {
		Calendar birthCal = Calendar.getInstance();
		birthCal.set(1982, Calendar.SEPTEMBER, 11);
		Calendar violationCal = Calendar.getInstance();
		violationCal.set(2008, Calendar.APRIL, 21);
		Calendar convictionCal = Calendar.getInstance();
		convictionCal.set(2011, Calendar.OCTOBER, 10);
		List <SectionViolated> sectionViolatedList = new ArrayList <SectionViolated>();
		SectionViolated sectionViolated1 = new SectionViolated();
		sectionViolated1.setSectionViolatedNumber("12500A");
		sectionViolated1.setStatuteCode(new CodeSetElement("A", "A", "A"));
		SectionViolated sectionViolated2 = new SectionViolated();
		sectionViolated2.setSectionViolatedNumber("405095");
		sectionViolated2.setStatuteCode(new CodeSetElement("A", "A", "A"));
		sectionViolatedList.add(sectionViolated1);
		sectionViolatedList.add(sectionViolated2);
]]>
</codefragment>
</duplication>
<duplication lines="89" tokens="181">
<file line="197" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ts\dl\service\impl\CdaTaskService.java"/>
<file line="176" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ts\dl\service\impl\EndOfTransactionTaskService.java"/>
<codefragment>
<![CDATA[
	}

	/** 
	 * TCode: NCC ? Send a log message to Network Control Center
	 * @param userContext
	 * @return SendLogMessageToNetworkControlCenterBus
	 * @generated "UML to Java (com.ibm.xtools.transform.uml2.java5.internal.UML2JavaTransform)"
	 */
	private SendLogMessageToNetworkControlCenterResponseBus executeSendLogMessageToNetworkControlCenter(
			IUserContext userContext) {
		SendLogMessageToNetworkControlCenterRequestBus busRequest = new SendLogMessageToNetworkControlCenterRequestBus(
				userContext);
		return this.sendLogMessageToNetworkControlCenterService
				.execute(busRequest);
	}

	/** 
	 * TCode: DPR ? Survey Information Update 10 Year DL History Update Request
	 * @param userContext
	 * @param person
	 * @return UpdateDlHistoryResponseBus
	 * @generated "UML to Java (com.ibm.xtools.transform.uml2.java5.internal.UML2JavaTransform)"
	 */
	private UpdateDlHistoryResponseBus executeUpdateDlHistory(
			IUserContext userContext, Person person) {
		UpdateDlHistoryRequestBus busRequest = new UpdateDlHistoryRequestBus(
				userContext, person);
		return this.updateDlHistoryService.execute(busRequest);
	}

	/** 
	 * TCode: EN2 ? Extended Name Format Update
	 * @param userContext
	 * @param person
	 * @return UpdateExtendedNameIndexResponseBus
	 * @generated "UML to Java (com.ibm.xtools.transform.uml2.java5.internal.UML2JavaTransform)"
	 */
	private UpdateExtendedNameIndexResponseBus executeUpdateExtendedNameIndex(
			IUserContext userContext, Person person) {
		UpdateExtendedNameIndexRequestBus busRequest = new UpdateExtendedNameIndexRequestBus(
				userContext, person);
		return this.updateExtendedNameIndexService.execute(busRequest);
	}

	/** 
	 * TCode: EL1 ? Driver License Complete Update Request
	 * TCode: ELB ? Driver License Pending Update Request
	 * @param userContext
	 * @param dlApplication
	 * @param isElb
	 * @return UpdateHeadquartersSystemResponseBus 
	 * @generated "UML to Java (com.ibm.xtools.transform.uml2.java5.internal.UML2JavaTransform)"
	 */
	private UpdateHeadquartersSystemResponseBus executeUpdateHeadquaterSystem(
			IUserContext userContext, DlApplication dlApplication, boolean isElb) {
		UpdateHeadquartersSystemRequestBus busRequest = new UpdateHeadquartersSystemRequestBus(
				userContext, dlApplication);
		UpdateHeadquartersSystemResponseBus busResponse = null;
		if (isElb) {
			busResponse = this.updateHeadQuartersSystemService
					.executeELB(busRequest);
		}
		else {
			busResponse = this.updateHeadQuartersSystemService
					.executeEL1(busRequest);
		}
		return busResponse;
	}

	/** 
	 * TCode: DPS ? Driver License Problem Driver Update Request
	 * @param userContext
	 * @param dlApplication
	 * @return ProblemDriverUpdateResponseBus 
	 * @generated "UML to Java (com.ibm.xtools.transform.uml2.java5.internal.UML2JavaTransform)"
	 */
	private ProblemDriverUpdateResponseBus executeProblemDriverUpdate(
			IUserContext userContext, DlApplication dlApplication) {
		ProblemDriverUpdateRequestBus busRequest = new ProblemDriverUpdateRequestBus(
				userContext, dlApplication);
		return this.problemDriverUpdateService.execute(busRequest);
	}

	/**
	 * Sets the problemDriverUpdateService
	 *
	 * @param problemDriverUpdateService the problemDriverUpdateService to set
	 */
	public void setProblemDriverUpdateService(
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="180">
<file line="266" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\dl\service\impl\test\IssueDlTaskServiceTest.java"/>
<file line="173" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\docs\service\impl\test\DocumentServiceTest.java"/>
<codefragment>
<![CDATA[
		invoiceFixture = new Invoice();
		InvoiceItem invoiceItem = new InvoiceItem();
		Fee fee = new Fee();
		fee.setAmount(new BigDecimal(28));
		invoiceItem.setFee(fee);
		invoiceItem.setWaivedAmount(new BigDecimal(0));
		List <InvoiceItem> invoiceItemsList = new ArrayList <InvoiceItem>();
		invoiceItemsList.add(invoiceItem);
		invoiceFixture.setInvoiceItems(invoiceItemsList);
		// Cash Payments
		CashPayment cashPayment = new CashPayment();
		cashPayment.setAmount(new BigDecimal(28));
		CheckPayment checkPayment = new CheckPayment();
		checkPayment.setAmount(new BigDecimal(0));
		CreditPayment creditPayment = new CreditPayment();
		creditPayment.setAmount(new BigDecimal(0));
		DebitPayment debitPayment = new DebitPayment();
		debitPayment.setAmount(BigDecimal.TEN);
		List <Payment> paymentsList = new ArrayList <Payment>();
		paymentsList.add(cashPayment);
		paymentsList.add(checkPayment);
		paymentsList.add(creditPayment);
		paymentsList.add(debitPayment);
		invoiceFixture.setPayments(paymentsList);
]]>
</codefragment>
</duplication>
<duplication lines="114" tokens="180">
<file line="32" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\AutomatedDlPage.java"/>
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\MiscellaneousRecordUpdatePage.java"/>
<codefragment>
<![CDATA[
	@Override
	public void renderPreProcessing() {
	}

	@Override
	public void submitPreProcessing() {
	}

	/**
	 * Gets the dlOrIdNumber.
	 * 
	 * @return the dlOrIdNumber
	 */
	public String getDlOrIdNumber() {

		try {
			// return
			// getMedicalReportUpdateApplication().getApplicant().getDriverLicense
			// ().getLicenseNumber();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dlOrIdNumber;

	}

	/**
	 * Sets the dlOrIdNumber.
	 * 
	 * @param dlOrIdNumber
	 *            the new dlOrIdNumber
	 */
	public void setDlOrIdNumber(String dlOrIdNumber) {

		try {
			//getMedicalReportUpdateApplication().getApplicant().getDriverLicense
			// ().setLicenseNumber(dlOrIdNumber);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.dlOrIdNumber = dlOrIdNumber;
	}

	/**
	 * Gets the lastname.
	 * 
	 * @return the lastname
	 */
	public String getLastname() {

		try {
			// return
			// getMedicalReportUpdateApplication().getApplicant().getCurrentName
			// ().getLastname();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.lastname;

	}

	/**
	 * Sets the lastname.
	 * 
	 * @param lastname
	 *            the new lastname
	 */
	public void setLastname(String lastname) {

		try {
			//getMedicalReportUpdateApplication().getApplicant().getCurrentName(
			// ).setLastname(lastname);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.lastname = lastname;
	}

	/**
	 * Gets the dl22mPendingApplication.
	 * 
	 * @return the dl22mPendingApplication
	 */
	public CodeSetElement getDl22mPendingApplication() {

		try {
			// return getDlaProcessContext()
			// .getDl22mPendingApplication().getCode();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dl22mPendingApplication;

	}

	/**
	 * Sets the dl22mPendingApplication.
	 * 
	 * @param dl22mPendingApplication
	 *            the new dl22mPendingApplication
	 */
	public void setDl22mPendingApplication(
			CodeSetElement dl22mPendingApplication) {

		try {
			// setProcessContex(()dl22mPendingApplication);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.dl22mPendingApplication = dl22mPendingApplication;
	}
]]>
</codefragment>
</duplication>
<duplication lines="46" tokens="179">
<file line="397" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="521" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"051212" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_ID,
						"305" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_DATE,
						"01/05/10" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_MICROGRAPHICS_NUMBER,
						"995" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_EMPLOYEE_ID, "BH" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_ISSUANCE_MESSAGE
								+ "1", "STOP BYPASSED - VERIFY RECORD STATUS" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_ISSUANCE_MESSAGE
								+ "2",
]]>
</codefragment>
</duplication>
<duplication lines="49" tokens="178">
<file line="103" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\impl\test\LegalPresenceVerificationRequestEcsTest.java"/>
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\response\impl\test\LegalPresenceVerificationResponseEcsTest.java"/>
<codefragment>
<![CDATA[
	private void checkDocumentsForEquality(
			LegalPresenceDocument expectedDocument,
			LegalPresenceDocument actualDocument) {
		assertTrue(checkIfBothNullOrBothNotNull(expectedDocument,
				actualDocument));
		if (expectedDocument != null && actualDocument != null) {
			CodeSetElement expectedDocumentCode = expectedDocument
					.getLegalPresenceDocumentType();
			CodeSetElement actualDocumentCode = actualDocument
					.getLegalPresenceDocumentType();
			if (expectedDocumentCode != null && actualDocumentCode != null) {
				assertEquals(expectedDocumentCode.getCode(), actualDocumentCode
						.getCode());
			}
			assertEquals(expectedDocument.getDocumentId(), actualDocument
					.getDocumentId());
			assertEquals(expectedDocument.getExpirationDate(), actualDocument
					.getExpirationDate());
			assertEquals(expectedDocument.getBirthDate(), actualDocument
					.getBirthDate());
		}
	}

	/**
	 * Checks if both null or both not null.
	 * 
	 * @param object1 the object1
	 * @param object2 the object2
	 * 
	 * @return true, if successful
	 */
	private boolean checkIfBothNullOrBothNotNull(Object object1, Object object2) {
		boolean outcome = false;
		if (object1 == null && object2 == null) {
			outcome = true;
		}
		if (object1 != null && object2 != null) {
			outcome = true;
		}
		return outcome;
	}

	/**
	 * Initiates the fixture state.
	 * @throws Exception the exception.
	 */
	@Before
	public void setUp() throws Exception {
		fixture = new LegalPresenceVerificationResponseEcs();
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="177">
<file line="104" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\CdlisPdpsProcessContext.java"/>
<file line="174" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\DlProcessContext.java"/>
<codefragment>
<![CDATA[
		this(new DlApplication());
		dlApplication.setNewLicenseNumberRequired(false);
		Person person = new Person();
		person.setCurrentName(new PersonName());
		List <PersonName> personNames = new ArrayList <PersonName>();
		personNames.add(new PersonName());
		person.setPersonNames(personNames);
		person.setDriverLicense(new DriverLicense());
		person.getDriverLicense().setAppliedLicenseClasses(
				new ArrayList <CodeSetElement>());
		dlApplication.setApplicant(person);
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsnServiceVerificationCode(new CodeSetElement());
		LegalPresenceDocument legalPresenceDocument = new LegalPresenceDocument();
		legalPresenceDocument.setVerificationCode(new CodeSetElement());
		List <Document> list = new ArrayList <Document>();
		list.add(ssnDocument);
		list.add(legalPresenceDocument);
		person.setDocuments(list);
		Address mailingAddress = new Address(AddressType.MAILING);
		Address residenceAddress = new Address(AddressType.RESIDENTIAL);
		person.addAddress(mailingAddress);
		person.addAddress(residenceAddress);
]]>
</codefragment>
</duplication>
<duplication lines="19" tokens="175">
<file line="87" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\FailureToAppearDCAConverter.java"/>
<file line="74" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\UpdateFailureToAppearDCAConverter.java"/>
<codefragment>
<![CDATA[
		values[10] = filler(convertDateToString(dlApplicant.getBirthDate()), 6); //MFTBRTHD	6	BIRTH DATE
		values[11] = filler(citationDetail.getDocketNumber(), 7); 				 //MFTDCKT#	7	DOCKET NUMBER
		values[12] = filler(convertDateToString(citationDetail
				.getViolationDate()), 6); 										 //MFTVLTND	6	VIOLATION DATE
		int i = 13;
		for (SectionViolated sectionViolated : sectionsViolatedList) {
			values[i++] = this.sectionViolatedValue(sectionViolated);			 //MFTSECV1	7	SECTION VIOLATED 01
			values[i++] = filler(BLANK, 1); 									 //MFTSECE1	1	SECTION ERROR FLAG 01
		}
		if (sectionsViolatedSize < 7) {
			int fillerSize = 7 - sectionsViolatedSize;
			for (int j = 0; j < fillerSize; j++) {
				values[i++] = filler(BLANK, 7); 								 //MFTSECV1	7	SECTION VIOLATED 01
				values[i++] = filler(BLANK, 1); 								 //MFTSECE1	1	SECTION ERROR FLAG 01
			}
		}
		values[i++] = filler(convertDateToString(citationDetail
				.getConvictionDate()), 6); 										 //MFTCVTND	6	CONVICTION DATE
		values[i++] = getCodeSetElementValue(citationDetail.getCourtCode(), 5);  //MFTCRTCD	5	COURT CODE
]]>
</codefragment>
</duplication>
<duplication lines="53" tokens="175">
<file line="57" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaCommercilaLicenseTestsValidator.java"/>
<file line="61" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaLicenseTestsValidator.java"/>
<codefragment>
<![CDATA[
				validateRuleD814(cdaProcessContext, errorCollector);	
				
			}
			
			else { errorCollector.register(new ApplicationException("SOME ERROR MESSAGE")); } 	//TODO assign proper error message
		}
		
		setErrorCollector(errorCollector);
	}

	private boolean isClassFdriveAndLawTestOk(CdaProcessContext cdaProcessContext){
		
		
		List <DriveAndLawTestResult> driveAndLawTestResults = cdaProcessContext
									.getDriveAndLawTestResultGroup()
									.getDriveAndLawTestResults(DriveAndLawTestResultType.CLASS_F_LAW_TEST_RESULT);
		
		String classFTestResultCode = driveAndLawTestResults
									 .get(driveAndLawTestResults.size() - 1)
									 .getTestResultCode()
									 .getCode();
									
		
		if (! "P".equalsIgnoreCase(classFTestResultCode)
				&& ! "W".equalsIgnoreCase(classFTestResultCode)) {
				return false;
		}
		
		return true;
	}
	
	private boolean isClassMdriveAndLawTestOk(CdaProcessContext cdaProcessContext){
		
		
		List <DriveAndLawTestResult> driveAndLawTestResults = cdaProcessContext
									.getDriveAndLawTestResultGroup()
									.getDriveAndLawTestResults(DriveAndLawTestResultType.CLASS_F_LAW_TEST_RESULT);
		
		String classMTestResultCode = driveAndLawTestResults
									 .get(driveAndLawTestResults.size() - 1)
									 .getTestResultCode()
									 .getCode();
									
		
		if (! "P".equalsIgnoreCase(classMTestResultCode)
				&& ! "W".equalsIgnoreCase(classMTestResultCode)) {
				return false;
		}
		
		return true;
	}
	
	private void validateRuleD688(CdaProcessContext cdaProcessContext,
]]>
</codefragment>
</duplication>
<duplication lines="54" tokens="170">
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\SendFailureToAppearInformationRequestEcs.java"/>
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\SendFailureToPayInformationRequestEcs.java"/>
<codefragment>
<![CDATA[
	public SendFailureToPayInformationRequestEcs(
			IUserContext userContext,
			Person person,
			CitationDetail citationDetail,
			String controlCashierSequenceNo,
			AbstractSendFailureToAppearOrPayInformationConverter messageConverter) {
		super(userContext, person, citationDetail, controlCashierSequenceNo,
				messageConverter);
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.ecs.request.impl.SynchronousEcsRequest#execute()
	 */
	@Override
	public FireAndForgetReceipt execute() throws EcsServiceException {
		FireAndForgetReceipt sendFailureToPayInformationResponseEcs = null;
		IErrorCollector errorCollector = getValidator().validate(this);
		if (errorCollector.hasErrors()) {
			sendFailureToPayInformationResponseEcs = new FireAndForgetReceipt(
					errorCollector);
		}
		else {
			//If the execute method throws EcsResponseIsNullException then it is CNA short term message.
			//In the catch block we need to register the error to the error collector.
			try {
				sendFailureToPayInformationResponseEcs = (FireAndForgetReceipt) super
						.execute();
			}
			catch (EcsResponseIsNullException responseIsNullException) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.CNA_SHORT_TERM_MESSAGE));
				sendFailureToPayInformationResponseEcs = new FireAndForgetReceipt(
						errorCollector);
			}
			catch (SystemException sysEx) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.RESOURCE_PROBLEM_MESSAGE));
				sendFailureToPayInformationResponseEcs = new FireAndForgetReceipt(
						errorCollector);
			}
		}
		return sendFailureToPayInformationResponseEcs;
	}
	
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fw.service.impl.AbstractRequest#getValidator()
	 */
	@Override
	protected IRequestValidator getValidator() {
		return new SendFailureToAppearOrPayInformationRequestValidator();
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="169">
<file line="39" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\activity\dl\decision\impl\CheckAniTtcActivity.java"/>
<file line="39" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\activity\dl\decision\impl\CheckTtcActivity.java"/>
<codefragment>
<![CDATA[
		if (processContext instanceof HqInquiryProcessContext) {
			HqInquiryProcessContext hqInquiryProcessContext = (HqInquiryProcessContext) processContext;
			ttc = hqInquiryProcessContext.getUserContext().getTtc();
			mode = hqInquiryProcessContext.getUserContext()
					.getOperationalMode().getCode();
		}
		else if (processContext instanceof CustomerInfoProcessContext) {
			CustomerInfoProcessContext customerInfoProcessContext = (CustomerInfoProcessContext) processContext;
			ttc = customerInfoProcessContext.getUserContext().getTtc();
			mode = customerInfoProcessContext.getUserContext()
					.getOperationalMode().getCode();
		}
		if (ArrayUtils.contains(ttc, ITtcConstants.SPC, ITtcConstants.SPD,
				ITtcConstants.SPO, ITtcConstants.SPR, ITtcConstants.SPX)) {
			strTtc = IDlaDecisionActivityConstantsForBpDefinition.SP_TTC;
		}
		else if (ttc.equalsIgnoreCase(ITtcConstants.DLP)
				|| ttc.equalsIgnoreCase(ITtcConstants.IDP)) {
			strTtc = IDlaDecisionActivityConstantsForBpDefinition.DLP_IDP_TTC;
		}
		else if (ttc.equalsIgnoreCase(ITtcConstants.CDA)) {
			strTtc = IDlaDecisionActivityConstantsForBpDefinition.CDA_TTC;
		}
		else if (ArrayUtils.contains(ttc, ITtcConstants.IDA, ITtcConstants.IDC,
]]>
</codefragment>
</duplication>
<duplication lines="39" tokens="166">
<file line="127" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\FailureToAppearDCARequestEcsValidatorTest.java"/>
<file line="127" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\UpdateFailureToAppearDCARequestEcsValidatorTest.java"/>
<codefragment>
<![CDATA[
						.createUserContextForFailureToAppearFTD());
		IErrorCollector collector = this.validator.validate(request);
		Assert.assertNotNull(collector);
		Assert.assertEquals(false, collector.hasErrors());
	}

	/**
	 * This method tests for Request being Null.
	 */
	@Test
	public void testForRequestBeingNull() {
		IErrorCollector collector = this.validator.validate(request);
		Assert.assertNotNull(collector);
		Assert.assertEquals(true, collector.hasErrors());
	}

	/**
	 * This method tests for InValid Request.
	 */
	@Test
	public void testForInValidRequest() {
		this.person = createPersonForFailureToAppearDCA();
		this.citationDetail = createCitationDetailForFailureToAppearDCA();
		IErrorCollector collector = this.validator
				.validate(new CancelDlRequestEcs(null, null, null, null, null,
						null, null));
		Assert.assertNotNull(collector);
		Assert.assertEquals(true, collector.hasErrors());
	}

	/**
	 * This method tests for Invalid TTC.
	 */
	@Test
	public void testForInValidTTC() {
		this.person = createPersonForFailureToAppearDCA();
		this.citationDetail = createCitationDetailForFailureToAppearDCA();
		UserContext userContext = UserContextFixtureFactory
				.createUserContextForFailureToAppearFTD();
]]>
</codefragment>
</duplication>
<duplication lines="37" tokens="165">
<file line="139" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<file line="231" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateDataBType() {
		String[][] dataArray = new String[][] {
				{ SOME_CODE_ELEMENT, "01P" },//
				{ DRIVERS_LICENSE_ELEMENT, "I8005638" },//
				{ FULL_NAME_ELEMENT, "Alexander M Fleming" },//
				{ ADDRESS_ELEMENT, "2415 1st ave" },//
				{ CITY_ELEMENT, "SACRAMENTO" },//
				{ STATE_ELEMENT, "CA" },//
				{ ZIP_ELEMENT, "95827" },//
				{ INSURANCE_COMPANY_NUMBER_ELEMENT, "1357" },//
				{ INSURANCE_COMPANY_NAME_ELEMENT, "Test Company Name" },//
				{ CERTIFICATE_TYPE_CODE_ELEMENT, "P" },//
				{ CERTIFICATE_TYPE_ELEMENT, "P" },//
				{ COVERAGE_CODE_ELEMENT, "T" },//
				{ COVERAGE_TYPE_ELEMENT, "Type" },//
				{ POLICY_NUMBER_ELEMENT, "P56789" },//
				{ EFFECTIVE_DATE_ELEMENT, "02/02/10" },//
				{
						RECEIPT_DATE_ELEMENT,
						DocumentConverterUtil
								.convertDateToString(
										currentDateTime,
										AbstractDocumentConverter.FORMATTER_MM_SLASH_DD_SLASH_YY) },//
				{ OFFICE_ID_ELEMENT, "130" },//
				{ KEYERS_ID_ELEMENT, "KB" },//
				{
						PROCESS_DATE_ELEMENT,
						DocumentConverterUtil
								.convertDateToString(
										currentDateTime,
										AbstractDocumentConverter.FORMATTER_MM_SLASH_DD_SLASH_YY) },//
				{
						SYSTEM_TIME_ELEMENT,
						DocumentConverterUtil.convertDateToString(
								currentDateTime,
								AbstractDocumentConverter.FORMATTER_HH_mm) },
				{ CUST08_DATE_ELEMENT, "02/02/10" },//
]]>
</codefragment>
</duplication>
<duplication lines="43" tokens="165">
<file line="395" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="623" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_ID_EXP_DATE,
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_ID,
						"305" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_DATE,
						"01/05/10" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_MICROGRAPHICS_NUMBER,
						"995" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_ISSUANCE_MESSAGE
]]>
</codefragment>
</duplication>
<duplication lines="45" tokens="165">
<file line="206" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\CounselorInquiryForDisplayConverterTest.java"/>
<file line="251" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\DlInformationSearchByVinOrPlateConverterTest.java"/>
<codefragment>
<![CDATA[
		}
		catch (UnsupportedEncodingException e) {
			throw new MessageConversionException(e);
		}
		String formatResponse = StringUtils
				.trimTrailingWhitespace(removeDuplicateHeader(strBuff));
		return formatResponse;
	}

	/**
	 * This method removes duplicate header in given input string. first line of input string treated as a header.
	 * 
	 * @param buffer the buffer
	 * 
	 * @return returnString the string
	 */
	private String removeDuplicateHeader(StringBuffer buffer) {
		String string = buffer.toString();
		if (isNullOrBlank(string)) {
			return string;
		}
		StringTokenizer tokenizer = new StringTokenizer(string, LINE_SEPARATOR);
		int headerLengh = tokenizer.nextToken().length();
		String header = string.substring(0, headerLengh);
		String body = string.replace(header, "");
		StringBuffer stringBuffer = new StringBuffer();
		if (!body.contains(header)) {
			stringBuffer.append(header).append(LINE_SEPARATOR);
		}
		stringBuffer.append(body);
		String returnString = stringBuffer.toString();
		return returnString;
	}

	/**
	 * Checks if is null or blank.
	 * 
	 * @param anObject the an object
	 * 
	 * @return true, if is null or blank
	 */
	private static boolean isNullOrBlank(Object anObject) {
		return EaseUtil.isNullOrBlank(anObject);
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="42" tokens="165">
<file line="151" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\AutomatedNameIndexDlInquiryConverter.java"/>
<file line="260" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\ReturnDriverInformationAndFeeIndicatorConverter.java"/>
<codefragment>
<![CDATA[
		StringTokenizer token = new StringTokenizer(names);
		int count = 0;
		while (token.hasMoreElements()) {
			String str = ((String) token.nextElement()).trim();
			if (count == 0) {
				personName.setLastName(str);
			}
			else if (count == 1) {
				personName.setFirstName(str);
			}
			else if (count == 2) {
				if ((IEcsConverterConstants.SUFFIX_JR.equalsIgnoreCase(str))
						|| (IEcsConverterConstants.SUFFIX_SR
								.equalsIgnoreCase(str)
								|| (IEcsConverterConstants.SUFFIX_II
										.equalsIgnoreCase(str))
								|| (IEcsConverterConstants.SUFFIX_III
										.equalsIgnoreCase(str)) || (IEcsConverterConstants.SUFFIX_IV
								.equalsIgnoreCase(str)))) {
					personName.setSuffix(str);
				}
				else {
					personName.setMiddleName(str);
				}
			}
			else if (count == 3) {
				personName.setSuffix(str);
			}
			count++;
		}
		return personName;
	}

	/** 
	 * Set Mailing address.
	 * 
	 * @param line1
	 * @param city
	 * @param zip
	 * @return Address
	 */
	private Address setMailingAddress(String line1, String city, String zip) {
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="165">
<file line="60" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Cda0013Rule.java"/>
<file line="55" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Cdl70u0001Rule.java"/>
<codefragment>
<![CDATA[
					.getDriverLicense().getNewRestrictions();
			List <DrivingRestriction> restrictions = new ArrayList <DrivingRestriction>();
			if (newRestrictions != null)
				restrictions.addAll(newRestrictions);
			if (existingRestrictions != null)
				restrictions.addAll(existingRestrictions);
			if (restrictions != null && restrictions.size() > 0) {
				for (Iterator <DrivingRestriction> iterator = restrictions
						.iterator(); iterator.hasNext();) {
					DrivingRestriction drivingRestriction = iterator.next();
					String restrictionCode = null;
					if (drivingRestriction.getRestrictionTypeCode().getCode() != null) {
						restrictionCode = drivingRestriction
								.getRestrictionTypeCode().getCode();
					}
					if (restrictionCode.equalsIgnoreCase("05")
							|| restrictionCode.equalsIgnoreCase("14")
							|| restrictionCode.equalsIgnoreCase("15")
							|| restrictionCode.equalsIgnoreCase("25")
							|| restrictionCode.equalsIgnoreCase("95")) {
						errorCollector
								.register(new ApplicationException("0013"));
					}
				}
]]>
</codefragment>
</duplication>
<duplication lines="21" tokens="164">
<file line="176" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\DlProcessContext.java"/>
<file line="150" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\HqInquiryProcessContext.java"/>
<codefragment>
<![CDATA[
		person.setIdCard(idCard);
		person.setCurrentName(new PersonName());
		List <PersonName> personNames = new ArrayList <PersonName>();
		personNames.add(new PersonName());
		person.setPersonNames(personNames);
		person.setDriverLicense(new DriverLicense());
		person.getDriverLicense().setAppliedLicenseClasses(
				new ArrayList <CodeSetElement>());
		dlApplication.setApplicant(person);
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsnServiceVerificationCode(new CodeSetElement());
		LegalPresenceDocument legalPresenceDocument = new LegalPresenceDocument();
		legalPresenceDocument.setVerificationCode(new CodeSetElement());
		List <Document> list = new ArrayList <Document>();
		list.add(ssnDocument);
		list.add(legalPresenceDocument);
		person.setDocuments(list);
		Address mailingAddress = new Address(AddressType.MAILING);
		Address residenceAddress = new Address(AddressType.RESIDENTIAL);
		person.addAddress(mailingAddress);
		person.addAddress(residenceAddress);
]]>
</codefragment>
</duplication>
<duplication lines="108" tokens="163">
<file line="38" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\AutomatedDlPage.java"/>
<file line="107" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\MedicalReportUpdatePage.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Gets the dlOrIdNumber.
	 * 
	 * @return the dlOrIdNumber
	 */
	public String getDlOrIdNumber() {

		try {
			// return
			// getMedicalReportUpdateApplication().getApplicant().getDriverLicense
			// ().getLicenseNumber();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dlOrIdNumber;

	}

	/**
	 * Sets the dlOrIdNumber.
	 * 
	 * @param dlOrIdNumber
	 *            the new dlOrIdNumber
	 */
	public void setDlOrIdNumber(String dlOrIdNumber) {

		try {
			//getMedicalReportUpdateApplication().getApplicant().getDriverLicense
			// ().setLicenseNumber(dlOrIdNumber);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.dlOrIdNumber = dlOrIdNumber;
	}

	/**
	 * Gets the lastname.
	 * 
	 * @return the lastname
	 */
	public String getLastname() {

		try {
			// return
			// getMedicalReportUpdateApplication().getApplicant().getCurrentName
			// ().getLastname();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.lastname;

	}

	/**
	 * Sets the lastname.
	 * 
	 * @param lastname
	 *            the new lastname
	 */
	public void setLastname(String lastname) {

		try {
			//getMedicalReportUpdateApplication().getApplicant().getCurrentName(
			// ).setLastname(lastname);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.lastname = lastname;
	}

	/**
	 * Gets the dl22mPendingApplication.
	 * 
	 * @return the dl22mPendingApplication
	 */
	public CodeSetElement getDl22mPendingApplication() {

		try {
			// return getDlaProcessContext()
			// .getDl22mPendingApplication().getCode();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dl22mPendingApplication;

	}

	/**
	 * Sets the dl22mPendingApplication.
	 * 
	 * @param dl22mPendingApplication
	 *            the new dl22mPendingApplication
	 */
	public void setDl22mPendingApplication(
			CodeSetElement dl22mPendingApplication) {

		try {
			// setProcessContex(()dl22mPendingApplication);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.dl22mPendingApplication = dl22mPendingApplication;
	}
]]>
</codefragment>
</duplication>
<duplication lines="41" tokens="161">
<file line="271" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="399" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_ID,
						"305" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_DATE,
						"01/05/10" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_MICROGRAPHICS_NUMBER,
						"995" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_EMPLOYEE_ID, "BH" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_ISSUANCE_MESSAGE
								+ "1", "STOP BYPASSED - VERIFY RECORD STATUS" },
]]>
</codefragment>
</duplication>
<duplication lines="27" tokens="161">
<file line="274" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<file line="386" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ getNonCommlLicenseCategory2Element(), "" },
				{ getRecordStatusesElement().get("RECORD_STATUS1_ELEMENT"),
						"Action Message 0" },
				{ getRecordStatusesElement().get("RECORD_STATUS2_ELEMENT"),
						"Action Message 1" },
				{ getRecordStatusesElement().get("RECORD_STATUS3_ELEMENT"),
						"Action Message 2" },
				{ getRecordStatusesElement().get("RECORD_STATUS4_ELEMENT"),
						"Action Message 3" },
				{ getRecordStatusesElement().get("RECORD_STATUS5_ELEMENT"),
						"Action Message 4" },
				{ getRecordStatusesElement().get("RECORD_STATUS6_ELEMENT"),
						"Action Message 5" },
				{ getRecordStatusesElement().get("RECORD_STATUS7_ELEMENT"),
						"Action Message 6" },
				{ getRecordStatusesElement().get("RECORD_STATUS8_ELEMENT"),
						"Action Message 7" },
				{ getRecordStatusesElement().get("RECORD_STATUS9_ELEMENT"),
						"Action Message 8" },
				{ getRecordStatusesElement().get("RECORD_STATUS10_ELEMENT"),
						"Action Message 9" },
				{ getRecordStatusesElement().get("RECORD_STATUS11_ELEMENT"),
						"Action Message 10" },
				{ getRecordStatusesElement().get("RECORD_STATUS12_ELEMENT"),
						"Action Message 11" } };
		return dataArray;
	}
]]>
</codefragment>
</duplication>
<duplication lines="43" tokens="161">
<file line="662" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisD889Rule.java"/>
<codefragment>
<![CDATA[
	}
	/**
	 * D889. an ID card cannot be issued without verification
	 * 
	 * @param ttc
	 *            transaction code
	 * @param eliRecord
	 *            data from storage
	 * @param errorCollector
	 *            the error collector
	 */
	public void D889(EliRecord eliRecord, String ttc,
			IErrorCollector errorCollector) {
		Person applicant = null;
		if (eliRecord != null) {
			applicant = eliRecord.getPerson();
			if (applicant != null) {
				SocialSecurityDocument socialSecurityDocument = applicant
						.getSocialSecurityDocument();
				String ssn = null;
				if (socialSecurityDocument != null) {
					ssn = socialSecurityDocument.getSsn();
					// D889 - SSN NOT VERIFIED
					if (("IDP".equalsIgnoreCase(ttc) || "IDC".equalsIgnoreCase(ttc))
							&& EaseUtil.isNullOrBlank(ssn)) {
						if (eliRecord
								.getUserVerifiedSsnCode() != null) {
							if ((!"A".equalsIgnoreCase(eliRecord.getUserVerifiedSsnCode()
									.getCode()))
									&& (!"C"
											.equalsIgnoreCase(eliRecord
													.getUserVerifiedSsnCode()
													.getCode()))) {
								errorCollector
										.register(new EaseValidationException(
												IDataCollectionErrorMessageConstants.SSN_NOT_VERIFIED));
							}
						}
					}
				}
			}
		}
	}
]]>
</codefragment>
</duplication>
<duplication lines="36" tokens="159">
<file line="185" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<file line="283" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateDataTwoBType() {
		String[][] dataArray = new String[][] {
				{ DRIVERS_LICENSE_ELEMENT, "I8005638" },//
				{ FULL_NAME_ELEMENT, "Alexander M Fleming" },//
				{ ADDRESS_ELEMENT, "2415 1st ave" },//
				{ CITY_ELEMENT, "SACRAMENTO" },//
				{ STATE_ELEMENT, "CA" },//
				{ ZIP_ELEMENT, "95827" },//
				{ INSURANCE_COMPANY_NUMBER_ELEMENT, "1357" },//
				{ INSURANCE_COMPANY_NAME_ELEMENT, "Test Company Name" },//
				{ CERTIFICATE_TYPE_CODE_ELEMENT, "P" },//
				{ CERTIFICATE_TYPE_ELEMENT, "P" },//
				{ COVERAGE_CODE_ELEMENT, "T" },//
				{ COVERAGE_TYPE_ELEMENT, "Type" },//
				{ POLICY_NUMBER_ELEMENT, "P56789" },//
				{ EFFECTIVE_DATE_ELEMENT, "02/02/10" },//
				{
						RECEIPT_DATE_ELEMENT,
						DocumentConverterUtil
								.convertDateToString(
										currentDateTime,
										AbstractDocumentConverter.FORMATTER_MM_SLASH_DD_SLASH_YY) },//
				{ OFFICE_ID_ELEMENT, "130" },//
				{ KEYERS_ID_ELEMENT, "KB" },//
				{
						PROCESS_DATE_ELEMENT,
						DocumentConverterUtil
								.convertDateToString(
										currentDateTime,
										AbstractDocumentConverter.FORMATTER_MM_SLASH_DD_SLASH_YY) },//
				{
						SYSTEM_TIME_ELEMENT,
						DocumentConverterUtil.convertDateToString(
								currentDateTime,
								AbstractDocumentConverter.FORMATTER_HH_mm) },
				{ HQ08_DATE_ELEMENT, "02/02/10" },//
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="158">
<file line="74" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<file line="302" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateData() {
		String[][] dataArray = new String[][] {
				{ IPrintConverterConstants.DL_REC_ZBPDLID, "I1234567" },//
				{ IPrintConverterConstants.DL_REC_ZBPBAR90, "I1234567" },
				{ IPrintConverterConstants.DL_REC_ZBPHDR2,
						"RECEIPT - NOT A LICENSE OR PERMIT" },
				{ IPrintConverterConstants.DL_REC_ZBPDISCL,
						"NOT A VERIFIED IDENTIFICATION" },
				{ IPrintConverterConstants.DL_REC_ZBPAPPLH, "APPLICATION FOR" },
				{ IPrintConverterConstants.DL_REC_ZBPPNME1, "Brad Miller, Mr" },
				{ IPrintConverterConstants.DL_REC_ZBPPMAD1,
						"123 Current Mailing St" },
				{ IPrintConverterConstants.DL_REC_ZBPCMCTO, "Sacramento" },
				{ IPrintConverterConstants.DL_REC_ZBPCMSTO, "CA" },
				{ IPrintConverterConstants.DL_REC_ZBPCMZPO, "95815" },
				{ IPrintConverterConstants.DL_REC_ZBPACLS1, "C " },
				{ IPrintConverterConstants.DL_REC_ZBPAND, "&" },
				{ IPrintConverterConstants.DL_REC_ZBPACLS2, "A " },
				{ IPrintConverterConstants.DL_REC_ZBPCLASS, "CLASS:" },
				{ IPrintConverterConstants.DL_REC_ZBPCOML, "*" },
				{ IPrintConverterConstants.DL_REC_ZBPENDOR, "-- " },
				{ IPrintConverterConstants.DL_REC_ZBPTRNV, "199.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCAS, "100.00" },
]]>
</codefragment>
</duplication>
<duplication lines="52" tokens="158">
<file line="214" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\CommonFixtureFactory.java"/>
<file line="210" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\CommonFixtureFactory.java"/>
<codefragment>
<![CDATA[
		returnCode.setCode("ERROR_CODE");
		//returnCode.setMessage("INVALID ADDRESS");
		return returnCode;
	}

	/**
	 * This method creates a new Sequence Number for Validate Automated Receipt.
	 * 
	 * @return the sequenceNumber
	 */
	public static String createSequenceNumberForValidateAutomatedReciept() {
		String sequenceNumber = null;
		sequenceNumber = "0951";
		return sequenceNumber;
	}

	/**
	 * Gets the calender.
	 * 
	 * @return the calender
	 */
	public static Calendar getCalender() {
		// get the supported ids for GMT-08:00 (Pacific Standard Time)
		String[] ids = TimeZone.getAvailableIDs(-8 * 60 * 60 * 1000);
		// if no ids were returned, something is wrong. get out.
		if (ids.length == 0) {
			System.exit(0);
		}
		// begin output
		// create a Pacific Standard Time time zone
		SimpleTimeZone pdt = new SimpleTimeZone(-8 * 60 * 60 * 1000, ids[0]);
		// set up rules for daylight savings time
		pdt
				.setStartRule(Calendar.APRIL, 1, Calendar.SUNDAY,
						2 * 60 * 60 * 1000);
		pdt.setEndRule(Calendar.OCTOBER, -1, Calendar.SUNDAY,
				2 * 60 * 60 * 1000);
		// create a GregorianCalendar with the Pacific Daylight time zone
		// and the current date and time
		Calendar calendar = new GregorianCalendar(pdt);
		Date trialTime = new Date();
		calendar.setTime(trialTime);
		return calendar;
	}

	/**
	 * Private Constructor.
	 */
	private CommonFixtureFactory() {
		// Empty Method
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="33" tokens="158">
<file line="274" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\util\DocumentConverterUtil.java"/>
<file line="317" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\util\DocumentConverterUtil.java"/>
<codefragment>
<![CDATA[
					templateNames.get(count)).append("</document_template>");
			for (String eachElement : inputList) {
				value = eachElement.substring(0, eachElement
						.indexOf(FIELD_DELIMITER));
				element = eachElement.substring(eachElement
						.indexOf(FIELD_DELIMITER) + 3, eachElement.length());
				if (element.equalsIgnoreCase(LIMITATIONS_ELEMENT)
						|| element
								.equalsIgnoreCase(HEADQUARTERS_MESSAGES_ELEMENT)
						|| element.equalsIgnoreCase(CUSTOMER_MESSAGES_ELEMENT)) {
					sBuilder.append("<item fieldMap=\"").append(element)
							.append("\"").append("><![CDATA[").append(value)
							.append("]]&gt;</item>");
				}
				else {
					sBuilder.append("<item field=\"").append(element).append(
							"\"").append("><![CDATA[").append(value).append(
							"]]&gt;</item>");
				}
			}
			sBuilder.append("</segment>");
		}
		return sBuilder.toString();
	}

	/**
	 * Gets the dl or id number.
	 * 
	 * @param person the person
	 * 
	 * @return the dl or id number
	 */
	public static String getDlorIdNumber(Person person) {
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="158">
<file line="52" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\convert\impl\FcpProcessingDismissalDocumentConverter.java"/>
<file line="59" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\convert\impl\FtaProcessingDocumentConverter.java"/>
<codefragment>
<![CDATA[
		}
		setHeaderElements(elementsList, header);
		setDlId3NameBd(elementsList, person);
		setCommonCitationDetails(elementsList, application.getCitationDetails());
		addToElementsList(elementsList, convertDateToString(citationDetail
				.getConvictionDate(), FORMATTER_MM_dd_yy),
				CONVICTION_DATE_ELEMENT);
		addToElementsList(elementsList, convertDateToString(citationDetail
				.getAmendedDate(), FORMATTER_MM_dd_yy), AMENDED_DATE_ELEMENT);
		addToElementsList(elementsList, citationDetail.getAmendedCode()
				.getCode(), AMENDED_CODE_ELEMENT);
		List <CodeSetElement> dispositions = citationDetail
				.getDispositionCodes();
		if (!isNullorEmpty(dispositions)) {
			for (int i = 0; i < dispositions.size(); i++) {
				CodeSetElement disposition = dispositions.get(i);
				if (!EaseUtil.isNullOrBlank(disposition)) {
					addToElementsList(elementsList, disposition.getCode(),
							dispositionCodes.get("DISPOSITION_CODE" + (i + 1)
									+ "_ELEMENT"));
				}
			}
		}
]]>
</codefragment>
</duplication>
<duplication lines="41" tokens="157">
<file line="521" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="625" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_ID,
						"305" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_DATE,
						"01/05/10" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_MICROGRAPHICS_NUMBER,
						"995" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_ISSUANCE_MESSAGE
]]>
</codefragment>
</duplication>
<duplication lines="25" tokens="157">
<file line="148" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<file line="386" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ getNonCommlLicenseCategory2Element(), "" },
				{ getRecordStatusesElement().get("RECORD_STATUS1_ELEMENT"),
						"Action Message 0" },
				{ getRecordStatusesElement().get("RECORD_STATUS2_ELEMENT"),
						"Action Message 1" },
				{ getRecordStatusesElement().get("RECORD_STATUS3_ELEMENT"),
						"Action Message 2" },
				{ getRecordStatusesElement().get("RECORD_STATUS4_ELEMENT"),
						"Action Message 3" },
				{ getRecordStatusesElement().get("RECORD_STATUS5_ELEMENT"),
						"Action Message 4" },
				{ getRecordStatusesElement().get("RECORD_STATUS6_ELEMENT"),
						"Action Message 5" },
				{ getRecordStatusesElement().get("RECORD_STATUS7_ELEMENT"),
						"Action Message 6" },
				{ getRecordStatusesElement().get("RECORD_STATUS8_ELEMENT"),
						"Action Message 7" },
				{ getRecordStatusesElement().get("RECORD_STATUS9_ELEMENT"),
						"Action Message 8" },
				{ getRecordStatusesElement().get("RECORD_STATUS10_ELEMENT"),
						"Action Message 9" },
				{ getRecordStatusesElement().get("RECORD_STATUS11_ELEMENT"),
						"Action Message 10" },
				{ getRecordStatusesElement().get("RECORD_STATUS12_ELEMENT"),
						"Action Message 11" } };
]]>
</codefragment>
</duplication>
<duplication lines="35" tokens="157">
<file line="105" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\PersonFixtureFactory.java"/>
<file line="165" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\PersonFixtureFactory.java"/>
<codefragment>
<![CDATA[
		personName.setSuffix(SUFFIX);
		List <PersonName> personNames = new ArrayList <PersonName>();
		personNames.add(personName);
		person.setPersonNames(personNames);
		DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
		Date bdate;
		try {
			bdate = df.parse(BIRTHDATE);
			person.setBirthDate(bdate);
		}
		catch (ParseException e) {
			e.printStackTrace();
		}
		// person.setBirthDate(new Date(1953,4,11));
		List<CodeSetElement> licenseClassCodes = new ArrayList <CodeSetElement>();
		CodeSetElement licenseClass = new CodeSetElement();
		licenseClass.setCode(CLASS_OF_INQUIRY);
		licenseClassCodes.add(licenseClass);
		driverLicense.setAppliedLicenseClasses(licenseClassCodes);
		person.setDriverLicense(driverLicense);
		Address address = new Address(AddressType.MAILING);
		CodeSetElement city = new CodeSetElement();
		city.setName(CITY);
		List <Locator> locatorSet = new ArrayList <Locator>();
		locatorSet.add(address);
		//person.addAddress(address, true);
		return person;
	}

	/**
	 * This method creates a new Person for SendCdlisPdpsServiceRequest.
	 * 
	 * @return the person
	 */
	public static Person createPersonForSendCdlisPdpsServiceRequest() {
]]>
</codefragment>
</duplication>
<duplication lines="27" tokens="157">
<file line="48" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\DlApplicationFixtureFactory.java"/>
<file line="47" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\DlApplicationFixtureFactory.java"/>
<codefragment>
<![CDATA[
		dLicense.getAppliedLicenseClasses().add(licenseClassC);
		// social Security document
		SocialSecurityDocument doc = new SocialSecurityDocument();
		doc.setSsn("123-45-6789");
		List <Document> docs = new ArrayList <Document>();
		docs.add(doc);
		dlAppln.setDocuments(docs);
		// person
		Person person = new Person();
		DateFormat format = new SimpleDateFormat("MM-dd-yy");
		Date date = format.parse("05-13-56");
		person.setBirthDate(date);
		List <PersonName> personNames = new ArrayList <PersonName>();
		PersonName pName = new PersonName();
		personNames.add(pName);
		person.setPersonNames(personNames);
		pName.setFirstName("Alexander");
		pName.setLastName("Fleming");
		pName.setMiddleName("M");
		// address
		Set <Address> addresses = new HashSet <Address>();
		Address mailingAddress = new Address(AddressType.MAILING);
		//person.addAddress(mailingAddress, true);
		mailingAddress.setLine1("2415 1st ave");
		mailingAddress.setLine2("SACRAMENTO CA 95818");
		return dlAppln;
	};
]]>
</codefragment>
</duplication>
<duplication lines="110" tokens="157">
<file line="487" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\dla\StateOfRecordResponsePage.java"/>
<file line="434" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\ServiceOfOrderInquiryResponsePage.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Gets the eyeColorCode.
	 * 
	 * @return the eyeColorCode
	 */
	public String getEyeColorCode() {

		try {
			// return
			// getServiceOfOrderApplication().getApplicant().getEyeColorCode();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.eyeColorCode;

	}

	/**
	 * Gets the heightInFeet.
	 * 
	 * @return the heightInFeet
	 */
	public String getHeightInFeet() {

		try {
			// return
			// getServiceOfOrderApplication().getApplicant().getHeightInFeet();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.heightInFeet;

	}

	/**
	 * Gets the heightInInch.
	 * 
	 * @return the heightInInch
	 */
	public String getHeightInInch() {

		try {
			// return
			// getServiceOfOrderApplication().getApplicant().getHeightInInch();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.heightInInch;

	}

	/**
	 * Gets the weight.
	 * 
	 * @return the weight
	 */
	public String getWeight() {

		try {
			// return getServiceOfOrderApplication().getApplicant().getWeight();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.weight;

	}

	/**
	 * Gets the birthDate.
	 * 
	 * @return the birthDate
	 */
	public Date getBirthDate() {

		try {
			// return
			// getServiceOfOrderApplication().getApplicant().getBirthDate();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.birthDate;

	}

	/**
	 * Sets the birthDate.
	 * 
	 * @param birthDate
	 *            the new birthDate
	 */
	public void setBirthDate(Date birthDate) {

		try {
			// getServiceOfOrderApplication().getApplicant().setBirthDate(
			// birthDate);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.birthDate = birthDate;
	}

	/**
	 * Gets the existingLicenseClasses1.
	 * 
	 * @return the existingLicenseClasses1
	 */
	public String getExistingLicenseClasses1() {
]]>
</codefragment>
</duplication>
<duplication lines="47" tokens="156">
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DlInformationSearchByPlateRoHistoryAndAsOfDateRequestEcs.java"/>
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DlInformationSearchByPlateRoHistoryRequestEcs.java"/>
<codefragment>
<![CDATA[
			DlInformationSearchByPlateRoHistoryConverter messageConverter) {
		super(userContext, vrInformationRequest, messageConverter);
		setMultiSegment(true);
	}
	
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.ecs.request.impl.SynchronousEcsRequest#execute()
	 */
	@Override
	public DataStreamResponseEcs execute() throws EcsServiceException {
		DataStreamResponseEcs dataStreamResponseEcs = null;
		IErrorCollector errorCollector = getValidator().validate(this);
		if (errorCollector.hasErrors()) {
			dataStreamResponseEcs = new DataStreamResponseEcs(errorCollector);
		}
		else {
			//If the execute method throws EcsResponseIsNullException then it is CNA short term message.
			//In the catch block we need to register the error to the error collector.
			try {
				dataStreamResponseEcs = (DataStreamResponseEcs) super.execute();
			}
			catch (EcsResponseIsNullException responseIsNullException) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.CNA_SHORT_TERM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
			catch (SystemException sysEx) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.RESOURCE_PROBLEM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
		}
		return dataStreamResponseEcs;
	}
	
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fw.service.impl.AbstractRequest#getValidator()
	 */
	@Override
	protected IRequestValidator getValidator() {
		return new DlInformationSearchByPlateRoHistoryEcsValidator();
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="50" tokens="156">
<file line="48" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\CounselorInquiryForDisplayRequestEcs.java"/>
<file line="49" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\CounselorInquiryForFtaFtpRecordsRequestEcs.java"/>
<file line="35" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\CounselorInquiryForPrintingRequestEcs.java"/>
<codefragment>
<![CDATA[
			CounselorInquiryForPrintingConverter messageConverter) {
		super(userContext, driverLicense, messageConverter);
		//setMessageConverter(messageConverter);
		setMultiSegment(true);
	}
	
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.ecs.request.impl.SynchronousEcsRequest#execute()
	 */
	@Override
	public CounselorInquiryResponseEcs execute() throws EcsServiceException {
		CounselorInquiryResponseEcs counselorInquiryResponseEcs = null;
		IErrorCollector errorCollector = getValidator().validate(this);
		if (errorCollector.hasErrors()) {
			counselorInquiryResponseEcs = new CounselorInquiryResponseEcs(
					errorCollector);
		}
		else {
			//If the execute method throws EcsResponseIsNullException then it is CNA short term message.
			//In the catch block we need to register the error to the error collector.
			try {
				counselorInquiryResponseEcs = (CounselorInquiryResponseEcs) super
						.execute();
			}
			catch (EcsResponseIsNullException responseIsNullException) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.CNA_SHORT_TERM_MESSAGE));
				counselorInquiryResponseEcs = new CounselorInquiryResponseEcs(
						errorCollector);
			}
			catch (SystemException sysEx) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.RESOURCE_PROBLEM_MESSAGE));
				counselorInquiryResponseEcs = new CounselorInquiryResponseEcs(
						errorCollector);
			}
		}
		return counselorInquiryResponseEcs;
	}
	
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fw.service.impl.AbstractRequest#getValidator()
	 */
	@Override
	protected IRequestValidator getValidator() {
		return new CounselorInquiryRequestEcsValidator();
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="34" tokens="155">
<file line="1226" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\convert\impl\InstructionPermitDocumentConverter.java"/>
<file line="1263" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\convert\impl\InstructionPermitDocumentConverter.java"/>
<codefragment>
<![CDATA[
				&& age < IPrintConverterConstants.AGE_17_5) {
			if (isDriverEducationCodeNotBlank
					&& isDriverTrainingCodeNotBlank
					&& (driverEducationCodeValue
							.equalsIgnoreCase(IPrintConverterConstants.DRIVER_EDUCATION_CODE_C) && driverTrainingCodeValue
							.equalsIgnoreCase(IPrintConverterConstants.DRIVER_TRAINING_CODE_N))
					|| (driverEducationCodeValue
							.equalsIgnoreCase(IPrintConverterConstants.DRIVER_EDUCATION_CODE_C) && driverTrainingCodeValue
							.equalsIgnoreCase(IPrintConverterConstants.DRIVER_TRAINING_CODE_E))) {
				restrictionsToAdd
						.add(IPrintConverterConstants.RESTRICTION_CODE44);
				restrictionsToAdd
						.add(IPrintConverterConstants.RESTRICTION_CODE45);
				restrictionsToAdd
						.add(IPrintConverterConstants.RESTRICTION_CODE49);
			}
			else if (isDriverEducationCodeNotBlank
					&& isDriverTrainingCodeNotBlank
					&& (driverEducationCodeValue
							.equalsIgnoreCase(IPrintConverterConstants.DRIVER_EDUCATION_CODE_E) && driverTrainingCodeValue
							.equalsIgnoreCase(IPrintConverterConstants.DRIVER_TRAINING_CODE_E))
					|| (driverEducationCodeValue
							.equalsIgnoreCase(IPrintConverterConstants.DRIVER_EDUCATION_CODE_E) && driverTrainingCodeValue
							.equalsIgnoreCase(IPrintConverterConstants.DRIVER_TRAINING_CODE_C))) {
				restrictionsToAdd
						.add(IPrintConverterConstants.RESTRICTION_CODE44);
				restrictionsToAdd
						.add(IPrintConverterConstants.RESTRICTION_CODE45);
				restrictionsToAdd
						.add(IPrintConverterConstants.RESTRICTION_CODE50);
			}
			else {
				restrictionsToAdd
						.add(IPrintConverterConstants.RESTRICTION_CODE22);
]]>
</codefragment>
</duplication>
<duplication lines="45" tokens="155">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule68.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule69.java"/>
<codefragment>
<![CDATA[
public class DlaRule69 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String tCode) {
		if (eliRecord != null
				&& getErrorCode(eliRecord, processContext, tCode) != null) {
			if ((getErrorCode(eliRecord, processContext, tCode))
					.hasCodeEqualToAnyOf(ERROR_CODE_01, ERROR_CODE_02,
							ERROR_CODE_03)) {
				// If returned error code is 01/02/03.
				if (!EaseUtil.isNullOrBlank(tCode)
						&& tCode.equalsIgnoreCase(TCODE_DLA)) {
					// If Response TCode was DLA i.e. ANI inquiry with single
					// match.
					if (RecordConditionRulesUtil
							.isInitialInquiry(processContext)) {
						// If Initial inquiry.
						if (RecordConditionRulesUtil
								.isTypeTransactionCodeMatchToAnyOf(
										processContext, DLA, IDA, IDS)) {
							// If current TTC is DLA, IDA, IDS.
							if (!RecordConditionRulesUtil
									.isXTypeLicenseRequest(eliRecord)) {
								// If not a X license type request.
								if (!RecordConditionRulesUtil
										.isCurrentModeIsCounter(processContext)) {
									// If current mode is not Counter.
									if (!RecordConditionRulesUtil
											.isIssuanceOffice(processContext)) {
										// If not Issuance Office.
										return Boolean.TRUE;
									}
								}
							}
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="42" tokens="155">
<file line="32" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule106.java"/>
<file line="34" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule107.java"/>
<codefragment>
<![CDATA[
			if (!RecordConditionRulesUtil.isCurrentModeIsCounter(processContext)) {
				// If current mode is not Counter.
				if (RecordConditionRulesUtil.isInitialInquiry(processContext)
						&& !RecordConditionRulesUtil
								.hasAnyMultipleAniHitsPresent(processContext)) {
					// If initial ANI/DL inquiry
					if (RecordConditionRulesUtil.isTypeTransactionCodeMatchAnyOf(
							processContext, DRIVER_LICENSE_APPLICATION_TTC)) {
						// If current TTC is D*.
						if (eliRecord.getDriverLicense() != null
								&& !EaseUtil.isNullOrBlank(eliRecord
										.getDriverLicense()
										.getExistingLicenseClasses())) {
							// If Class of Record present.
							if (RecordConditionRulesUtil.isFutureDlIssueDate(
									eliRecord, processContext)) {
								// If DL Issue Date is after Process date.
								if (eliRecord.getOriginalApplicationDate() != null
										&& getDlProcessDate(processContext) != null) {
									if (eliRecord
											.getOriginalApplicationDate()
											.compareTo(
													getDlProcessDate(processContext)) <= 0) {
										// If original application date is equal to
										// or before the process date.
										return Boolean.TRUE;
									} else if (!EaseUtil.isNullOrBlank(eliRecord
											.getSegments())
											&& !eliRecord
													.isDlPendingSubRecordSegmentAPresent()
											&& !eliRecord
													.isDlPendingSubRecordSegmentBPresent()) {
										// If Pending Segments A and B are not
										// present.
										return Boolean.TRUE;
									}
								}
							}
						}
					}
				}
			}
]]>
</codefragment>
</duplication>
<duplication lines="89" tokens="155">
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\request\impl\DriverRecordUpdateRequestBus.java"/>
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ts\dl\request\impl\DriverRecordUpdateRequestTs.java"/>
<codefragment>
<![CDATA[
	public DriverRecordUpdateRequestTs(IUserContext userContext) {
		super(userContext);
	}

	/**
	 * @return the invoice
	 */
	public Invoice getInvoice() {
		return invoice;
	}

	/**
	 * @return the person
	 */
	public Person getPerson() {
		return person;
	}

	/**
	 * @return the typeOfUpdate
	 */
	public CodeSetElement getTypeOfUpdate() {
		return typeOfUpdate;
	}

	/**
	 * @return the dateFeesReceived
	 */
	public Date getDateFeesReceived() {
		return dateFeesReceived;
	}

	/**
	 * @return the frPenaltyFeeTypeCodes
	 */
	public List <CodeSetElement> getFrPenaltyFeeTypeCodes() {
		return frPenaltyFeeTypeCodes;
	}

	/**
	 * @return the employingAgency
	 */
	public String getEmployingAgency() {
		return employingAgency;
	}

	/**
	 * @param invoice the invoice to set
	 */
	public void setInvoice(Invoice invoice) {
		this.invoice = invoice;
	}

	/**
	 * @param person the person to set
	 */
	public void setPerson(Person person) {
		this.person = person;
	}

	/**
	 * @param typeOfUpdate the typeOfUpdate to set
	 */
	public void setTypeOfUpdate(CodeSetElement typeOfUpdate) {
		this.typeOfUpdate = typeOfUpdate;
	}

	/**
	 * @param dateFeesReceived the dateFeesReceived to set
	 */
	public void setDateFeesReceived(Date dateFeesReceived) {
		this.dateFeesReceived = dateFeesReceived;
	}

	/**
	 * @param frPenaltyFeeTypeCodes the frPenaltyFeeTypeCodes to set
	 */
	public void setFrPenaltyFeeTypeCodes(
			List <CodeSetElement> frPenaltyFeeTypeCodes) {
		this.frPenaltyFeeTypeCodes = frPenaltyFeeTypeCodes;
	}

	/**
	 * @param employingAgency the employingAgency to set
	 */
	public void setEmployingAgency(String employingAgency) {
		this.employingAgency = employingAgency;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="42" tokens="154">
<file line="106" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\CdlisNdrReportDocumentRequestValidatorTest.java"/>
<file line="106" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\PdpsNdrReportDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		validateFixture = new PdpsNdrReportDocumentRequestValidator();
		if (LOGGER.isDebugEnabled()) {
			LOGGER.debug("setUp() - end");
		}
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	/**
	 * Releases the resources
	 * @throws java.lang.Exception
	 */
	@Override
	@After
	public void onTearDown() throws Exception {
		userContextFixture = null;
		dlApplicationFixture = null;
		errorCollector = null;
		requestFixture = null;
		validateFixture = null;
	}

	/**
	 * Loads DL Application fixture
	 */
	private void initDlApplicationFixture() {
		dlApplicationFixture = new DlApplication();
		driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		Address address = new Address(AddressType.MAILING);
		address.setCity("Sacramento");
		// Person object
		person = new Person();
		person.addAddress(address);
		Calendar calendar = new GregorianCalendar(1977, Calendar.JUNE, 05);
		person.setBirthDate(calendar.getTime());
		person.setDriverLicense(driverLicense);
		PersonName personName = new PersonName();
		personName.setName("Alexander Graham Bell");
		personName.setSuffix("Mr");
		person.setCurrentName(personName);
]]>
</codefragment>
</duplication>
<duplication lines="21" tokens="154">
<file line="102" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\InstructionPermitDocumentRequestTusTest.java"/>
<file line="111" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\NonCommercialTestResultsDocumentRequestTusTest.java"/>
<codefragment>
<![CDATA[
				.getCertificates());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getNewRestrictions());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getNewAttachments());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getAddress(
				AddressType.RESIDENTIAL));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getAddress(
				AddressType.MAILING));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getExistingAddress(
				AddressType.RESIDENTIAL));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getExistingAddress(
				AddressType.MAILING));
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getInterimPermits(
				InterimPermitType.INSTRUCTION_PERMIT));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
]]>
</codefragment>
</duplication>
<duplication lines="30" tokens="154">
<file line="601" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="761" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		newRestrictionCode1.setCode("56");
		DrivingRestriction newDrivingRestriction1 = new DrivingRestriction();
		newDrivingRestriction1.setRestrictionTypeCode(newRestrictionCode1);
		newDrivingRestriction1.setEffectiveDate(CommonFixtureFactory
				.convertStringToDate("20000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newDrivingRestriction1.setExpirationDate(CommonFixtureFactory
				.convertStringToDate("21000421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		newRestrictions.add(newDrivingRestriction1);
		//Add New Restriction Code - 29
		CodeSetElement newRestrictionCode2 = new CodeSetElement();
		newRestrictionCode2.setCode("29");
		DrivingRestriction newDrivingRestriction2 = new DrivingRestriction();
		newDrivingRestriction2.setRestrictionTypeCode(newRestrictionCode2);
		newRestrictions.add(newDrivingRestriction2);
		//Add New Restriction Code - 73
		CodeSetElement newRestrictionCode3 = new CodeSetElement();
		newRestrictionCode3.setCode("73");
		DrivingRestriction newDrivingRestriction3 = new DrivingRestriction();
		newDrivingRestriction3.setRestrictionTypeCode(newRestrictionCode3);
		newRestrictions.add(newDrivingRestriction3);
		//Add New Restriction Code - 72
		CodeSetElement newRestrictionCode4 = new CodeSetElement();
		newRestrictionCode4.setCode("72");
		DrivingRestriction newDrivingRestriction4 = new DrivingRestriction();
		newDrivingRestriction4.setRestrictionTypeCode(newRestrictionCode4);
		newRestrictions.add(newDrivingRestriction4);
		DlApplicationFixtureFactory.createNewDrivingRestrictions(
				dlApplicationFixture, newRestrictions);
]]>
</codefragment>
</duplication>
<duplication lines="43" tokens="153">
<file line="127" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\convert\impl\AbstractCitattionsDocumentConverter.java"/>
<file line="129" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtaProcessingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private static final String ALSO_KNOWN_AS_ELEMENT = "ZBPAKA";
	/** The Constant JAIL_TERM_ELEMENT. */
	protected static final String JAIL_TERM_ELEMENT = "ZBPJAILT";
	/** The Constant BLOOD_ALCOHOL_CONTENT_ELEMENT. */
	protected static final String BLOOD_ALCOHOL_CONTENT_ELEMENT = "ZBPBAC";
	/** The Constant RESTRICTION_TERM_ELEMENT. */
	protected static final String RESTRICTION_TERM_ELEMENT = "ZBPRSTRT";
	/** The Constant RESTRICTION_DATE_ELEMENT. */
	protected static final String RESTRICTION_DATE_ELEMENT = "ZBPRSTRD";
	/** The Constant SUSPENSION_TERM_ELEMENT. */
	protected static final String SUSPENSION_TERM_ELEMENT = "ZBPSUSPT";
	/** The Constant SUSPENSION_DATE_ELEMENT. */
	protected static final String SUSPENSION_DATE_ELEMENT = "ZBPSUSPD";
	/** The Constant SUSPENSION_TERM_ELEMENT. */
	protected static final String PROBATION_TERM_ELEMENT = "ZBPPROBT";
	/** The Constant SUSPENSION_DATE_ELEMENT. */
	protected static final String PROBATION_DATE_ELEMENT = "ZBPPROBD";
	/** The Constant PROBATION_CONDITIONS1_ELEMENT. */
	protected static final String PROBATION_CONDITIONS1_ELEMENT = "ZBPPRB01";
	/** The Constant PROBATION_CONDITIONS2_ELEMENT. */
	protected static final String PROBATION_CONDITIONS2_ELEMENT = "ZBPPRB02";
	/** The Constant PROBATION_CONDITIONS3_ELEMENT. */
	protected static final String PROBATION_CONDITIONS3_ELEMENT = "ZBPPRB03";
	/** The Constant PROBATION_CONDITIONS4_ELEMENT. */
	protected static final String PROBATION_CONDITIONS4_ELEMENT = "ZBPPRB04";
	/** The Constant PROBATION_CONDITIONS5_ELEMENT. */
	protected static final String PROBATION_CONDITIONS5_ELEMENT = "ZBPPRB05";
	/** The Constant PROBATION_CONDITIONS6_ELEMENT. */
	protected static final String PROBATION_CONDITIONS6_ELEMENT = "ZBPPRB06";
	/** The Constant PROBATION_CONDITIONS7_ELEMENT. */
	protected static final String PROBATION_CONDITIONS7_ELEMENT = "ZBPPRB07";
	/** The Constant PROBATION_CONDITIONS8_ELEMENT. */
	protected static final String PROBATION_CONDITIONS8_ELEMENT = "ZBPPRB08";
	/** The Constant PROBATION_CONDITIONS9_ELEMENT. */
	protected static final String PROBATION_CONDITIONS9_ELEMENT = "ZBPPRB09";
	/** The Constant PROBATION_CONDITIONS10_ELEMENT. */
	protected static final String PROBATION_CONDITIONS10_ELEMENT = "ZBPPRB10";
	/** The Constant OFFICE_ID_ELEMENT. */
	private static final String OFFICE_ID_ELEMENT = "ZBPOFFID";
	/** The Constant KEYERS_ID_ELEMENT. */
	private static final String KEYERS_ID_ELEMENT = "ZBPKEYBY";
	/** The Constant TRANSACTION_DATE_ELEMENT. */
	private static final String TRANSACTION_DATE_ELEMENT = "ZBPCSXDT";
]]>
</codefragment>
</duplication>
<duplication lines="29" tokens="153">
<file line="28" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule97.java"/>
<file line="27" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule98.java"/>
<codefragment>
<![CDATA[
public class DlaRule98 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordConditionRule#evaluate(gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RuleObject)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,String tCode) 
	{
		if (isSingleHit(eliRecord) && RecordConditionRulesUtil
				.isInitialInquiry(processContext)) {
			//If Initial inquiry.
			if (RecordConditionRulesUtil.isTypeTransactionCodeMatch(
					processContext, DLP)) {
				//If current TTC is DLP.
				if (RecordConditionRulesUtil.isOriginalTtcNotMatch(
						eliRecord, DLA)) {
						//If Original TTC was not DLA.
					if (eliRecord.getEchoedDriverLicense() == null ||
							EaseUtil.isNullOrBlank(eliRecord.getEchoedDriverLicense()
								.getAppliedLicenseClasses()) || !RecordConditionRulesUtil
								.isInquiryClassContainsAnyOf(eliRecord
										.getEchoedDriverLicense(), F, M)) {
						//If Applied license classes are not F or M.
						if (eliRecord.getDriverLicense() == null ||
							EaseUtil.isNullOrBlank(eliRecord.getDriverLicense()
								.getAppliedLicenseClasses()) || !RecordConditionRulesUtil
								.isInquiryClassContainsAnyOf(eliRecord
										.getEchoedDriverLicense(), F, M)) {
							//If Applied license classes in pending segment A2 are not F or M. 
							if (eliRecord.getPerson().getMedicalExpirationDate() == null) {
]]>
</codefragment>
</duplication>
<duplication lines="82" tokens="153">
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\response\impl\SelectCdlisAndPdpsInquiryResponseBus.java"/>
<file line="52" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ts\dl\response\impl\SelectCdlisAndPdpsInquiryResponseTs.java"/>
<codefragment>
<![CDATA[
	public SelectCdlisAndPdpsInquiryResponseTs(List<CdlisRecord> cdlisHits,
			List<PdpsRecord> pdpsHits, List<DrivingRecord> cdlisRecordHits,
			List<DrivingRecord> pdpsRecordHits) {
		this.cdlisHits = cdlisHits;
		this.pdpsHits = pdpsHits;
		this.cdlisRecordHits = cdlisRecordHits;
		this.pdpsRecordHits = pdpsRecordHits;
	}

	/**
	 * Gets the cdlis hits.
	 * 
	 * @return the cdlis hits
	 */
	public List<CdlisRecord> getCdlisHits() {
		return cdlisHits;
	}

	/**
	 * Gets the pdps hits.
	 * 
	 * @return the pdps hits
	 */
	public List<PdpsRecord> getPdpsHits() {
		return pdpsHits;
	}

	/**
	 * Simple getter for messageCodeStatus.
	 * 
	 * @return
	 */
	public String getMessageCodeStatus() {
		return messageCodeStatus;
	}

	/**
	 * Simple setter for messageCodeStatus.
	 * 
	 * @param messageCodeStatus
	 */
	public void setMessageCodeStatus(String messageCodeStatus) {
		this.messageCodeStatus = messageCodeStatus;
	}

	/**
	 * Simple getter for cdlisRecordHits.
	 * 
	 * @return
	 */
	public List<DrivingRecord> getCdlisRecordHits() {
		return cdlisRecordHits;
	}

	/**
	 * Simple setter for cdlisRecordHits.
	 * 
	 * @param cdlisRecordHits
	 */
	public void setCdlisRecordHits(List<DrivingRecord> cdlisRecordHits) {
		this.cdlisRecordHits = cdlisRecordHits;
	}

	/**
	 * Simple getter for pdpsRecordHits.
	 * 
	 * @return
	 */
	public List<DrivingRecord> getPdpsRecordHits() {
		return pdpsRecordHits;
	}

	/**
	 * Simple setter for pdpsRecordHits.
	 * 
	 * @param pdpsRecordHits
	 */
	public void setPdpsRecordHits(List<DrivingRecord> pdpsRecordHits) {
		this.pdpsRecordHits = pdpsRecordHits;
	}

}
]]>
</codefragment>
</duplication>
<duplication lines="32" tokens="151">
<file line="823" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="976" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"" },
				{ IPrintConverterConstants.INS_PERMIT_ISSUE_DATE_ELEMENT,
						systemDate },
				{ IPrintConverterConstants.INS_PERMIT_OFFICE_ID_ELEMENT, "130" },
				{ IPrintConverterConstants.INS_PERMIT_KEYED_BY_ELEMENT, "JA" },
				{ IPrintConverterConstants.INS_PERMIT_LRE_ID_ELEMENT, "601" },
				{ IPrintConverterConstants.INS_PERMIT_EXPIRATION_DATE_ELEMENT,
						"04-26-10" },
				{ IPrintConverterConstants.INS_PERMIT_PHOTO_NAME_ELEMENT,
						"Brad Miller" },
				{ IPrintConverterConstants.INS_PERMIT_PHOTO_ADDRESS_ELEMENT,
						"332 Photo Info Address" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_CITY_ELEMENT,
						"Sacramento" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_STATE_ELEMENT,
						"CA" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_ZIP_ELEMENT,
						"95815" },
				{ IPrintConverterConstants.INS_PERMIT_GENDER_ELEMENT, "M" },
				{ IPrintConverterConstants.INS_PERMIT_HAIR_COLOR_ELEMENT, "BLK" },
				{ IPrintConverterConstants.INS_PERMIT_EYE_COLOR_ELEMENT, "BLK" },
				{ IPrintConverterConstants.INS_PERMIT_HEIGHT_IN_FEET_ELEMENT,
						"5" },
				{ IPrintConverterConstants.INS_PERMIT_HEIGHT_IN_INCH_ELEMENT,
						"10" },
				{ IPrintConverterConstants.INS_PERMIT_WEIGHT_ELEMENT, "150" },
				{ IPrintConverterConstants.INS_PERMIT_BIRTHDATE_ELEMENT,
						"03-25-96" },
				{
						IPrintConverterConstants.INS_PERMIT_RESTRICTION_HEADER_ELEMENT,
						"RSTR:" },
				{ IPrintConverterConstants.INS_PERMIT_RESTRICTION_LINE_ELEMENT,
]]>
</codefragment>
</duplication>
<duplication lines="44" tokens="150">
<file line="32" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD524Rule.java"/>
<file line="31" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD525Rule.java"/>
<codefragment>
<![CDATA[
public class CdaD525Rule {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(DlApplication dlApplication,
			IErrorCollector errorCollector) {
		DriverLicense driverLicense = dlApplication.getLicense();
		if (!EaseUtil.isNullOrBlank(driverLicense)) {
			CommercialTestResultGroup commercialTestResultGroup = driverLicense
					.getCommercialTestResultGroup();
			if (!EaseUtil.isNullOrBlank(commercialTestResultGroup)) {
				validate(commercialTestResultGroup,
						CommercialTestResultType.GENERAL_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.AIR_BRAKES_TEST_RESULT,
						errorCollector);
				validate(
						commercialTestResultGroup,
						CommercialTestResultType.CLASSA_COMBINATION_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.TRAILERCOACH_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.FIREFIGHTER_TEST_RESULT,
						errorCollector);
				validate(
						commercialTestResultGroup,
						CommercialTestResultType.FIREFIGHTER_CLASSA_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.PASSENGER_TEST_RESULT,
						errorCollector);
				validate(
						commercialTestResultGroup,
						CommercialTestResultType.DOUBLES_OR_TRIPLES_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.TANK_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.HAZMAT_TEST_RESULT,
						errorCollector);
]]>
</codefragment>
</duplication>
<duplication lines="39" tokens="149">
<file line="271" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="627" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_ID,
						"305" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PHOTO_OFFICE_DATE,
						"01/05/10" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_MICROGRAPHICS_NUMBER,
						"995" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_ISSUANCE_MESSAGE
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="149">
<file line="222" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDriverLicenseConverterTest.java"/>
<file line="355" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDriverLicenseConverterTest.java"/>
<codefragment>
<![CDATA[
		dlStatusForDrugCodeInd10.setFeeRatecode(feeRateCodeForDrugCode);
		//////////////////////////////////////////////////////
		FeeRateCode feeRateCodeForPasCode = new FeeRateCode();
		feeRateCodeForPasCode.setCode("748");
		DriverLicenseRateStatus dlStatusForPasCodeInd1 = new DriverLicenseRateStatus();
		dlStatusForPasCodeInd1.setFeeRatecode(feeRateCodeForPasCode);
		DriverLicenseRateStatus dlStatusForPasCodeInd2 = new DriverLicenseRateStatus();
		dlStatusForPasCodeInd2.setFeeRatecode(feeRateCodeForPasCode);
		DriverLicenseRateStatus dlStatusForPasCodeInd3 = new DriverLicenseRateStatus();
		dlStatusForPasCodeInd3.setFeeRatecode(feeRateCodeForPasCode);
		DriverLicenseRateStatus dlStatusForPasCodeInd4 = new DriverLicenseRateStatus();
		dlStatusForPasCodeInd4.setFeeRatecode(feeRateCodeForPasCode);
		DriverLicenseRateStatus dlStatusForPasCodeInd5 = new DriverLicenseRateStatus();
		dlStatusForPasCodeInd5.setFeeRatecode(feeRateCodeForPasCode);
		DriverLicenseRateStatus dlStatusForPasCodeInd6 = new DriverLicenseRateStatus();
		dlStatusForPasCodeInd6.setFeeRatecode(feeRateCodeForPasCode);
		DriverLicenseRateStatus dlStatusForPasCodeInd7 = new DriverLicenseRateStatus();
		dlStatusForPasCodeInd7.setFeeRatecode(feeRateCodeForPasCode);
		DriverLicenseRateStatus dlStatusForPasCodeInd8 = new DriverLicenseRateStatus();
		dlStatusForPasCodeInd8.setFeeRatecode(feeRateCodeForPasCode);
		DriverLicenseRateStatus dlStatusForPasCodeInd9 = new DriverLicenseRateStatus();
		dlStatusForPasCodeInd9.setFeeRatecode(feeRateCodeForPasCode);
		DriverLicenseRateStatus dlStatusForPasCodeInd10 = new DriverLicenseRateStatus();
		dlStatusForPasCodeInd10.setFeeRatecode(feeRateCodeForPasCode);
		//////////////////////////////////////////////////////
		FeeRateCode feeRateCodeReissueFee = new FeeRateCode();
]]>
</codefragment>
</duplication>
<duplication lines="31" tokens="149">
<file line="495" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDlHistoryConverterTest.java"/>
<file line="541" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDlHistoryConverterTest.java"/>
<codefragment>
<![CDATA[
		CaliforniaLicenseInformationFixture.CASE1
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		// Out of state data
		OutOfStateLicenseInformationFixtures.CASE2
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE3
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE4
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE5
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE6
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE7
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE8
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE9
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE10
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE11
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE12
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE13
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		OutOfStateLicenseInformationFixtures.CASE14
				.addMeInPersonFixture(PersonNameFixtures.CASE1);
		UpdateDlHistoryRequestEcs request = new UpdateDlHistoryRequestEcs(
				userContextFixture, personFixture, cdlisRecords, converter,
]]>
</codefragment>
</duplication>
<duplication lines="28" tokens="149">
<file line="28" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule97.java"/>
<file line="30" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule97_1.java"/>
<codefragment>
<![CDATA[
public class DlaRule97_1 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordConditionRule#evaluate(gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RuleObject)
	 * 
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,String tCode) 
	{
		if (isSingleHit(eliRecord) && RecordConditionRulesUtil
				.isInitialInquiry(processContext)) {
			//If Initial Inquiry.
			if (RecordConditionRulesUtil.isTypeTransactionCodeMatch(
					processContext, DLP)) {
				//If Current TTC is DLP.
				if (RecordConditionRulesUtil.isOriginalTtcNotMatch(eliRecord, DLA)) {
					//If Original TTC was not DLA.
					if (eliRecord.getEchoedDriverLicense() == null ||
							EaseUtil.isNullOrBlank(eliRecord.getEchoedDriverLicense()
								.getAppliedLicenseClasses()) || !RecordConditionRulesUtil
								.isInquiryClassContainsAnyOf(eliRecord
										.getEchoedDriverLicense(), F, M)) {
						//If Applied license classes are not F or M.
						if (eliRecord.getDriverLicense() == null ||
							EaseUtil.isNullOrBlank(eliRecord.getDriverLicense()
								.getAppliedLicenseClasses()) || !RecordConditionRulesUtil
								.isInquiryClassContainsAnyOf(eliRecord
										.getEchoedDriverLicense(), F, M)) {
							if (eliRecord.getPerson() != null && 
]]>
</codefragment>
</duplication>
<duplication lines="33" tokens="148">
<file line="26" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule82.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule83.java"/>
<codefragment>
<![CDATA[
public class DlaRule83 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String tCode) {
		if (isSingleHit(eliRecord)) {
			if (RecordConditionRulesUtil.isFutureIdIssueDate(eliRecord,
					processContext)) {
				// If ID Issue date is greater than Process date.
				if (!RecordConditionRulesUtil.isOriginalTtcMatchAnyOf(
						eliRecord, DRIVER_LICENSE_APPLICATION_TTC)) {
					// If Original TTC was not D*.
					if (eliRecord.getFeeRequiredReasonCode() == null
							|| (eliRecord.getFeeRequiredReasonCode() != null && !eliRecord
									.getFeeRequiredReasonCode().hasCodeEqualTo(
											L))) {
						// If fee reason code is not 'L'.
						return Boolean.TRUE;
					} else if (eliRecord.getPerson() != null
							&& eliRecord.getPerson().getIdCard() != null
							&& !EaseUtil.isNullOrBlank(eliRecord.getPerson()
									.getIdCard().getFeeDueYear())) {
						// If ID LIMITED TERM FEE DUE YEAR is present.
						return Boolean.TRUE;
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="147">
<file line="195" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\service\response\mock\impl\CdlisAndPdpsMockResponse.java"/>
<file line="272" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\service\response\mock\impl\CdlisAndPdpsMockResponse.java"/>
<codefragment>
<![CDATA[
		DrivingRecord cdlisRecord1 = new DrivingRecord();
		cdlisRecordHits.add(cdlisRecord1);
		PersonName currentNameCdlis1 = new PersonName();
		cdlisRecord1.setCurrentName(currentNameCdlis1);
		currentNameCdlis1.setFirstName("TESTDRIVER");
		currentNameCdlis1.setLastName("STRUCTURE");
		cdlisRecord1.setGenderCode(new CodeSetElement("M", "M", "M"));
		cdlisRecord1.setHairColorCode(new CodeSetElement("BAL", "BAL", "BAL"));
		cdlisRecord1.setEyeColorCode(new CodeSetElement("BRN", "BRN", "BRN"));
		cdlisRecord1.setHeightInFeet(new Integer(6));
		cdlisRecord1.setHeightInInch(new Integer(1));
		cdlisRecord1.setWeight(new Integer(178));
		cdlisRecord1.setLicenseNumber("I3000003");
		cdlisRecord1.setCity("SACRAMENTO");
		SimpleDateFormat formatter = new SimpleDateFormat("MMddyyyy");
		Date birthDateCdlis1 = null;
		try {
			birthDateCdlis1 = formatter.parse("0101990");
		}
		catch (java.text.ParseException e) {
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="146">
<file line="113" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\LoadDafDataTest.java"/>
<file line="75" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\DlApplicationFixtureFactory.java"/>
<codefragment>
<![CDATA[
	public static DlApplication createDlApplicationForCda() {
		DlApplication dlApplication = new DlApplication();
		//Setting DriverLicense details
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setCreatedBy("MWCSJ3");
		driverLicense.setCreatedDate(new Date());
		driverLicense.setEffectiveDate(new Date());
		driverLicense.setExpirationDate(new Date());
		driverLicense.setExpirationDate(new Date());
		driverLicense.setIsOralTest(true);
		//Set licenseLocation
		CodeSetElement licenseLocation = new CodeSetElement();
		licenseLocation.setCode("SAC");
		licenseLocation.setName("Sacramento");
		driverLicense.setLicenseLocation(licenseLocation);
		//Set license class
		List <CodeSetElement> licenseClass = new ArrayList <CodeSetElement>();
		CodeSetElement licenseClassF = new CodeSetElement();
		licenseClassF.setCode("F");
		licenseClass.add(licenseClassF);
		driverLicense.setAppliedLicenseClasses(licenseClass);
		driverLicense.setLicenseLocation(licenseLocation);
		driverLicense.setLicenseStatusCode(new CodeSetElement());
		driverLicense.setLicenseNumber("I12345");
]]>
</codefragment>
</duplication>
<duplication lines="41" tokens="146">
<file line="133" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\request\validator\impl\DlReceiptDocumentRequestValidator.java"/>
<file line="109" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\request\validator\impl\OrganDonorDocumentRequestValidator.java"/>
<codefragment>
<![CDATA[
		}
	}

	/**
	 * Validate Person Current Name.
	 * 
	 * @param currentName the current name
	 * @param aCollector the Error Collector
	 */
	private void validatePersonName(PersonName currentName, IErrorCollector aCollector) {
		if (isNullorEmpty(currentName)) {
			addValidationExceptionInErrorCollector(
					"NULL_CURRENT_NAME", null, aCollector);
		}
		else if (isNullorEmpty(currentName.getFullName())) {
			addValidationExceptionInErrorCollector(
					"NULL_CURRENT_NAME", null, aCollector);
		}
	}

	/**
	 * Validate license.
	 * 
	 * @param aCollector the a collector
	 * @param person the person
	 */
	private void validateLicense(Person person, IErrorCollector aCollector) {
		DriverLicense driverLicense = person.getDriverLicense();
		IdCard idCard = person.getIdCard();
		if (isNullorEmpty(driverLicense) && isNullorEmpty(idCard)) {
			addValidationExceptionInErrorCollector(
					"NULL_DRIVERLICENSE_AND_IDCARD", null, aCollector);
		}
		else if (!isNullorEmpty(driverLicense)) {
			validateLicenseNumber(driverLicense.getLicenseNumber(), aCollector);
		}
		else if (!isNullorEmpty(idCard)) {
			validateLicenseNumber(idCard.getLicenseNumber(), aCollector);
		}
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="32" tokens="146">
<file line="76" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD870Rule.java"/>
<file line="362" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\TestResults1MiscValidator.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Return the age of a person.
	 * 
	 * @param birthDate
	 * @return current age.
	 */
	private int calculateAge(Date birthDate) {
		int age = 0;
		if (birthDate != null) {
			Calendar currentDate = Calendar.getInstance();
			Calendar dob = Calendar.getInstance();
			dob.setTime(birthDate);
			int currentYear = currentDate.get(Calendar.YEAR);
			int dobYear = dob.get(Calendar.YEAR);
			age = currentYear - dobYear;
			int currentMonth = currentDate.get(Calendar.MONTH);
			int dobMonth = dob.get(Calendar.MONTH);
			if (dobMonth > currentMonth) {
				age--;
			}
			else if (currentMonth == dobMonth) {
				int currentDay = currentDate.get(Calendar.DAY_OF_MONTH);
				int dobDay = dob.get(Calendar.DAY_OF_MONTH);
				if (dobDay > currentDay) {
					age--;
				}
			}
		}
		return age;
	}
]]>
</codefragment>
</duplication>
<duplication lines="34" tokens="146">
<file line="34" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD769Rule.java"/>
<file line="34" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD812Rule.java"/>
<codefragment>
<![CDATA[
public class CdaD812Rule extends AbstractValidateRule {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(ProcessContext processContext) {
		CdaProcessContext cdaProcessContext = (CdaProcessContext) processContext;
		IErrorCollector errorCollector = new ErrorCollector();
		Action selectedAction = cdaProcessContext.getSelectedAction();
		if (selectedAction != null
				&& selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.ENTER_ACTION))) {
			validate(cdaProcessContext.getDriverLicense(), errorCollector);
		}
	}

	/**
	 * Validate Rule D812 for CDA test results 1
	 * 
	 * @param driverLicense
	 * @param errorCollector
	 */
	public void validate(DriverLicense driverLicense,
			IErrorCollector errorCollector) {
		if (driverLicense != null) {
			List <DrivingRestriction> existingRestrictions = driverLicense
					.getExistingRestrictions();
			List <DrivingRestriction> newRestrictions = driverLicense
					.getNewRestrictions();
			List <DrivingRestriction> restrictions = new ArrayList <DrivingRestriction>();
			if (newRestrictions != null)
				restrictions.addAll(newRestrictions);
			if (existingRestrictions != null)
				restrictions.addAll(existingRestrictions);
			int counterForRestr74 = 0;
]]>
</codefragment>
</duplication>
<duplication lines="55" tokens="146">
<file line="54" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Cda0540Rule.java"/>
<file line="58" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Cda0541Rule.java"/>
<codefragment>
<![CDATA[
						errorCollector.register(new ApplicationException("0541"));
					}
				}	 
				
				
		}
		
			setErrorCollector(errorCollector);
	}
	
	boolean isDriveAndLawTestRequirementMet( DriverLicense driverLicense ){
		
		boolean isDriveTestPassed = false;
		boolean isLawTestPassed = false;	
		
		List <DriveAndLawTestResult> driveTestResults = driverLicense.getDriveAndLawTestResultGroup()
															.getDriveAndLawTestResults(DriveAndLawTestResultType.CLASS_F_DRIVE_TEST_RESULT);
		 							
			
			for (DriveAndLawTestResult driveTestResult : driveTestResults) {
				
				String testResultCode = driveTestResult
				.getTestResultCode().getCode();
				
				if ("P".equalsIgnoreCase(testResultCode) ){ 
					isDriveTestPassed=true;
					break;
				}
				
			}
			
			List <DriveAndLawTestResult> lawTestResults = driverLicense.getDriveAndLawTestResultGroup()
															.getDriveAndLawTestResults(DriveAndLawTestResultType.CLASS_F_LAW_TEST_RESULT);
									
			
			
	
			for (DriveAndLawTestResult lawTestResult : lawTestResults) {
				
				String testResultCode = lawTestResult.getTestResultCode().getCode();
				
				if ("P".equalsIgnoreCase(testResultCode) ){ 
					isLawTestPassed=true;
					break;
				}
				
			}
			
			if ( isDriveTestPassed && isLawTestPassed  )
					return true;	
			else
					return false;
			
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="16" tokens="145">
<file line="354" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\fee\engine\impl\RulesRegistry.java"/>
<file line="141" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\fee\request\impl\CommercialDlDlpFeeRequest.java"/>
<codefragment>
<![CDATA[
		String ruleDriveRetestFeeUsed = driveRetestFeeUsed.type();
		strBuilder.append(ruleLicense1Type).append(EQUALS).append(ruleLicense1)
				.append(COLONDELIMITER);
		strBuilder.append(ruleLicense2Type).append(EQUALS).append(ruleLicense2)
				.append(COLONDELIMITER);
		strBuilder.append(ruleOriginalRenewalType).append(EQUALS).append(
				ruleOriginalRenewal).append(COLONDELIMITER);
		strBuilder.append(ruleAppFeeRequiredType).append(EQUALS).append(
				ruleAppFeeRequired).append(COLONDELIMITER);
		strBuilder.append(ruleDriveTestFeeRequiredType).append(EQUALS).append(
				ruleDriveTestFeeRequired).append(COLONDELIMITER);
		strBuilder.append(ruleDriveRetestFeeRequiredType).append(EQUALS)
				.append(ruleDriveRetestFeeRequired).append(COLONDELIMITER);
		strBuilder.append(ruleDriveRetestFeeUsedType).append(EQUALS).append(
				ruleDriveRetestFeeUsed);
		String keyClassifier = strBuilder.toString();
]]>
</codefragment>
</duplication>
<duplication lines="33" tokens="145">
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Cda0126Rule.java"/>
<file line="34" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD769Rule.java"/>
<codefragment>
<![CDATA[
public class CdaD769Rule extends AbstractValidateRule {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(ProcessContext processContext) {
		CdaProcessContext cdaProcessContext = (CdaProcessContext) processContext;
		IErrorCollector errorCollector = new ErrorCollector();
		Action selectedAction = cdaProcessContext.getSelectedAction();
		if (selectedAction != null
				&& selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.ENTER_ACTION))) {
			validate(cdaProcessContext.getDriverLicense(), errorCollector);
		}
	}

	/**
	 * Validate Rule D769 for CDA test results 1
	 * 
	 * @param driverLicense
	 * @param errorCollector
	 */
	public void validate(DriverLicense driverLicense,
			IErrorCollector errorCollector) {
		if (driverLicense != null) {
			List <DrivingRestriction> existingRestrictions = driverLicense
					.getExistingRestrictions();
			List <DrivingRestriction> newRestrictions = driverLicense
					.getNewRestrictions();
			List <DrivingRestriction> restrictions = new ArrayList <DrivingRestriction>();
			if (newRestrictions != null)
				restrictions.addAll(newRestrictions);
			if (existingRestrictions != null)
				restrictions.addAll(existingRestrictions);
]]>
</codefragment>
</duplication>
<duplication lines="44" tokens="144">
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\service\impl\test\PrintHpOsWebServiceClientTest.java"/>
<file line="65" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\service\impl\test\PrintHpOsWebServiceTest.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Initializes the Printer Information.
	 */
	private void initPrinterInfo()
	{
		this.printerInfo = new Location();
		Station station = new Station();
		station.setPrimaryPrinterId(" p3005");
		station.setAlternatePrinterId(" p3005");
		this.printerInfo.setStation(station);
	}
	
	/**
	 * Initializes the print document.
	 * 
	 * @throws Exception the exception
	 */
	private void initPrintDocument(){
		String fileSeparator = System.getProperty("file.separator");
		File file = new File("." + fileSeparator + "src" + fileSeparator
				+ "test" + fileSeparator + "resources" + fileSeparator
				+ "organDonor.ps");
		try {
			InputStream fis = new FileInputStream(file);
			printDocument = new byte[(int) file.length()];
			fis.read(printDocument);
			fis.close();
		}
		catch (FileNotFoundException e) {
			e.printStackTrace();
		}
		catch (IOException e) {
			e.printStackTrace();
		}
	}

	/**
	 * Resets the fixture state.
	 * 
	 * @throws Exception the exception
	 */
	@After
]]>
</codefragment>
</duplication>
<duplication lines="59" tokens="144">
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\request\impl\SendCdlisAndPdpsRequestBus.java"/>
<file line="47" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ts\dl\request\impl\SendCdlisAndPdpsRequestTs.java"/>
<codefragment>
<![CDATA[
	public SendCdlisAndPdpsRequestTs(License driversLicenseNumber,
			Person person, SocialSecurityDocument socialSecurityDocument,
			IUserContext userContext) {
		super(userContext);
		this.driversLicenseNumber = driversLicenseNumber;
		this.person = person;
		this.socialSecurityDocument = socialSecurityDocument;
	}

	/**
	 * Gets the drivers license number.
	 * 
	 * @return the driversLicenseNumber
	 */
	public License getDriversLicenseNumber() {
		return driversLicenseNumber;
	}

	/**
	 * Gets the person.
	 * 
	 * @return the person
	 */
	public Person getPerson() {
		return person;
	}

	/**
	 * Gets the social security document.
	 * 
	 * @return the socialSecurityDocument
	 */
	public SocialSecurityDocument getSocialSecurityDocument() {
		return socialSecurityDocument;
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fw.AbstractRequest#getValidator()
	 */
	@Override
	protected IValidator getValidator() {
		return new SendCdlisAndPdpsRequestValidator();
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fw.AbstractRequest#validate()
	 */
	@Override
	public IErrorCollector validate() {
		IErrorCollector aCollector = new ErrorCollector();
		aCollector = ((SendCdlisAndPdpsRequestValidator) getValidator())
				.validate(this.getPerson(), this.getSocialSecurityDocument(),
						this.getDriversLicenseNumber());
        //User Context Validation
        UserContextValidator contextValidator = new UserContextValidator();
        contextValidator.validate(this.getUserContext(), aCollector);
		return aCollector;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="21" tokens="143">
<file line="250" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<file line="362" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ getDlExpDateOrTextElement(), "" },
				{ getIdExpDateOrTextElement(), "Revoked" },
				{ getCurrentNameElement(), "Brad Miller, Mr" },
				{ getAkaNameElement(), "Brad Miller, Mr" },
				{ getApplicantMailingAddressElement(),
						"123 Existing Mailing St" },
				{ getApplicantMailingCityElement(), "Sacramento" },
				{ getApplicantMailingStateElement(), "CA" },
				{ getApplicantMailingZipElement(), "95815" },
				{ getApplicantResidenceAddressElement(),
						"456 Current Residence St" },
				{ getApplicantResidenceCityElement(), "Sunnyvale" },
				{ getApplicantResidenceStateElement(), "CA" },
				{ getGenderElement(), "M" },
				{ getHairColorElement(), "BLK" },
				{ getEyeColorElement(), "BLK" },
				{ getHeightInFeetsElement(), "5" },
				{ getHeightInInchesElement(), "10" },
				{ getWeightElement(), "150" },
				{ getBirthDateElement(), "06-05-77" },
				{ getClassOfRecord1Element(), "" },
]]>
</codefragment>
</duplication>
<duplication lines="56" tokens="143">
<file line="80" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\RequestInventoryConverterTest.java"/>
<file line="58" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnInventoryConverterTest.java"/>
<codefragment>
<![CDATA[
		USERCONTEXT_FIXTURE_FOR_IDA("130", "111609", "HL", "IDA", modeI, modeII);
		/** The office id. */
		private String officeId;
		/** The work date. */
		private String workDate;
		/** The tech id. */
		private String techId;
		/** The ttc. */
		private String ttc;
		/** The ModeI. */
		private CodeSetElement mode1;
		/** The ModeII. */
		private CodeSetElement mode2;

		/**
		 * Instantiates a new user context fixture.
		 * 
		 * @param officeId the office id
		 * @param workDate the work date
		 * @param techId the tech id
		 * @param ttc the ttc
		 * @param modeI the mode 1
		 * @param modeII the mode 2
		 */
		private UserContextFixture(String officeId, String workDate,
				String techId, String ttc, CodeSetElement modeI, CodeSetElement modeII) {
			this.officeId = officeId;
			this.workDate = workDate;
			this.techId = techId;
			this.ttc = ttc;
			this.mode1 = modeI;
			this.mode2 = modeII;
		}

		/**
		 * Creates the user context fixture.
		 * 
		 * @return the user context
		 */
		private UserContext createUserContextFixture() {
			UserContext userContextFixture = new UserContext();
			userContextFixture.setOfficeId(officeId);
			userContextFixture.setWorkDate(convertStringToDate(workDate,
					"mmddyy"));
			userContextFixture.setTechId(techId);
			userContextFixture.setTtc(ttc);
			userContextFixture.setOperationalMode(mode1);
			userContextFixture.setFunctionalMode(mode2);
			return userContextFixture;
		}
	}

	/**
	 * The Enum DlFixture.
	 */
	private enum DlAndIdFixture {
]]>
</codefragment>
</duplication>
<duplication lines="34" tokens="142">
<file line="142" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<file line="187" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ DRIVERS_LICENSE_ELEMENT, "I8005638" },//
				{ FULL_NAME_ELEMENT, "Alexander M Fleming" },//
				{ ADDRESS_ELEMENT, "2415 1st ave" },//
				{ CITY_ELEMENT, "SACRAMENTO" },//
				{ STATE_ELEMENT, "CA" },//
				{ ZIP_ELEMENT, "95827" },//
				{ INSURANCE_COMPANY_NUMBER_ELEMENT, "1357" },//
				{ INSURANCE_COMPANY_NAME_ELEMENT, "Test Company Name" },//
				{ CERTIFICATE_TYPE_CODE_ELEMENT, "P" },//
				{ CERTIFICATE_TYPE_ELEMENT, "P" },//
				{ COVERAGE_CODE_ELEMENT, "T" },//
				{ COVERAGE_TYPE_ELEMENT, "Type" },//
				{ POLICY_NUMBER_ELEMENT, "P56789" },//
				{ EFFECTIVE_DATE_ELEMENT, "02/02/10" },//
				{
						RECEIPT_DATE_ELEMENT,
						DocumentConverterUtil
								.convertDateToString(
										currentDateTime,
										AbstractDocumentConverter.FORMATTER_MM_SLASH_DD_SLASH_YY) },//
				{ OFFICE_ID_ELEMENT, "130" },//
				{ KEYERS_ID_ELEMENT, "KB" },//
				{
						PROCESS_DATE_ELEMENT,
						DocumentConverterUtil
								.convertDateToString(
										currentDateTime,
										AbstractDocumentConverter.FORMATTER_MM_SLASH_DD_SLASH_YY) },//
				{
						SYSTEM_TIME_ELEMENT,
						DocumentConverterUtil.convertDateToString(
								currentDateTime,
								AbstractDocumentConverter.FORMATTER_HH_mm) },
				{ HQ11_DATE_ELEMENT, "09/03/10" },//
]]>
</codefragment>
</duplication>
<duplication lines="32" tokens="142">
<file line="106" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\PersonFixtureFactory.java"/>
<file line="163" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\PersonFixtureFactory.java"/>
<codefragment>
<![CDATA[
		personName.setSuffix(SUFFIX);
		List <PersonName> personNames = new ArrayList <PersonName>();
		personNames.add(personName);
		person.setPersonNames(personNames);
		DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
		Date bdate;
		try {
			bdate = df.parse(BIRTHDATE);
			person.setBirthDate(bdate);
		}
		catch (ParseException e) {
			e.printStackTrace();
		}
		CodeSetElement licenseClass = new CodeSetElement();
		licenseClass.setCode(CLASS_OF_INQUIRY);
		driverLicense.getAppliedLicenseClasses().add(licenseClass);
		person.setDriverLicense(driverLicense);
		Address address = new Address(AddressType.MAILING);
		CodeSetElement city = new CodeSetElement();
		city.setName(CITY);
		List <Locator> locatorSet = new ArrayList <Locator>();
		locatorSet.add(address);
		//person.addAddress(address, true);
		return person;
	}

	/**
	 * This method creates a new Person for SendCdlisPdpsServiceRequest.
	 * 
	 * @return the person
	 */
	public static Person createPersonForSendCdlisPdpsServiceRequest() {
]]>
</codefragment>
</duplication>
<duplication lines="18" tokens="142">
<file line="121" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\AutomatedNameIndexDlInquiryConverter.java"/>
<file line="309" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\SearchPersonByNameConverter.java"/>
<codefragment>
<![CDATA[
		String aniActualResponse = aniMessage.substring(75);
		for (int i = 0; i < resultSize; i++) {
			AniRecord aniRecord = new AniRecord();
			String driverLicenseNumber = aniActualResponse.substring(0, 8)
					.trim();
			if (driverLicenseNumber.length() > 0) {
				aniRecord.setDriverLicenseNumber(driverLicenseNumber);
			}
			String names = aniActualResponse.substring(8, 43);
			aniRecord.setPersonName(createPersonName(names));
			Date birthDate = (convertStringToDate(aniActualResponse.substring(
					43, 49).trim(), EcsConverterHelper.FORMATTER_MM_DD_YY));
			aniRecord.setBirthDate(birthDate);
			aniRecord.setCityName(aniActualResponse.substring(49, 62).trim());
			aniRecords.add(aniRecord);
			aniActualResponse = aniActualResponse.substring(62);
		}
		response.setMatches(aniRecords);
]]>
</codefragment>
</duplication>
<duplication lines="22" tokens="142">
<file line="46" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD709Rule.java"/>
<file line="45" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD811Rule.java"/>
<codefragment>
<![CDATA[
			List <CodeSetElement> existingAttachments = cdaProcessContext
					.getDriverLicense().getExistingAttachments();
			List <CodeSetElement> newAttachments = cdaProcessContext
					.getDriverLicense().getNewAttachments();
			List <CodeSetElement> attachments = new ArrayList <CodeSetElement>();
			if (existingAttachments != null) {
				attachments.addAll(existingAttachments);
			}
			if (newAttachments != null) {
				attachments.addAll(newAttachments);
			}
			List <CodeSetElement> existingCategories = cdaProcessContext
					.getDriverLicense().getExistingCategories();
			List <CodeSetElement> newCategories = cdaProcessContext
					.getDriverLicense().getNewCategories();
			List <CodeSetElement> categories = new ArrayList <CodeSetElement>();
			if (existingCategories != null) {
				categories.addAll(existingCategories);
			}
			if (newCategories != null) {
				categories.addAll(newCategories);
			}
]]>
</codefragment>
</duplication>
<duplication lines="42" tokens="142">
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule274.java"/>
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule275.java"/>
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule276.java"/>
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule277.java"/>
<file line="38" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule278.java"/>
<codefragment>
<![CDATA[
							.getBackgroundCheckIndicator().hasCodeEqualToAnyOf(T)) {
				// If BACKGROUND RECORD CHECK INDICATOR is T.
				if (RecordConditionRulesUtil.isInquiryClassCommercial(eliRecord
						.getDriverLicense())) {
					// If pending applied license classes are A, B, C.
					if (RecordConditionRulesUtil
							.hasAppliedEndorsementMatchAnyOf(processContext,
									ENDORSEMENT_HM)) {
						// If applied endorsement is HM.
						return Boolean.TRUE;
					} else if (RecordConditionRulesUtil
							.hasRecordPendingEndorsementMatchAnyOf(eliRecord,
									ENDORSEMENT_HM)) {
						// If pending endorsements is HM.
						if (eliRecord.getEchoedDriverLicense() == null
								|| EaseUtil.isNullOrBlank(eliRecord
										.getEchoedDriverLicense()
										.getAppliedLicenseClasses())) {
							// If inquiry class is not present.
							return Boolean.TRUE;
						}
					}
				} else if (RecordConditionRulesUtil.isRecordClassContainsAnyOf(
						eliRecord.getDriverLicense(), A, B, C)) {
					// If record class is commercial.
					if (RecordConditionRulesUtil
							.isTypeTransactionCodeMatchToAnyOf(processContext,
									DLD, DRT)) {
						// If current TTC is DLD, DRT.
						if (RecordConditionRulesUtil
								.hasRecordEndorsementMatchAnyOf(eliRecord,
										ENDORSEMENT_HM)) {
							// If record endorsement is HM.
							return Boolean.TRUE;
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="28" tokens="142">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule140.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule143.java"/>
<codefragment>
<![CDATA[
public class DlaRule143 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			if (RecordConditionRulesUtil.isTypeTransactionCodeMatchToAnyOf(
					processContext, CDA, DAF)) {
				// If current TTC is CDA or DAF.
				if (eliRecord.isOriginalApplicationIndicator() != null
						&& eliRecord.isOriginalApplicationIndicator()) {
					// If ORIGINAL ORIGINAL INDICATOR is Y.
					if (RecordConditionRulesUtil.isOriginalTtcNotMatchAnyOf(
							eliRecord, DRIVER_LICENSE_APPLICATION_TTC)) {
						// If Original TTC is not D*
						if (eliRecord.getPerson() != null
								&& eliRecord.getPerson().getIdCard() != null
								&& eliRecord.getPerson().getIdCard()
										.getLicenseStatusCode() != null
								&& eliRecord.getPerson().getIdCard()
										.getLicenseStatusCode()
										.hasCodeNotEqualTo(NONE)) {
							// If ID Expiration text is NONE.
							if (!EaseUtil
									.isNullOrBlank(eliRecord.getSegments())
									&& eliRecord
]]>
</codefragment>
</duplication>
<duplication lines="50" tokens="142">
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\request\impl\SearchRecordInLocalDatabaseRequestBus.java"/>
<file line="49" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ts\dl\request\impl\SearchRecordInLocalDatabaseRequestTs.java"/>
<codefragment>
<![CDATA[
		license = this.license;

	}

	/**
	 * Gets the person.
	 * 
	 * @return the person
	 */
	public License getLicense() {
		return license;
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see gov.ca.dmv.ease.fw.AbstractRequest#getValidator()
	 */
	@Override
	protected IValidator getValidator() {
		return new PersonInquiryRequestValidator();
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see gov.ca.dmv.ease.fw.AbstractRequest#validate()
	 */
	@Override
	public IErrorCollector validate() {
		IErrorCollector aCollector = new ErrorCollector();
		DlAgeDataSingleton dlAgeDataSingleton = DlAgeDataSingleton
				.getInstance();
		List<DlAgeRequirement> dlAgeRequirements = dlAgeDataSingleton
				.getDlAgeData(getUserContext());
		if (dlAgeRequirements != null) {
			List<IValidatable> iValidatables = new ArrayList<IValidatable>();
			for (DlAgeRequirement dlAgeRequirement : dlAgeRequirements) {
				iValidatables.add(dlAgeRequirement);
			}
			aCollector = ((PersonInquiryRequestValidator) getValidator())
					.validate(this.getLicense(), iValidatables);
		}
		// User Context Validation
		UserContextValidator contextValidator = new UserContextValidator();
		contextValidator.validate(this.getUserContext(), aCollector);
		return aCollector;
	}

}
]]>
</codefragment>
</duplication>
<duplication lines="18" tokens="142">
<file line="131" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\CustomerInfoProcessContext.java"/>
<file line="84" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\context\dl\impl\SsnInquiryProcessContext.java"/>
<codefragment>
<![CDATA[
	public SsnInquiryProcessContext() {
		this(new DlApplication());
		getDlApplication().setNewLicenseNumberRequired(false);
		aniResults = new ArrayList <AniRecord>();
		Person person = new Person();
		person.setCurrentName(new PersonName());
		List <PersonName> personNames = new ArrayList <PersonName>();
		person.setPersonNames(personNames);
		person.setDriverLicense(new DriverLicense());
		person.getDriverLicense().setAppliedLicenseClasses(
				new ArrayList <CodeSetElement>());
		OutOfStateLicense outOfStateLicense = new OutOfStateLicense();
		outOfStateLicense.setName(new PersonName());
		person.setPreviousLicenses(new ArrayList <OutOfStateLicense>());
		person.addPreviousLicense(outOfStateLicense);
		getDlApplication().setApplicant(person);
		AniRecord aniRecord = new AniRecord();
		aniResults.add(aniRecord);
]]>
</codefragment>
</duplication>
<duplication lines="36" tokens="141">
<file line="623" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="246" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"051212" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_ID_EXP_DATE,
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_APPLICATION_INCOMPLETE_MESSAGE,
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="141">
<file line="248" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpFtaPaymentReceiptDocumentConverterTest.java"/>
<file line="382" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		driverLicense.addExistingRestriction(drivingRestriction);
		personFixture.setDriverLicense(driverLicense);
		Calendar birthDate = Calendar.getInstance();
		birthDate.set(1950, Calendar.JUNE, 03);
		personFixture.setBirthDate(birthDate.getTime());
		PersonName pName = new PersonName();
		pName.setFirstName("Alexander");
		pName.setLastName("Fleming");
		pName.setMiddleName("M");
		personFixture.getPersonNames().add(pName);
		personFixture.setCurrentName(pName);
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415 1st ave");
		mailingAddress.setCity("SACRAMENTO");
		mailingAddress
				.setStateCode(new CodeSetElement("CA", "CA", "California"));
		mailingAddress.setZip("95827");
		personFixture.addExistingAddress(mailingAddress);
		photoInformation.setPhotoName("YOUNG ONE");
		photoInformation.setPhotoAddress(mailingAddress);
	}

	/**
	 * Populate record.
	 */
	private void populateRecord() {
]]>
</codefragment>
</duplication>
<duplication lines="22" tokens="141">
<file line="94" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<file line="210" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ IPrintConverterConstants.DL_REC_ZBPCMZPO, "95818" },
				{ IPrintConverterConstants.DL_REC_ZBPTRNV, "199.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCAS, "10000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCHKS, "0.00" },
				{ IPrintConverterConstants.DL_REC_ZBPNETAC, "CASH BACK       :" },
				{ IPrintConverterConstants.DL_REC_ZBPNETAM, "29801.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCRDT, "0.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCARD, "20000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPCCSAL, "SALE " },
				{ IPrintConverterConstants.DL_REC_ZBPCC, "XXXXXXXXXXXX4444" },
				{ IPrintConverterConstants.DL_REC_ZBPTEXT4,
						"DMV TRANS. AMT.         CONVENIENCE FEE            TOTAL AMOUNT PAID" },
				{ IPrintConverterConstants.DL_REC_ZBPTCCCF, "0.00" },
				{
						IPrintConverterConstants.DL_REC_ZBPTEXT5,
						"YOUR CREDIT CARD STATEMENT WILL INCLUDE A $0.00 NON-REFUNDABLE CONVENIENCE FEE" },
				{ IPrintConverterConstants.DL_REC_ZBPTCCAP, "20000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPCCARD, "20000.00" },
				{ IPrintConverterConstants.DL_REC_ZBPCCEXP, "0570" },
				{ IPrintConverterConstants.DL_REC_ZBPCCAUT, "7" },
				{ IPrintConverterConstants.DL_REC_ZBP_SIGN, "$" },
				{ IPrintConverterConstants.DL_REC_ZBPOFFNM, "OFFICE -" },
]]>
</codefragment>
</duplication>
<duplication lines="19" tokens="141">
<file line="153" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\test\impl\AbstractAppHandlerTestCase.java"/>
<file line="342" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\DlApplicationFixtureFactory.java"/>
<codefragment>
<![CDATA[
	private static Invoice createInvoiceForPrintDocumentsActivityTest() {
		Invoice invoice = new Invoice();
		List <Payment> payments = new ArrayList <Payment>();
		Payment cashPayment = new CashPayment();
		Payment voucherPayment = new Voucher();
		voucherPayment.setAmount(new BigDecimal(100));
		cashPayment.setAmount(new BigDecimal(100));
		Payment debtPayment = new DebitPayment();
		debtPayment.setAmount(new BigDecimal(100));
		payments.add(cashPayment);
		payments.add(voucherPayment);
		payments.add(debtPayment);
		invoice.setPayments(payments);
		List <InvoiceItem> invoiceItems = new ArrayList <InvoiceItem>();
		invoiceItems.add(createInvoiceItem());
		invoice.setInvoiceItems(invoiceItems);
		invoice.setTotalFeeWaived(new BigDecimal(0));
		return invoice;
	}
]]>
</codefragment>
</duplication>
<duplication lines="37" tokens="141">
<file line="98" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\request\validator\impl\DlReceiptDocumentRequestValidator.java"/>
<file line="57" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\print\request\validator\impl\OrganDonorDocumentRequestValidator.java"/>
<codefragment>
<![CDATA[
			validatePerson(person, aCollector);
		}
	}

	/**
	 * Validate mailing address.
	 * 
	 * @param person the person
	 * @param aCollector the a collector
	 */
	private void validateMailingAddress(Person person,
			IErrorCollector aCollector) {
		Address mailingAddress = person.getAddress(AddressType.MAILING);
		if (isNullOrBlank(mailingAddress)) {
			addValidationExceptionInErrorCollector("NULL_MAILING_ADDRESS",
					null, aCollector);
		}
		else {
			if (isNullOrBlank(mailingAddress.getLine1())
					&& isNullOrBlank(mailingAddress.getLine2())) {
				addValidationExceptionInErrorCollector("EMPTY_MAILING_ADDRESS",
						null, aCollector);
			}
			if (isNullOrBlank(mailingAddress.getCity())) {
				addValidationExceptionInErrorCollector(
						"NULL_OR_EMPTY_MAILING_CITY", null, aCollector);
			}
			if (isNullOrBlank(mailingAddress.getState())) {
				addValidationExceptionInErrorCollector(
						"NULL_OR_EMPTY_MAILING_STATE", null, aCollector);
			}
			if (isNullOrBlank(mailingAddress.getZip())) {
				addValidationExceptionInErrorCollector(
						"NULL_OR_EMPTY_MAILING_ZIP", null, aCollector);
			}
		}
	}
]]>
</codefragment>
</duplication>
<duplication lines="41" tokens="141">
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DlInformationSearchByPlateRoHistoryAndAsOfDateRequestEcs.java"/>
<file line="52" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DlInformationSearchByVinOrPlateRequestEcs.java"/>
<codefragment>
<![CDATA[
			DlInformationSearchByVinOrPlateConverter messageConverter) {
		super(userContext, vrInformationRequest, messageConverter);
		setMultiSegment(true);
	}
	
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.ecs.request.impl.SynchronousEcsRequest#execute()
	 */
	@Override
	public DataStreamResponseEcs execute()
			throws EcsServiceException {
		DataStreamResponseEcs dataStreamResponseEcs = null;
		IErrorCollector errorCollector = getValidator().validate(this);
		if (errorCollector.hasErrors()) {
			dataStreamResponseEcs = new DataStreamResponseEcs(
					errorCollector);
		}
		else {
			//If the execute method throws EcsResponseIsNullException then it is CNA short term message.
			//In the catch block we need to register the error to the error collector.
			try {
				dataStreamResponseEcs = (DataStreamResponseEcs) super
						.execute();
			}
			catch (EcsResponseIsNullException responseIsNullException) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.CNA_SHORT_TERM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
			catch (SystemException sysEx) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.RESOURCE_PROBLEM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
		}
		return dataStreamResponseEcs;
	}
]]>
</codefragment>
</duplication>
<duplication lines="44" tokens="141">
<file line="59" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DlInformationSearchByNameRequestEcs.java"/>
<file line="52" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DlInformationSearchByPlateRoHistoryAndAsOfDateRequestEcs.java"/>
<codefragment>
<![CDATA[
		super(userContext, vrInformationRequest, messageConverter);
		setMultiSegment(true);
	}
	
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.ecs.request.impl.SynchronousEcsRequest#execute()
	 */
	@Override
	public DataStreamResponseEcs execute() throws EcsServiceException {
		DataStreamResponseEcs dataStreamResponseEcs = null;
		IErrorCollector errorCollector = getValidator().validate(this);
		if (errorCollector.hasErrors()) {
			dataStreamResponseEcs = new DataStreamResponseEcs(errorCollector);
		}
		else {
			//If the execute method throws EcsResponseIsNullException then it is CNA short term message.
			//In the catch block we need to register the error to the error collector.
			try {
				dataStreamResponseEcs = (DataStreamResponseEcs) super.execute();
			}
			catch (EcsResponseIsNullException responseIsNullException) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.CNA_SHORT_TERM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
			catch (SystemException sysEx) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.RESOURCE_PROBLEM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
		}
		return dataStreamResponseEcs;
	}
	
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fw.service.impl.AbstractRequest#getValidator()
	 */
	@Override
	protected IRequestValidator getValidator() {
		return new DlInformationSearchByPlateRoHistoryEcsValidator();
]]>
</codefragment>
</duplication>
<duplication lines="27" tokens="141">
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\DlCdlisReceiptRequestValidator.java"/>
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\DlOrganDonorReceiptRequestValidator.java"/>
<codefragment>
<![CDATA[
			if (EaseUtil.isNullOrBlank(dlAppln)) {
				collector.register(new EaseValidationException(SpringUtils
						.getMessage(INVALID_DL_APPLICATION_ERROR_MESSAGE)));
			}
			else {
				if (EaseUtil.isNullOrBlank(dlAppln.getLicense())) {
					collector.register(new EaseValidationException(SpringUtils
							.getMessage(INVALID_DL_APPLICATION_ERROR_MESSAGE)));
				}
				else {
					if (EaseUtil.isNullOrBlank(dlAppln.getLicense()
							.getLicenseNumber())) {
						collector
								.register(new EaseValidationException(
										SpringUtils
												.getMessage(INVALID_DL_APPLICATION_ERROR_MESSAGE)));
					}
					Person person = dlAppln.getApplicant();
					if (EaseUtil.isNullOrBlank(person)
							|| EaseUtil.isNullOrBlank(person.getBirthDate())) {
						collector
								.register(new EaseValidationException(
										SpringUtils
												.getMessage(INVALID_DL_APPLICATION_ERROR_MESSAGE)));
					}
				}
			}
]]>
</codefragment>
</duplication>
<duplication lines="41" tokens="141">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule26.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule27.java"/>
<codefragment>
<![CDATA[
public class DlaRule27 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String tCode) {
		if (isNoDlaHit(eliRecord)) {
			// If hit counter is 0.
			if (!EaseUtil.isNullOrBlank(tCode)
					&& tCode.equalsIgnoreCase(TCODE_DLI)) {
				// If Response TCode was DLI i.e. DL# inquiry was done and no
				// match found.
				if (isOriginalTtcNotSalesperson(eliRecord)) {
					// If Original TTC was not S*.
					if (RecordConditionRulesUtil
							.isTypeTransactionCodeMatchToAnyOf(processContext,
									DLA, IDA, IDS)) {
						// If current TTC is DLA or IDA or IDS.
						if (!RecordConditionRulesUtil
								.isXTypeLicenseRequest(eliRecord)) {
							// If X type license inquiry was not made.
							if (eliRecord.getDriverLicense() != null
									&& !EaseUtil.isNullOrBlank(eliRecord
											.getDriverLicense()
											.getLicenseNumber())) {
								// If returned DL or ID number is not blank.
								if (EaseUtil.isNullOrBlank(getErrorCode(
										eliRecord, processContext, tCode))) {
									// If Returned Error Code is not present.
									return Boolean.TRUE;
								}
							}
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="30" tokens="140">
<file line="1103" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="34" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisD900Rule.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * D900. When the Prev Lic field entry is equal to 
	 * the first two characters plus a space in LIC# 
	 * entry the System will prompt the User to verify the number 
	 * 
	 * @param applicant
	 *            applicant data
	 * @param errorCollector
	 *            the error collector
	 */
	public void D900(Person applicant,
			IErrorCollector errorCollector) {
		String prevLicenseNumber = applicant.getPreviousLicenses().get(0)
				.getLicenseNumber();
		String prevLicenseState = null;
		if (applicant.getPreviousLicenses().get(0).getIssuedByState() != null)
			prevLicenseState = applicant.getPreviousLicenses().get(0)
					.getIssuedByState().getCode();
		if ((!EaseUtil.isNullOrBlank(prevLicenseState)
				&& !EaseUtil.isNullOrBlank(prevLicenseNumber) && prevLicenseState
				.equalsIgnoreCase(prevLicenseNumber.substring(0, 2)))
				|| (!EaseUtil.isNullOrBlank(prevLicenseNumber) && prevLicenseNumber
						.indexOf(" ") > 0)) {
			errorCollector
					.register(new EaseValidationException(
							IDataCollectionErrorMessageConstants.VERIFY_OUT_OF_STATE_DL_NUMBER));
		}
	}
]]>
</codefragment>
</duplication>
<duplication lines="41" tokens="140">
<file line="32" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD523Rule.java"/>
<file line="32" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD524Rule.java"/>
<codefragment>
<![CDATA[
public class CdaD524Rule {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(DlApplication dlApplication,
			IErrorCollector errorCollector) {
		DriverLicense driverLicense = dlApplication.getLicense();
		if (!EaseUtil.isNullOrBlank(driverLicense)) {
			CommercialTestResultGroup commercialTestResultGroup = driverLicense
					.getCommercialTestResultGroup();
			if (!EaseUtil.isNullOrBlank(commercialTestResultGroup)) {
				validate(commercialTestResultGroup,
						CommercialTestResultType.GENERAL_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.AIR_BRAKES_TEST_RESULT,
						errorCollector);
				validate(
						commercialTestResultGroup,
						CommercialTestResultType.CLASSA_COMBINATION_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.TRAILERCOACH_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.FIREFIGHTER_TEST_RESULT,
						errorCollector);
				validate(
						commercialTestResultGroup,
						CommercialTestResultType.FIREFIGHTER_CLASSA_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.PASSENGER_TEST_RESULT,
						errorCollector);
				validate(
						commercialTestResultGroup,
						CommercialTestResultType.DOUBLES_OR_TRIPLES_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.TANK_TEST_RESULT,
						errorCollector);
]]>
</codefragment>
</duplication>
<duplication lines="36" tokens="139">
<file line="142" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\IssuanceReferralDocumentRequestValidatorTest.java"/>
<file line="130" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\IssuanceReferralDoublesDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		requestFixture = new IssuanceReferralDoublesDocumentRequestTus(
				userContextFixture, dlApplicationFixture);
		IErrorCollector collector = this.validatorFixture.validate(requestFixture);
		Assert.assertNotNull(collector);
		Assert.assertFalse(collector.hasErrors());
	}
	
	/**
	 * This method tests for Request being Null.
	 */
	@Test
	public void testForRequestBeingNull() {
		IErrorCollector collector = this.validatorFixture.validate(requestFixture);
		Assert.assertNotNull(collector);
		Assert.assertEquals(true, collector.hasErrors());
	}
	
	/**
	 * This method tests for InValid Request.
	 */
	@Test
	public void testForInValidRequest() {
		IErrorCollector collector = this.validatorFixture
				.validate(new CancelDlRequestEcs(null, null, null, null, null,
						null, null));
		Assert.assertNotNull(collector);
		Assert.assertEquals(true, collector.hasErrors());
	}
	
	/**
	 * This method tests for User Context Being Null.
	 */
	@Test
	public void testForUserContextBeingNull() {
		popultateDlApplication();
		requestFixture = new IssuanceReferralDoublesDocumentRequestTus(
]]>
</codefragment>
</duplication>
<duplication lines="31" tokens="139">
<file line="46" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\DafMaintenanceActivityTest.java"/>
<file line="46" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\DisplayAddressActivityTest.java"/>
<file line="46" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\DisplayDLInformationActivityTest.java"/>
<file line="46" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\DisplayOfDlApplicationDataActivityTest.java"/>
<codefragment>
<![CDATA[
		fixture = new DisplayOfDlApplicationDataActivity();
		String key = IProcessLoader.DEFAULT_TRANSITION_KEY;
		fixture.setTransitionKey(key);
		TransitionsMap transitions = new TransitionsMap();
		transitions.addTransitions(key, new EndActivity());
		fixture.setTransitions(transitions);
		SessionContext sessionContext = new SessionContext();
		sessionContext.setUserContext(UserContextFixtureFactory
				.createUserContext());
		dafProcessContext = new DafProcessContext();
		dafProcessContext.setCurrentActivity(fixture);
		Action action = new Action();
		dafProcessContext.setSelectedAction(action);
		action.setKey(IProcessLoader.DEFAULT_TRANSITION_KEY);
		action.setName("Enter");
		dafProcessContext.startIn(sessionContext);
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	@Override
	protected void tearDown() throws Exception {
		super.tearDown();
	}

	public void testPostValidate() {
		fixture.resume(dafProcessContext);
		assertEquals(
				dafProcessContext.getPurgeFallback(),
				IDafDecisionActivityConstants.FALLBACK_DISPALYOFDLAPPLICAIONDATAACTICITY);
]]>
</codefragment>
</duplication>
<duplication lines="35" tokens="138">
<file line="68" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\DlServiceActionRequestEcsValidatorTest.java"/>
<file line="68" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\FailureToPayInquiryRequestEcsValidatorTest.java"/>
<codefragment>
<![CDATA[
						.createUserContextForDLL());
		IErrorCollector collector = this.validator.validate(request);
		Assert.assertNotNull(collector);
		Assert.assertEquals(false, collector.hasErrors());
	}

	/**
	 * This method tests for Request being Null.
	 */
	@Test
	public void testForRequestBeingNull() {
		IErrorCollector collector = this.validator.validate(request);
		Assert.assertNotNull(collector);
		Assert.assertEquals(true, collector.hasErrors());
	}

	/**
	 * This method tests for InValid Request.
	 */
	@Test
	public void testForInValidRequest() {
		IErrorCollector collector = this.validator
				.validate(new CancelDlRequestEcs(null, null, null, null, null,
						null, null));
		Assert.assertNotNull(collector);
		Assert.assertEquals(true, collector.hasErrors());
	}

	/**
	 * This method tests for Invalid TTC.
	 */
	@Test
	public void testForInValidTTC() {
		UserContext userContext = UserContextFixtureFactory
				.createUserContextForFailureToPayDCF();
]]>
</codefragment>
</duplication>
<duplication lines="25" tokens="138">
<file line="990" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="62" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisD505Rule.java"/>
<codefragment>
<![CDATA[
			if (!EaseUtil.isNullOrBlank(driverLicenseNumber)
					&& "IDC".equalsIgnoreCase(ttc)
					&& !applicant.getBirthDate().equals(changedBirthDate)) {
				errorCollector
						.register(new EaseValidationException(
								IDataCollectionErrorMessageConstants.CHANGES_MUST_FIRST_BE_MADE_VIA_A_DL_APP));
			}
			// D505 - CHANGES MUST FIRST BE MADE VIA A DL APP
			if (!EaseUtil.isNullOrBlank(driverLicenseNumber)
					&& "IDC".equalsIgnoreCase(ttc)
					&& (!applicant.getGenderCode().equals(changedGender))) {
				errorCollector
						.register(new EaseValidationException(
								IDataCollectionErrorMessageConstants.CHANGES_MUST_FIRST_BE_MADE_VIA_A_DL_APP));
			}
			// D505 - CHANGES MUST FIRST BE MADE VIA A DL APP
			if (!EaseUtil.isNullOrBlank(driverLicenseNumber)
					&& "IDC".equalsIgnoreCase(ttc)
					&& (!applicant.getCurrentName().equals(
							applicant.getPreviousName()))) {
				errorCollector
						.register(new EaseValidationException(
								IDataCollectionErrorMessageConstants.CHANGES_MUST_FIRST_BE_MADE_VIA_A_DL_APP));
			}
		}
]]>
</codefragment>
</duplication>
<duplication lines="25" tokens="137">
<file line="237" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpFtaPaymentReceiptDocumentConverterTest.java"/>
<file line="163" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpProcessingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		userContextFixture.setOperationalMode(modeI);
	}

	/**
	 * Populate person.
	 */
	private void populatePerson() {
		personFixture = PersonFixtureFactory.createPerson();
		DriverLicense driverLicense = personFixture.getDriverLicense();
		PhotoInformation photoInformation = new PhotoInformation();
		driverLicense.setLicenseNumber("I8005638");
		driverLicense.setPhotoInformation(photoInformation);
		personFixture.setDriverLicense(driverLicense);
		Calendar birthDate = Calendar.getInstance();
		birthDate.set(1950, Calendar.JUNE, 03);
		personFixture.setBirthDate(birthDate.getTime());
		PersonName pName = new PersonName();
		pName.setFirstName("Alexander");
		pName.setLastName("Fleming");
		pName.setMiddleName("M");
		personFixture.getPersonNames().add(pName);
		personFixture.setCurrentName(pName);
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415 1st ave");
		mailingAddress.setLine2("SACRAMENTO CA 95818");
]]>
</codefragment>
</duplication>
<duplication lines="42" tokens="136">
<file line="67" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\AbstractInquiryStatusByDriverLicenseRequestEcs.java"/>
<file line="61" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DlInformationSearchByNameRequestEcs.java"/>
<codefragment>
<![CDATA[
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.ecs.request.impl.SynchronousEcsRequest#execute()
	 */
	@Override
	public DataStreamResponseEcs execute() throws EcsServiceException {
		DataStreamResponseEcs dataStreamResponseEcs = null;
		IErrorCollector errorCollector = getValidator().validate(this);
		if (errorCollector.hasErrors()) {
			dataStreamResponseEcs = new DataStreamResponseEcs(errorCollector);
		}
		else {
			//If the execute method throws ResponseIsNullException then it is CNA short term message.
			//In the catch block we need to register the error to the error collector.
			try {
				dataStreamResponseEcs = (DataStreamResponseEcs) super.execute();
			}
			catch (EcsResponseIsNullException responseIsNullException) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.CNA_SHORT_TERM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
			catch (SystemException sysEx) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.RESOURCE_PROBLEM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
		}
		return dataStreamResponseEcs;
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fw.service.impl.AbstractRequest#getValidator()
	 */
	@Override
	protected IRequestValidator getValidator() {
		return new DlInformationSearchByNameEcsValidator();
]]>
</codefragment>
</duplication>
<duplication lines="27" tokens="135">
<file line="181" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="342" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="665" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<file line="823" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\InstructionPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"--X N" },
				{ IPrintConverterConstants.INS_PERMIT_ISSUE_DATE_ELEMENT,
						systemDate },
				{ IPrintConverterConstants.INS_PERMIT_OFFICE_ID_ELEMENT, "130" },
				{ IPrintConverterConstants.INS_PERMIT_KEYED_BY_ELEMENT, "JA" },
				{ IPrintConverterConstants.INS_PERMIT_LRE_ID_ELEMENT, "601" },
				{ IPrintConverterConstants.INS_PERMIT_EXPIRATION_DATE_ELEMENT,
						"04-26-10" },
				{ IPrintConverterConstants.INS_PERMIT_PHOTO_NAME_ELEMENT,
						"Brad Miller" },
				{ IPrintConverterConstants.INS_PERMIT_PHOTO_ADDRESS_ELEMENT,
						"332 Photo Info Address" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_CITY_ELEMENT,
						"Sacramento" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_STATE_ELEMENT,
						"CA" },
				{ IPrintConverterConstants.INS_PERMIT_MAILING_ZIP_ELEMENT,
						"95815" },
				{ IPrintConverterConstants.INS_PERMIT_GENDER_ELEMENT, "M" },
				{ IPrintConverterConstants.INS_PERMIT_HAIR_COLOR_ELEMENT, "BLK" },
				{ IPrintConverterConstants.INS_PERMIT_EYE_COLOR_ELEMENT, "BLK" },
				{ IPrintConverterConstants.INS_PERMIT_HEIGHT_IN_FEET_ELEMENT,
						"5" },
				{ IPrintConverterConstants.INS_PERMIT_HEIGHT_IN_INCH_ELEMENT,
						"10" },
				{ IPrintConverterConstants.INS_PERMIT_WEIGHT_ELEMENT, "150" },
				{ IPrintConverterConstants.INS_PERMIT_BIRTHDATE_ELEMENT,
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="135">
<file line="307" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<file line="363" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\CounselorReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ getIdExpDateOrTextElement(), "Revoked" },
				{ getCurrentNameElement(), "Brad Miller, Mr" },
				{ getAkaNameElement(), "Brad Miller, Mr" },
				{ getApplicantMailingAddressElement(),
						"123 Existing Mailing St" },
				{ getApplicantMailingCityElement(), "Sacramento" },
				{ getApplicantMailingStateElement(), "CA" },
				{ getApplicantMailingZipElement(), "95815" },
				{ getApplicantResidenceAddressElement(),
						"456 Current Residence St" },
				{ getApplicantResidenceCityElement(), "Sunnyvale" },
				{ getApplicantResidenceStateElement(), "CA" },
				{ getGenderElement(), "M" },
				{ getHairColorElement(), "BLK" },
				{ getEyeColorElement(), "BLK" },
				{ getHeightInFeetsElement(), "5" },
				{ getHeightInInchesElement(), "10" },
				{ getWeightElement(), "150" },
				{ getBirthDateElement(), "06-05-77" },
				{ getClassOfRecord1Element(), "" },
]]>
</codefragment>
</duplication>
<duplication lines="14" tokens="133">
<file line="108" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\CommercialTestResultsDocumentRequestTusTest.java"/>
<file line="102" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\InstructionPermitDocumentRequestTusTest.java"/>
<codefragment>
<![CDATA[
				.getNewEndorsements());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getNewRestrictions());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getNewAttachments());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getAddress(AddressType.RESIDENTIAL));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getAddress(AddressType.MAILING));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getExistingAddress(AddressType.RESIDENTIAL));
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getExistingAddress(AddressType.MAILING));
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
]]>
</codefragment>
</duplication>
<duplication lines="34" tokens="133">
<file line="625" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="475" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"051212" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_APPLICATION_INCOMPLETE_MESSAGE,
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="133">
<file line="264" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtaProcessingDocumentConverterTest.java"/>
<file line="237" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpFtaPaymentReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		userContextFixture.setControlCashierSeqNumber(new Integer(123));
	}

	/**
	 * Populate person.
	 */
	private void populatePerson() {
		personFixture = PersonFixtureFactory.createPerson();
		DriverLicense driverLicense = personFixture.getDriverLicense();
		PhotoInformation photoInformation = new PhotoInformation();
		driverLicense.setLicenseNumber("I8005638");
		driverLicense.setPhotoInformation(photoInformation);
		personFixture.setDriverLicense(driverLicense);
		Calendar birthDate = Calendar.getInstance();
		birthDate.set(1950, Calendar.JUNE, 03);
		personFixture.setBirthDate(birthDate.getTime());
		PersonName pName = new PersonName();
		pName.setFirstName("Alexander");
		pName.setLastName("Fleming");
		pName.setMiddleName("M");
		personFixture.getPersonNames().add(pName);
		personFixture.setCurrentName(pName);
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415 1st ave");
]]>
</codefragment>
</duplication>
<duplication lines="49" tokens="131">
<file line="69" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\DlReceiptDocumentRequestValidatorTest.java"/>
<file line="69" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\InterimLicenseDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
	private InterimLicenseDocumentRequestValidator validateFixture;
	/** The User Context. */
	private UserContext userContextFixture = null;
	/** The Dl Application. */
	private DlApplication dlApplicationFixture = null;
	/** The Driver License */
	private DriverLicense driverLicense = null;
	/** The Person */
	private Person person = null;
	/** The Photo Information */
	private PhotoInformation photoInformation = null;
	/** Current Mailing Address */
	private Address currentMailingAddress = null;
	/** The Driving Restrictions */
	private List <DrivingRestriction> restrictions = null;
	/** The Process History  */
	private List <IProcessHistory> processHistoryList = null;
	/** The Invoice */
	private Invoice invoice = null;
	/** The Error Collector */
	IErrorCollector errorCollector = null;

	@Override
	protected void prepareTestInstance() throws Exception {
		setConfigLocations(new String[] {
				"classpath:/spring/applicationContext-fw-services.xml",
				"classpath:/spring/applicationContext-dl-ecs-converters.xml" });
		super.prepareTestInstance();
		//applicationContext = (ConfigurableApplicationContext)EaseApplicationContext.getApplicationContext();
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#setUp()
	 */
	/**
	 * Sets the fixtures
	 * @throws java.lang.Exception
	 */
	@Before
	@Override
	protected void onSetUp() throws Exception {
		if (LOGGER.isDebugEnabled()) {
			LOGGER.debug("setUp() - start");
		}
		userContextFixture = UserContextFixtureFactory
				.createUserContextForDocumentGeneration();
		initDlApplicationFixture();
		errorCollector = new ErrorCollector();
		requestFixture = new InterimLicenseDocumentRequestTus(
]]>
</codefragment>
</duplication>
<duplication lines="39" tokens="131">
<file line="78" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\validator\impl\FailureToAppearDCARequestEcsValidator.java"/>
<file line="78" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\validator\impl\FailureToPayDCFRequestEcsValidator.java"/>
<file line="78" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\validator\impl\UpdateFailureToAppearDCARequestEcsValidator.java"/>
<codefragment>
<![CDATA[
				Person dlApplicant = updateFailureToAppearDCARequestEcs.getDlApplicant();
				if (EaseUtil.isNullOrBlank(dlApplicant)) {
					this.addValidationExceptionInErrorCollector(
							PERSON_IS_EMPTY_ERROR_MESSAGE, aCollector);
				}
				else {
					//Driver Name
					if (EaseUtil.isNullOrBlank(dlApplicant.getCurrentName()
							.getLastName())) {
						this.addValidationExceptionInErrorCollector(
								PERSON_LAST_NAME_IS_EMPTY_ERROR_MESSAGE,
								aCollector);
					}
					//Birth Date
					if (EaseUtil.isNullOrBlank(dlApplicant.getBirthDate())) {
						this.addValidationExceptionInErrorCollector(
								PERSON_DATE_OF_BIRTH_IS_NULL_ERROR_MESSAGE,
								aCollector);
					}
					DriverLicense driverLicense = dlApplicant
							.getDriverLicense();
					//Driver License
					if (EaseUtil.isNullOrBlank(driverLicense)) {
						this.addValidationExceptionInErrorCollector(
								DRIVER_LICENSE_IS_EMPTY_ERROR_MESSAGE,
								aCollector);
					}
					//License Number
					else if (EaseUtil.isNullOrBlank(driverLicense
							.getLicenseNumber())) {
						this.addValidationExceptionInErrorCollector(
								DRIVER_LICENSE_NUMBER_IS_EMPTY_ERROR_MESSAGE,
								aCollector);
					}
				}//End of Else for Person Check
			}//End of Check for Request
		}//End of Check for Request Type
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="40" tokens="131">
<file line="59" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DlInformationSearchByNameRequestEcs.java"/>
<file line="53" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DlInformationSearchByVinOrPlateRequestEcs.java"/>
<codefragment>
<![CDATA[
		super(userContext, vrInformationRequest, messageConverter);
		setMultiSegment(true);
	}
	
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.ecs.request.impl.SynchronousEcsRequest#execute()
	 */
	@Override
	public DataStreamResponseEcs execute()
			throws EcsServiceException {
		DataStreamResponseEcs dataStreamResponseEcs = null;
		IErrorCollector errorCollector = getValidator().validate(this);
		if (errorCollector.hasErrors()) {
			dataStreamResponseEcs = new DataStreamResponseEcs(
					errorCollector);
		}
		else {
			//If the execute method throws EcsResponseIsNullException then it is CNA short term message.
			//In the catch block we need to register the error to the error collector.
			try {
				dataStreamResponseEcs = (DataStreamResponseEcs) super
						.execute();
			}
			catch (EcsResponseIsNullException responseIsNullException) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.CNA_SHORT_TERM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
			catch (SystemException sysEx) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.RESOURCE_PROBLEM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
		}
		return dataStreamResponseEcs;
	}
]]>
</codefragment>
</duplication>
<duplication lines="31" tokens="130">
<file line="92" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\DlCdlisReceiptRequestTusTest.java"/>
<file line="80" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\DlOrganDonorReceiptRequestTusTest.java"/>
<codefragment>
<![CDATA[
	@After
	public void tearDown() throws Exception {
		fixture = null;
	}

	/**
	 * Setup user context fixture.
	 */
	private void setUpUserContextFixture() {
		userContextFixture = new UserContext();
		userContextFixture.setUserName("MWJXA11");
		userContextFixture.setOfficeId("110");
		userContextFixture.setWorkDate(new Date());
		userContextFixture.setTechId("A1");
		userContextFixture.setRacfId("MWJXA11");
		userContextFixture.setWorkDate(new Date());
	}

	/**
	 * Setup DL Application fixture
	 */
	private void setUpDlApplicationFixture() {
		dlApplnFixture = new DlApplication();
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		CodeSetElement licenseClassC = new CodeSetElement();
		licenseClassC.setCode("C");
		driverLicense.getAppliedLicenseClasses().add(licenseClassC);
		// adding the SSN Document
		SocialSecurityDocument ssnDocument = new SocialSecurityDocument();
		ssnDocument.setSsn("123-45-6789");
]]>
</codefragment>
</duplication>
<duplication lines="43" tokens="130">
<file line="1014" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="38" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisD549Rule.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * D549. For TTC = DLC If a change is made to a DL record and the applicant
	 * also holds an ID the System will remind the User to change the birthdate
	 * on the ID.
	 * 
	 * @param ttc
	 *            transaction code
	 * @param applicant
	 *            applicant data
	 * @param eliRecord
	 *            data from storage
	 * @param changedBirthDate
	 *            keyed in birthdate
	 * @param changedGender
	 *            keyed in gender change
	 * @param errorCollector
	 *            the error collector
	 */
	public void D549(String ttc, Person applicant, EliRecord eliRecord, Date changedBirthDate, CodeSetElement changedGender,
			IErrorCollector errorCollector) {
		IdCard idCard = null;
			if (eliRecord != null) {
				idCard = eliRecord.getPerson().getIdCard();
			}
		if ("DLC".equalsIgnoreCase(ttc)
				&& idCard != null
				&& (!applicant.getBirthDate()
						.equals(changedBirthDate))) {
			errorCollector
					.register(new EaseValidationException(
							IDataCollectionErrorMessageConstants.NAME_BIRTHDATE_GENDER_AND_OR_DL_NUMBER_CHANGE_ALSO_REQUIRED_ON_ID));
		}
		if ("DLC".equalsIgnoreCase(ttc)
				&& idCard != null
				&& (!applicant.getGenderCode()
						.equals(changedGender))) {
			errorCollector
					.register(new EaseValidationException(
							IDataCollectionErrorMessageConstants.NAME_BIRTHDATE_GENDER_AND_OR_DL_NUMBER_CHANGE_ALSO_REQUIRED_ON_ID));
		}
	}
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="130">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule140.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule141.java"/>
<codefragment>
<![CDATA[
public class DlaRule141 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			if (RecordConditionRulesUtil.isTypeTransactionCodeMatchToAnyOf(
					processContext, CDA, DAF)) {
				//If current TTC is CDA or DAF.
				if (eliRecord.isOriginalApplicationIndicator() != null 
						&& eliRecord.isOriginalApplicationIndicator()) {
					//If ORIGINAL ORIGINAL INDICATOR is Y.
					if (RecordConditionRulesUtil.isOriginalTtcNotMatchAnyOf(
							eliRecord, DRIVER_LICENSE_APPLICATION_TTC)) {
						//If Original TTC is not D*
						if (eliRecord.getPerson() != null 
								&& eliRecord.getPerson().getIdCard() != null && 
								eliRecord.getPerson().getIdCard().getLicenseStatusCode() != null
								&& eliRecord.getPerson().getIdCard().getLicenseStatusCode()
								.hasCodeNotEqualTo(NONE)) {
							//If ID Expiration text is NONE.
							if (eliRecord.isDlPendingSubRecordSegmentAPresent() 
]]>
</codefragment>
</duplication>
<duplication lines="14" tokens="129">
<file line="83" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\CommercialTestResultsDocumentRequestTusTest.java"/>
<file line="87" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\InstructionPermitDocumentRequestTusTest.java"/>
<file line="81" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\InterimLicenseDocumentRequestTusTest.java"/>
<codefragment>
<![CDATA[
	public void testVoterRegistrationReceiptRequestTus() {
		Assert.assertNotNull(requestFixture);
		Assert.assertNotNull(requestFixture.getUserContext());
		Assert.assertNotNull(requestFixture.getDlApplication());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getDriverLicense());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getDriverLicense().getPhotoInformation());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getExistingLicenseClasses());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
				.getNewRestrictions());
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="129">
<file line="138" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<file line="305" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ IPrintConverterConstants.DL_REC_ZBPBAR90, "I1234567" },
				{ IPrintConverterConstants.DL_REC_ZBPHDR2,
						"RECEIPT - NOT A LICENSE OR PERMIT" },
				{ IPrintConverterConstants.DL_REC_ZBPDISCL,
						"NOT A VERIFIED IDENTIFICATION" },
				{ IPrintConverterConstants.DL_REC_ZBPAPPLH, "APPLICATION FOR" },
				{ IPrintConverterConstants.DL_REC_ZBPPNME1, "Brad Miller, Mr" },
				{ IPrintConverterConstants.DL_REC_ZBPPMAD1,
						"123 Current Mailing St" },
				{ IPrintConverterConstants.DL_REC_ZBPCMCTO, "Sacramento" },
				{ IPrintConverterConstants.DL_REC_ZBPCMSTO, "CA" },
				{ IPrintConverterConstants.DL_REC_ZBPCMZPO, "95815" },
				{ IPrintConverterConstants.DL_REC_ZBPACLS1, "C " },
				{ IPrintConverterConstants.DL_REC_ZBPAND, "&" },
				{ IPrintConverterConstants.DL_REC_ZBPACLS2, "A " },
				{ IPrintConverterConstants.DL_REC_ZBPCLASS, "CLASS:" },
				{ IPrintConverterConstants.DL_REC_ZBPCOML, "*" },
				{ IPrintConverterConstants.DL_REC_ZBPENDOR, "-- " },
				{ IPrintConverterConstants.DL_REC_ZBPTRNV, "199.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCAS, "100.00" },
]]>
</codefragment>
</duplication>
<duplication lines="35" tokens="129">
<file line="104" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\UpdateHomeAddressConfidentialityRequestEcsValidatorTest.java"/>
<file line="150" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\UpdateProofOfInsuranceInformationRequestEcsValidatorTest.java"/>
<file line="143" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\IssuanceReferralDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
				userContextFixture, dlApplicationFixture);
		IErrorCollector collector = this.validatorFixture.validate(
				requestFixture);
		Assert.assertNotNull(collector);
		Assert.assertFalse(collector.hasErrors());
	}
	
	/**
	 * This method tests for Request being Null.
	 */
	@Test
	public void testForRequestBeingNull() {
		IErrorCollector collector = this.validatorFixture.validate(
				requestFixture);
		Assert.assertNotNull(collector);
		Assert.assertEquals(true, collector.hasErrors());
	}
	
	/**
	 * This method tests for InValid Request.
	 */
	@Test
	public void testForInValidRequest() {
		IErrorCollector collector = this.validatorFixture
				.validate(new CancelDlRequestEcs(null, null, null, null, null,
						null, null));
		Assert.assertNotNull(collector);
		Assert.assertEquals(true, collector.hasErrors());
	}
	
	/**
	 * This method tests for User Context Being Null.
	 */
	@Test
	public void testForUserContextBeingNull() {
]]>
</codefragment>
</duplication>
<duplication lines="33" tokens="129">
<file line="72" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\DlParkingViolationInquiryRequestEcsValidatorTest.java"/>
<file line="68" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\DlServiceActionRequestEcsValidatorTest.java"/>
<codefragment>
<![CDATA[
						.createUserContextForDLS());
		IErrorCollector collector = this.validator.validate(request);
		Assert.assertNotNull(collector);
		Assert.assertEquals(false, collector.hasErrors());
	}

	/**
	 * This method tests for Request being Null.
	 */
	@Test
	public void testForRequestBeingNull() {
		IErrorCollector collector = this.validator.validate(request);
		Assert.assertNotNull(collector);
		Assert.assertEquals(true, collector.hasErrors());
	}

	/**
	 * This method tests for InValid Request.
	 */
	@Test
	public void testForInValidRequest() {
		IErrorCollector collector = this.validator
				.validate(new CancelDlRequestEcs(null, null, null, null, null,
						null, null));
		Assert.assertNotNull(collector);
		Assert.assertEquals(true, collector.hasErrors());
	}

	/**
	 * This method tests for Invalid TTC.
	 */
	@Test
	public void testForInValidTTC() {
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="129">
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\txs\converters\impl\CashierTransactionConverter.java"/>
<file line="85" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\txs\converters\impl\CashierTransactionConverter.java"/>
<codefragment>
<![CDATA[
		aBuilder.append(filler("", 1));
		// <item field="VCSPRCTR" key="240" length="2" converter="dmva2Int"/>
		aBuilder.append(filler("", 5));
		// <item field="VCSDFYSN" key="242" length="1" converter="dmva2BitSet"/>
		aBuilder.append(filler("", 1));
		// VCSDFYSN_2 - bit set
		aBuilder.append(filler("", 1));
		// VCSDFYSN_3 - bit set
		aBuilder.append(filler("", 1));
		// VCSDFYSN_4 - bit set
		aBuilder.append(filler("", 1));
		// VCSDFYSN_5 - bit set
		aBuilder.append(filler("", 1));
		// VCSDFYSN_6 - bit set
		aBuilder.append(filler("", 1));
		// VCSDFYSN_7 - bit set
		aBuilder.append(filler("", 1));
		// VCSDFYSN_8 - bit set
		aBuilder.append(filler("", 1));
		// <item field="VCSRconverter=" key="243" length="1"
		// converter="dmva2String"/>
		aBuilder.append(filler("", 1));
		// <item field="VCSREVID" key="253" length="1" converter="dmva2String"/>
		aBuilder.append(filler("", 1));
		// <item field="VCSKEYBY" key="254" length="2" converter="dmva2String"/>
		aBuilder.append(filler(aTransaction.getEmployeeId(), 2));
]]>
</codefragment>
</duplication>
<duplication lines="25" tokens="129">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule300.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule302.java"/>
<codefragment>
<![CDATA[
public class DlaRule302 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		IUserContext userContext = processContext.getUserContext();
		if (isSingleHit(eliRecord)) {
			if (eliRecord.getOriginalApplicationTtc() != null
					&& ArrayUtils.contains(IDENTIFICATION_CARD_APPLICATION_TTC,
							eliRecord.getOriginalApplicationTtc())) {
				// If Original TTC was I*.
				if (userContext.getTtc().equalsIgnoreCase(DLP)
						|| userContext.getTtc().equalsIgnoreCase(IDP)) {
					// If current transaction is Pending.
					if (eliRecord.getValidSsnRequired() != null
							&& eliRecord.getValidSsnRequired()
									.hasCodeEqualTo(F))
						// If VALID SSN REQUIRED indicator is F.
						if (!ArrayUtils.contains(IRT, eliRecord
								.getOriginalApplicationTtc())) {
							// If original TTC was not IRT.
							if (eliRecord
									.getPendingIdApplicationUserVerifiedSsnCode() == null
]]>
</codefragment>
</duplication>
<duplication lines="46" tokens="128">
<file line="72" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\IssuanceReferralDocumentRequestValidatorTest.java"/>
<file line="70" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\IssuanceReferralDoublesDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		validatorFixture = new IssuanceReferralDoublesDocumentRequestValidator();
	}

	/**
	 * @throws java.lang.Exception
	 */
	@After
	public void tearDown() throws Exception {
		validatorFixture = null;
	}
	
	/**
	 * Populate user context.
	 */
	private void populateUserContext() {
		userContextFixture = UserContextFixtureFactory.createUserContextForUpdateProofOfInsurance();
	}
	
	/**
	 * Load person.
	 */
	private void initPersonFixture(Person commonPersonFixture) {
		PersonFixtureFactory.createPersonForIssuanceReferralDocuments(commonPersonFixture);
	}
	
	/**
	 * Popultate dl application.
	 */
	private void popultateDlApplication() {
		dlApplicationFixture = new DlApplication();
		initPersonFixture(personFixture);
		dlApplicationFixture.setNewLicenseNumberRequired(Boolean.TRUE);
		personFixture.setPreviousLicenseNumber("A0123456");
		dlApplicationFixture.setApplicant(personFixture);
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I894567");
		dlApplicationFixture.getApplicant().setDriverLicense(driverLicense);
	}
		
	/**
	 * Populate sp application.
	 */
	private void populateSpApplication() {
		spApplicationFixture = new SalesPersonApplication();
		initPersonFixture(salesPersonFixture);
		spApplicationFixture.addIssuanceReferralMessage(IssuanceReferralMessagesType.RECORDS_TO_BE_COMBINED);
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="128">
<file line="73" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\FailureToAppearDCARequestEcsValidatorTest.java"/>
<file line="73" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\validator\impl\test\FailureToPayDCFRequestEcsValidatorTest.java"/>
<codefragment>
<![CDATA[
	public static Person createPersonForFailureToPayDCF() {
		Person person = new Person();
		Calendar calendar = new GregorianCalendar(1970, Calendar.AUGUST, 25);
		person.setBirthDate(calendar.getTime());
		List <PersonName> nameList = new ArrayList <PersonName>();
		PersonName personName = new PersonName();
		personName.setLastName("Anthony");
		personName.setFirstName("Mark");
		nameList.add(personName);
		person.setPersonNames(nameList);
		PersonName currentName = new PersonName();
		currentName.setFirstName("John");
		currentName.setLastName("Miller");
		person.setCurrentName(currentName);
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("D737373");
		person.setDriverLicense(driverLicense);
		return person;
	}

	/**
	 * This method creates Citation Detail for Failure To Pay DCF.
	 * 
	 * @return the Citation Detail
	 */
	public static CitationDetail createCitationDetailForFailureToPayDCF() {
]]>
</codefragment>
</duplication>
<duplication lines="31" tokens="128">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule67.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule68.java"/>
<codefragment>
<![CDATA[
public class DlaRule68 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String tCode) {
		if (eliRecord != null
				&& getErrorCode(eliRecord, processContext, tCode) != null) {
			if ((getErrorCode(eliRecord, processContext, tCode))
					.hasCodeEqualToAnyOf(ERROR_CODE_01, ERROR_CODE_02,
							ERROR_CODE_03)) {
				// If returned error code is 01/02/03.
				if (!EaseUtil.isNullOrBlank(tCode)
						&& tCode.equalsIgnoreCase(TCODE_DLA)) {
					// If Response TCode was DLA i.e. ANI inquiry with single
					// match.
					if (RecordConditionRulesUtil
							.isInitialInquiry(processContext)) {
						// If Initial inquiry.
						if (RecordConditionRulesUtil
								.isTypeTransactionCodeMatchToAnyOf(
										processContext, DLA, IDA, IDS)) {
							// If current TTC is DLA, IDA, IDS.
							if (!RecordConditionRulesUtil
									.isXTypeLicenseRequest(eliRecord)) {
								// If not a X license type request.
								if (!RecordConditionRulesUtil
										.isCurrentModeIsCounter(processContext)) {
									// If current mode is not Counter.
									if (!RecordConditionRulesUtil
]]>
</codefragment>
</duplication>
<duplication lines="82" tokens="127">
<file line="32" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\AutomatedDlPage.java"/>
<file line="35" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\SsnCorrectionUpdatePage.java"/>
<codefragment>
<![CDATA[
	@Override
	public void renderPreProcessing() {
	}

	@Override
	public void submitPreProcessing() {
	}

	/**
	 * Gets the dlOrIdNumber.
	 * 
	 * @return the dlOrIdNumber
	 */
	public String getDlOrIdNumber() {

		try {
			// return getSsnCorrectionApplication().getApplicant().getIdCard().
			// getLicenseNumber();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dlOrIdNumber;

	}

	/**
	 * Sets the dlOrIdNumber.
	 * 
	 * @param dlOrIdNumber
	 *            the new dlOrIdNumber
	 */
	public void setDlOrIdNumber(String dlOrIdNumber) {

		try {
			// getSsnCorrectionApplication().getApplicant().getIdCard().
			// setLicenseNumber(dlOrIdNumber);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.dlOrIdNumber = dlOrIdNumber;
	}

	/**
	 * Gets the lastname.
	 * 
	 * @return the lastname
	 */
	public String getLastname() {

		try {
			// return "";
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.lastname;

	}

	/**
	 * Sets the lastname.
	 * 
	 * @param lastname
	 *            the new lastname
	 */
	public void setLastname(String lastname) {

		try {
			// "";
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.lastname = lastname;
	}

	/**
	 * Gets the socialSecurityNumberCorrected.
	 * 
	 * @return the socialSecurityNumberCorrected
	 */
	public Integer getSocialSecurityNumberCorrected() {
]]>
</codefragment>
</duplication>
<duplication lines="22" tokens="127">
<file line="35" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD709Rule.java"/>
<file line="32" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD866Rule.java"/>
<codefragment>
<![CDATA[
public class CdaD866Rule extends AbstractValidateRule {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(ProcessContext processContext) {
		CdaProcessContext cdaProcessContext = (CdaProcessContext) processContext;
		IErrorCollector errorCollector = new ErrorCollector();
		Action selectedAction = cdaProcessContext.getSelectedAction();
		if (selectedAction != null
				&& selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.ENTER_ACTION))) {
			List <CodeSetElement> existingAttachments = cdaProcessContext
					.getDriverLicense().getExistingAttachments();
			List <CodeSetElement> newAttachments = cdaProcessContext
					.getDriverLicense().getNewAttachments();
			List <CodeSetElement> attachments = new ArrayList <CodeSetElement>();
			if (existingAttachments != null) {
				attachments.addAll(existingAttachments);
			}
			if (newAttachments != null) {
				attachments.addAll(newAttachments);
			}
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="126">
<file line="106" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\service\impl\test\PurgeDafRecordServiceTest.java"/>
<file line="243" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\service\impl\test\RetrieveDafRecordsServiceTest.java"/>
<codefragment>
<![CDATA[
		verify(mockRetrieveBusinessObjectRequest);
	}

	@SuppressWarnings("unchecked")
	public void testExecuteWithRetrievedObjectError() {
		List <Transaction> transactions = new ArrayList <Transaction>();
		Transaction transaction = new Transaction();
		transaction.setTransactionIdentifier(DAF_NUMBER);
		transactions.add(transaction);
		List aList = transactions;
		RetrieveBusinessObjectResponse perResponse = new RetrieveBusinessObjectResponse(
				aList);
		IErrorCollector collector = new ErrorCollector();
		collector.register(new Exception());
		perResponse.setErrorCollector(collector);
		expect(
				mockPersistenceServiceRequestFactory
						.createRetrieveBusinessObjectRequest(
								isA(IUserContext.class), isA(Transaction.class)))
				.andReturn(mockRetrieveBusinessObjectRequest);
		expect(mockRetrieveBusinessObjectRequest.execute()).andReturn(
				perResponse);
		replay(mockPersistenceServiceRequestFactory);
		replay(mockRetrieveBusinessObjectRequest);
]]>
</codefragment>
</duplication>
<duplication lines="61" tokens="126">
<file line="190" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\dla\ProofFilingInquiryResponsePage.java"/>
<file line="151" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\dla\ProofFilingInsCoResponsePage.java"/>
<codefragment>
<![CDATA[
		return this.dlOrIdNumber;

	}

	/**
	 * Gets the dlExpirationYear.
	 * 
	 * @return the dlExpirationYear
	 */
	public String getDlExpirationYear() {

		try {
			return getProofOfInsuranceFiling().getDriver().getDriverLicense()
					.getExpirationYear();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dlExpirationYear;

	}

	/**
	 * Gets the idExpirationYear.
	 * 
	 * @return the idExpirationYear
	 */
	public String getIdExpirationYear() {

		try {
			return getProofOfInsuranceFiling().getDriver().getIdCard()
					.getExpirationYear();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.idExpirationYear;

	}

	/**
	 * Gets the fullName.
	 * 
	 * @return the fullName
	 */
	public String getFullName() {

		try {
			return getProofOfInsuranceFiling().getDriver().getCurrentName()
					.getFullName();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.fullName;

	}

	/**
	 * Gets the birthDate.
	 * 
	 * @return the birthDate
	 */
	public String getBirthDate() {
]]>
</codefragment>
</duplication>
<duplication lines="38" tokens="126">
<file line="67" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\AbstractInquiryStatusByDriverLicenseRequestEcs.java"/>
<file line="55" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\request\impl\DlInformationSearchByVinOrPlateRequestEcs.java"/>
<codefragment>
<![CDATA[
	}
	
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.ecs.request.impl.SynchronousEcsRequest#execute()
	 */
	@Override
	public DataStreamResponseEcs execute()
			throws EcsServiceException {
		DataStreamResponseEcs dataStreamResponseEcs = null;
		IErrorCollector errorCollector = getValidator().validate(this);
		if (errorCollector.hasErrors()) {
			dataStreamResponseEcs = new DataStreamResponseEcs(
					errorCollector);
		}
		else {
			//If the execute method throws EcsResponseIsNullException then it is CNA short term message.
			//In the catch block we need to register the error to the error collector.
			try {
				dataStreamResponseEcs = (DataStreamResponseEcs) super
						.execute();
			}
			catch (EcsResponseIsNullException responseIsNullException) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.CNA_SHORT_TERM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
			catch (SystemException sysEx) {
				errorCollector = new ErrorCollector();
				errorCollector.register(new EaseValidationException(
						IEcsConstants.RESOURCE_PROBLEM_MESSAGE));
				dataStreamResponseEcs = new DataStreamResponseEcs(
						errorCollector);
			}
		}
		return dataStreamResponseEcs;
	}
]]>
</codefragment>
</duplication>
<duplication lines="32" tokens="125">
<file line="271" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="477" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDoublesDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
						"Stanley John Bishop, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ADDRESS,
						"1001 Marine Drive Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_MAILING_ZIP,
						"95825" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_ADDRESS,
						"3490 Sunshine Blvd Apt # 450" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_CITY,
						"Lake Tahoe" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_RESIDENCE_STATE,
						"CA" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_GENDER, "M" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HAIR, "BRN" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_EYES, "BLK" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_FEET,
						"5" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_HEIGHT_INCH,
						"11" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_WEIGHT,
						"160" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_PERSON_BIRTH_DATE,
						"03/05/71" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_APPLICATION_INCOMPLETE_MESSAGE,
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="125">
<file line="140" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlInfoRequestReceiptDocumentConverterTest.java"/>
<file line="171" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlInfoRequestReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
										AbstractDocumentConverter.FORMATTER_MM_SLASH_DD_SLASH_YY) },
				{ COMMENTS_ELEMENT, "" },//
				{ LICENSCE_TEXT_ELEMENT, "LIC#" },//
				{ DL_ID_NUMBER_ELEMENT, "I0000001" },//
				{ AMOUNT_DUE_ELEMENT, "2.45" },//
				{ AMOUNT_CASH_ELEMENT, "12.46" },//
				{ AMOUNT_CHECK_ELEMENT, "33.57" },//
				{ CASHBACK_ELEMENT, "CASH BACK       :" },//
				{ ADJAM_CREDIT_ELEMENT, "85.02" }, //
				{ AMOUNT_CREDIT_ELEMENT, "26.88" }, //
				{ AMOUNT_CREDIT_CARD_ELEMENT, "14.56" }, //
				{ ADJV_CREDIT_ELEMENT, "SALE " }, //
				{ NUMBER_CREDIT_ELEMENT, "XXXXXXXXXXXX4567" }, //
				{ EXPIRE_CREDIT_ELEMENT, "0516" }, //
				{ AUTHORIZATION_CREDIT_ELEMENT, "456789" }, //
				{ OFFICE_NAME_ELEMENT, "OFFICE -" }, //
				{ OFFICE_ID_ELEMENT, "130" }, //
				{ WORK_DATE_ELEMENT, "042110" }, //
				{ KEYERS_ID_ELEMENT, "KB" }, //
				{ CASHIER_SEQUENCE_ELEMENT, "9" }, //
				{ TTC_ELEMENT, "DLA" } };
		return dataArray;
	}
]]>
</codefragment>
</duplication>
<duplication lines="30" tokens="124">
<file line="163" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\CdlisNdrReportDocumentRequestValidatorTest.java"/>
<file line="164" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\PdpsNdrReportDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		dlApplicationFixture.setPdpsRecords(pdpsRecords);
		dlApplicationFixture.setApplicationDate(CommonFixtureFactory
				.convertStringToDate("20100421",
						CommonFixtureFactory.FORMATTER_CCYY_MM_DD));
		CodeSetElement applicationType = new CodeSetElement();
		applicationType.setCode("C");
		dlApplicationFixture.setApplicationType(applicationType);
		dlApplicationFixture.setApplicant(person);
		dlApplicationFixture.setLicense(driverLicense);
	}

	/**
	 * Tests the validation with different request object
	 */
	@Test
	public void testWithInValidRequest() {
		errorCollector = validateFixture
				.validate(new SendCdlisAndPdpsRequestEcs(person, 0,
						userContextFixture, new SendCdlisAndPdpsConverter()));
		assertNotNull(errorCollector);
		assertTrue(errorCollector.getEntries().size() > 0);
		assertNotNull(errorCollector.getEntries().get(0).getExceptionMessage());
	}

	/**
	 * This method tests for UserContext being Null
	 */
	@Test
	public void testWithNullUserContext() {
		requestFixture = new PdpsNdrReportDocumentRequestTus(null,
]]>
</codefragment>
</duplication>
<duplication lines="29" tokens="124">
<file line="238" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\dl\service\impl\test\CdaTaskServiceTest.java"/>
<file line="275" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\dl\service\impl\test\CdaTaskServiceTest.java"/>
<codefragment>
<![CDATA[
						.executeELB(isA(UpdateHeadquartersSystemRequestBus.class)))
				.andReturn(updateHeadquartersSystemResponseBus);
		UpdateExtendedNameIndexResponseBus updateExtendedNameIndexResponseBus = new UpdateExtendedNameIndexResponseBus(
				errorCollector);
		expect(
				mockUpdateExtendedNameIndexService
						.execute(isA(UpdateExtendedNameIndexRequestBus.class)))
				.andReturn(updateExtendedNameIndexResponseBus);
		SendLogMessageToNetworkControlCenterResponseBus sendLogMessageToNetworkControlCenterResponseBus = new SendLogMessageToNetworkControlCenterResponseBus(
				errorCollector);
		expect(
				mockSendLogMessageToNetworkControlCenterService
						.execute(isA(SendLogMessageToNetworkControlCenterRequestBus.class)))
				.andReturn(sendLogMessageToNetworkControlCenterResponseBus);
		replay(mockUpdateHeadQuartersSystemService);
		replay(mockUpdateExtendedNameIndexService);
		replay(mockSendLogMessageToNetworkControlCenterService);
		UpdateTransactionRecordRequestTs tsRequest = new UpdateTransactionRecordRequestTs(
				userContext, dlApplication);
		UpdateTransactionRecordResponseTs response = cdaTaskService
				.execute(tsRequest);
		verify(mockUpdateHeadQuartersSystemService);
		verify(mockUpdateExtendedNameIndexService);
		verify(mockSendLogMessageToNetworkControlCenterService);
		assertTrue(response.hasErrors());
	}

	@Test
	public void testExecuteGetDafRecordsResponseTsDAF() {
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="124">
<file line="899" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="55" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisD545Rule.java"/>
<codefragment>
<![CDATA[
		CodeSetElement state = new CodeSetElement();

		if (applicant.getPreviousLicenses() != null) {
			if (applicant.getPreviousLicenses().get(0).getIssuedByState() != null)
				state = applicant.getPreviousLicenses().get(0)
						.getIssuedByState();

			if (stateOnlyCodeSet.hasElement(state)
					|| USterritoryCodeSet.hasElement(state)) {
				if (EaseUtil.isNullOrBlank(applicant.getPreviousLicenses().get(0).getLicenseLocation())
						|| EaseUtil.isNullOrBlank(applicant.getPreviousLicenses().get(0)
								.getLicenseNumber())) {
					errorCollector
							.register(new EaseValidationException(
									IDataCollectionErrorMessageConstants.PREV_LIC_VS_LIC_LOC));

				}
			}
		}
	}
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="123">
<file line="250" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\TestResults2RequiredExamsValidator.java"/>
<file line="315" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\TestResults2RequiredExamsValidator.java"/>
<codefragment>
<![CDATA[
			List <CommercialTestResult> commercialTestResults, String classCode) {
		boolean passed = false;
		List <String> codes = new ArrayList <String>();
		Iterator <CommercialTestResult> commercialTestResultIterator = commercialTestResults
				.iterator();
		if (commercialTestResultIterator != null) {
			while (commercialTestResultIterator.hasNext()) {
				CommercialTestResult commercialTestResult = commercialTestResultIterator
						.next();
				if (commercialTestResult.getTestResultCode() != null) {
					codes.add(commercialTestResult.getTestResultCode()
							.getCode());
				}
			}
		}
		if (!EaseUtil.isNullOrBlank(codes)) {
			if (ArrayUtils.contains(codes, ILawTestConstants.PASS,
					ILawTestConstants.WAIVED, ILawTestConstants.SATISFACTORY)) {
				passed = true;
			}
		}
		return passed;
	}
]]>
</codefragment>
</duplication>
<duplication lines="33" tokens="123">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule303.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule304.java"/>
<codefragment>
<![CDATA[
public class DlaRule304 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			if (RecordConditionRulesUtil.isInitialInquiry(processContext)) {
				// If initial inquiry
				if (eliRecord.getEchoedDriverLicense() != null
						&& !EaseUtil.isNullOrBlank(eliRecord
								.getEchoedDriverLicense()
								.getAppliedLicenseClasses())) {
					// If class of inquiry is present.
					if (!RecordConditionRulesUtil.isInquiryClassContainsAnyOf(
							eliRecord.getEchoedDriverLicense(), F, M)) {
						// If class of inquiry is not F or M.
						if (RecordConditionRulesUtil
								.isInquiryClassCommercial(eliRecord
										.getDriverLicense())) {
							// If pending license classes are A, B, C.
							if (isAgeBetween15To21Yrs(eliRecord, processContext)) {
								return Boolean.TRUE;
							}
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="38" tokens="123">
<file line="35" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule249.java"/>
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule250.java"/>
<codefragment>
<![CDATA[
							.hasCodeEqualToAnyOf(I, T)) {
				// If ValidSsnRequired = I, T.
				if (!RecordConditionRulesUtil.isCurrentTtcMatchToAnyOfString(
						userContext.getTtc(), DLP, IDP)) {
					// If current TTC is not Pending.
					if (!RecordConditionRulesUtil
							.isInquiryClassCommercial(eliRecord
									.getEchoedDriverLicense())) {
						// If Applied Class is not Commercial.
						if (!userContext.getTtc().equalsIgnoreCase(DRT)) {
							// If current TTC is not DRT.
							if (!RecordConditionRulesUtil
									.isInquiryClassContainsAnyOf(eliRecord
											.getEchoedDriverLicense(), D)
									|| !RecordConditionRulesUtil
											.hasAppliedCategoryMatchAnyOf(
													processContext, ONE)) {
								// If Applied Class is not D or applied category
								// is not 1.
								if (!RecordConditionRulesUtil
										.isInquiryClassContainsAnyOf(eliRecord
												.getEchoedDriverLicense(), E)
										|| !RecordConditionRulesUtil
												.hasAppliedCategoryMatchAnyOf(
														processContext, TWO)) {
									// If Applied Class is not E or applied
									// category is not 2.
									return Boolean.TRUE;
								}
							}
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="123">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule131.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule142.java"/>
<codefragment>
<![CDATA[
public class DlaRule142 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			if (RecordConditionRulesUtil.isTypeTransactionCodeMatchToAnyOf(
					processContext, CDA, DAF)) {
				// If current TTC is CDA or DAF.
				if (eliRecord.isOriginalApplicationIndicator() == null
						|| !eliRecord.isOriginalApplicationIndicator()) {
					// If ORIGINAL ORIGINAL INDICATOR is not Y.
					if (RecordConditionRulesUtil.isOriginalTtcNotMatchAnyOf(
							eliRecord, DRIVER_LICENSE_APPLICATION_TTC)) {
						// If Original TTC is not D*
						if (eliRecord.getPerson() != null
								&& eliRecord.getPerson().getIdCard() != null
								&& eliRecord.getPerson().getIdCard()
										.getLicenseStatusCode() != null
								&& eliRecord.getPerson().getIdCard()
										.getLicenseStatusCode()
										.hasCodeNotEqualTo(NONE)) {
]]>
</codefragment>
</duplication>
<duplication lines="18" tokens="122">
<file line="175" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpProcessingDocumentConverterTest.java"/>
<file line="130" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\FcpProcessingDismissalDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		personFixture = new Person();
		Calendar birthDate = Calendar.getInstance();
		birthDate.set(1950, Calendar.JUNE, 03);
		personFixture.setBirthDate(birthDate.getTime());
		PersonName pName = new PersonName();
		pName.setFirstName("Alexander");
		pName.setLastName("Fleming");
		pName.setMiddleName("M");
		personFixture.getPersonNames().add(pName);
		personFixture.setCurrentName(pName);
		Address mailingAddress = new Address(AddressType.MAILING);
		mailingAddress.setLine1("2415 1st ave");
		mailingAddress.setLine2("SACRAMENTO CA 95818");
		mailingAddress.setCity("SACRAMENTO");
		mailingAddress
				.setStateCode(new CodeSetElement("CA", "CA", "California"));
		mailingAddress.setZip("95827");
		personFixture.addAddress(mailingAddress);
]]>
</codefragment>
</duplication>
<duplication lines="35" tokens="122">
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtaProcessingDocumentConverterTest.java"/>
<file line="54" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpProcessingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private FtpProcessingDocumentConverter converterFixture;
	/** The person fixture. */
	private Person personFixture;
	/** The application fixture. */
	private FtaFtpFinePaymentClearanceApplication applicationFixture;
	/** The citation detail. */
	private CitationDetail citationDetail;
	/** The section violated fixture. */
	private SectionViolated sectionViolated;
	/** The Constant ESCAPE_ELEMENT. */
	private static final String ESCAPE_ELEMENT = "ZBPPRSZ";
	/** The Constant FTA_FTP_CERT_ELEMENT. */
	private static final String FTA_FTP_CERT_ELEMENT = "ZBPHDR";
	/** The Constant DL_ID_NUMBER_ELEMENT. */
	private static final String DL_ID_NUMBER_ELEMENT = "ZBPDLID_";
	/** The Constant LAST_NAME_3_ELEMENT. */
	private static final String LAST_NAME_3_ELEMENT = "ZBP3LNME";
	/** The Constant DATE_OF_BIRTH_ELEMENT. */
	private static final String DATE_OF_BIRTH_ELEMENT = "ZBPBRTHD";
	/** The Constant DOCKET_NUMBER_ELEMENT. */
	private static final String DOCKET_NUMBER_ELEMENT = "ZBPDCKT_";
	/** The Constant VIOLATION_DATE_ELEMENT. */
	private static final String VIOLATION_DATE_ELEMENT = "ZBPVLTND";
	/** The Constant COURT_CODE_ELEMENT. */
	private static final String COURT_CODE_ELEMENT = "ZBPCRTCD";
	/** The Constant STATUTE_CODE_ELEMENTS. */
	private static final String[] STATUTE_CODE_ELEMENTS = { "ZBPSTUC1",
			"ZBPSTUC2", "ZBPSTUC3", "ZBPSTUC4", "ZBPSTUC5", "ZBPSTUC6",
			"ZBPSTUC7" };
	/** The Constant SECTION_VIOLATED_CODE_ELEMENTS. */
	private static final String[] SECTION_VIOLATED_CODE_ELEMENTS = {
			"ZBPSECV1", "ZBPSECV2", "ZBPSECV3", "ZBPSECV4", "ZBPSECV5",
			"ZBPSECV6", "ZBPSECV7" };
	/** The Constant CONVICTION_DATE_ELEMENT. */
	private static final String CONVICTION_DATE_ELEMENT = "ZBPCVTND";
]]>
</codefragment>
</duplication>
<duplication lines="18" tokens="122">
<file line="96" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\FailureToAppearDCAConverterTest.java"/>
<file line="92" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\FailureToPayDCFConverterTest.java"/>
<codefragment>
<![CDATA[
			List <SectionViolated> sectionsViolated) {
		this.dlApplicant = new Person();
		this.dlApplicant.setBirthDate(birthDate);
		PersonName currentName = new PersonName();
		currentName.setLastName(lastName);
		this.dlApplicant.setCurrentName(currentName);
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber(licenseNumber);
		this.dlApplicant.setDriverLicense(driverLicense);
		this.citationDetail = new CitationDetail();
		this.citationDetail.setDocketNumber(docketNumber);
		this.citationDetail.setViolationDate(violationDate);
		this.citationDetail.setConvictionDate(convictionDate);
		CodeSetElement courtCodeElement = new CodeSetElement(courtCode,
				courtCode, courtCode);
		this.citationDetail.setCourtCode(courtCodeElement);
		this.citationDetail.setSectionsViolated(sectionsViolated);
		this.userContext = new UserContext();
]]>
</codefragment>
</duplication>
<duplication lines="14" tokens="122">
<file line="64" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\docs\converter\impl\DlOrganDonorReceiptConverter.java"/>
<file line="62" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\docs\converter\impl\DlVoterRegistrationReceiptConverter.java"/>
<codefragment>
<![CDATA[
		setTemplate(new DlVoterRegistrationReceiptTemplate());
		dlNumber = appln.getLicense().getLicenseNumber();
		Person person = appln.getApplicant();
		firstName = person.getCurrentName().getFirstName();
		middleName = person.getCurrentName().getMiddleName();
		lastName = person.getCurrentName().getLastName();
		Address mailingAddress = DummySubjectHelper.getMailingAddress(null);
		addressLine1 = mailingAddress.getLine1();
		addressLine2 = mailingAddress.getLine2();
		Date date = person.getBirthDate();
		DateFormat dateFormat1 = new SimpleDateFormat("ddMMyy");
		DateFormat dateFormat2 = new SimpleDateFormat("dd-MM-yy");
		birthDate = dateFormat2.format(date);
		workDate = dateFormat1.format(userContext.getWorkDate());
]]>
</codefragment>
</duplication>
<duplication lines="25" tokens="121">
<file line="117" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\FailureToAppearDCAConverter.java"/>
<file line="94" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\UpdateFailureToAppearDCAConverter.java"/>
<codefragment>
<![CDATA[
		values[i++] = filler(BLANK, 7);		 									 //MFTVLIC#	7	VEHICLE LICENSE NUMBER
		if(!EaseUtil.isNullOrBlank(dispositionCodeList))
		{
			int dispositionCodesSize = dispositionCodeList.size();
			if(dispositionCodesSize <= 9)
			{
				for(CodeSetElement dispositionCode: dispositionCodeList)
				{
					values[i++] = getCodeSetElementValue(dispositionCode, 1);	//MFTDSP01	1	DISPOSITION CODE 01
				}
			}
			int fillerSize = 9 - dispositionCodesSize;
			for(int k =0; k < fillerSize; k++)
			{
				values[i++] = filler(BLANK, 1);									//MFTDSP01	1	DISPOSITION CODE 01
			}
		}
		else
		{
			for(int k = 0; k < 9; k++)
			{
				values[i++] = filler(BLANK, 1);									//MFTDSP01	1	DISPOSITION CODE 01
			}
		}
		values[i++] = filler(BLANK, 3);											//MFTBAC	3	BLOOD ALCOHOL CONTENT
]]>
</codefragment>
</duplication>
<duplication lines="14" tokens="120">
<file line="123" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FcpProcessingDismissalDocumentConverterTest.java"/>
<file line="121" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpProcessingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private void populateCitationDetail() {
		citationDetail = new CitationDetail();
		citationDetail.setDocketNumber("1234");
		citationDetail.setCourtCode(new CodeSetElement("X", "X", "X"));
		Calendar violateDate = Calendar.getInstance();
		violateDate.set(2010, Calendar.FEBRUARY, 02);
		citationDetail.setViolationDate(violateDate.getTime());
		List <SectionViolated> sectionsViolated = new ArrayList <SectionViolated>();
		sectionViolated = new SectionViolated();
		sectionViolated.setStatuteCode(new CodeSetElement("A", "A", "A"));
		sectionViolated.setSectionViolatedNumber("22350");
		sectionsViolated.add(sectionViolated);
		sectionViolated = new SectionViolated();
		sectionViolated.setStatuteCode(new CodeSetElement("X", "X", "X"));
]]>
</codefragment>
</duplication>
<duplication lines="29" tokens="120">
<file line="251" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\MoveRestrictionRecordsToAppRestrictions.java"/>
<file line="305" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\MoveRestrictionRecordsToAppRestrictions.java"/>
<codefragment>
<![CDATA[
				&& (isVisibleTestOnly || isHMTestOnly)) {
			if (isSpaceAvailable(applicationRestrictions)) {
				if (!containsInAppRestrictions(applicationRestrictions,
						IRestrictionCodesConstants.NO_AIR_BRAKES_COMM)) {
					CodeSetElement restrictionTypeCode = new CodeSetElement();
					restrictionTypeCode
							.setCode(IRestrictionCodesConstants.NO_AIR_BRAKES_COMM);
					DrivingRestriction drivingRestriction = new DrivingRestriction();
					drivingRestriction
							.setRestrictionTypeCode(restrictionTypeCode);
					applicationRestrictions.add(drivingRestriction);
				}
			}
			else {
				addError(errorCollector);
			}
		}
		//Table3-Rule7
		if ((!containsInAppRestrictions(restrictionsOfRecords,
				IRestrictionCodesConstants.NO_AIR_BRAKES_COMM))
				&& (isRequiredApplicationClassPresent(appliedLicenseClasses,
						IDlClassTypeConstants.COMMERCIAL_APP_CLASS_A)
						|| isRequiredApplicationClassPresent(
								appliedLicenseClasses,
								IDlClassTypeConstants.COMMERCIAL_APP_CLASS_B) || isRequiredApplicationClassPresent(
						appliedLicenseClasses,
						IDlClassTypeConstants.COMMERCIAL_APP_CLASS_C))
				&& isAirBreakTestFailed(airBreakCommercialTestResults)
				&& isFeeReasonCodeCorrect(
]]>
</codefragment>
</duplication>
<duplication lines="41" tokens="119">
<file line="35" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\FcpProcessingDismissalDocumentRequestTusTest.java"/>
<file line="36" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\FtaProcessingDocumentRequestTusTest.java"/>
<file line="37" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\FtpFtaPaymentReceiptDocumentRequestTusTest.java"/>
<file line="37" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\FtpProcessingDocumentRequestTusTest.java"/>
<codefragment>
<![CDATA[
public class FtpProcessingDocumentRequestTusTest {
	/** The User Context fixture */
	private UserContext userContextFixture = null;
	/** The Person fixture */
	private Person personFixture = null;
	/** The citation detail. */
	private CitationDetail citationDetail;
	/** The application fixture. */
	private FtaFtpFinePaymentClearanceApplication applicationFixture;

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#setUp()
	 */
	@Before
	public void setUp() throws Exception {
		citationDetail = new CitationDetail();
		userContextFixture = new UserContext();
		userContextFixture.setTtc("DLA");
		personFixture = new Person();
		personFixture.setBirthDate(new Date());
		applicationFixture = new FtaFtpFinePaymentClearanceApplication();
		applicationFixture.setApplicant(personFixture);
		List <CitationDetail> citationDetails = new ArrayList <CitationDetail>();
		citationDetails.add(citationDetail);
		applicationFixture.setCitationDetails(citationDetails);
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	@After
	public void tearDown() throws Exception {
		userContextFixture = null;
		personFixture = null;
	}

	/**
	 * Test method for {@link gov.ca.dmv.ease.tus.print.request.impl.FtpProcessingDocumentRequestTus}.
	 */
	@Test
	public void testFtpProcessingDocumentRequestTus() {
]]>
</codefragment>
</duplication>
<duplication lines="22" tokens="119">
<file line="173" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FcpProcessingDismissalDocumentConverterTest.java"/>
<file line="237" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpFtaPaymentReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		userContextFixture.setControlCashierSeqNumber(new Integer(123));
	}

	/**
	 * Populate person.
	 */
	private void populatePerson() {
		personFixture = PersonFixtureFactory.createPerson();
		DriverLicense driverLicense = personFixture.getDriverLicense();
		PhotoInformation photoInformation = new PhotoInformation();
		driverLicense.setLicenseNumber("I8005638");
		driverLicense.setPhotoInformation(photoInformation);
		personFixture.setDriverLicense(driverLicense);
		Calendar birthDate = Calendar.getInstance();
		birthDate.set(1950, Calendar.JUNE, 03);
		personFixture.setBirthDate(birthDate.getTime());
		PersonName pName = new PersonName();
		pName.setFirstName("Alexander");
		pName.setLastName("Fleming");
		pName.setMiddleName("M");
		personFixture.getPersonNames().add(pName);
		personFixture.setCurrentName(pName);
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="119">
<file line="72" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\InvoiceFixtureFactory.java"/>
<file line="176" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\InvoiceFixtureFactory.java"/>
<codefragment>
<![CDATA[
	public static Invoice createInvoiceForPrintDocumentsActivityTest() {
		Invoice invoice = new Invoice();
		List <Payment> payments = new ArrayList <Payment>();
		Payment cashPayment = new CashPayment();
		Payment voucherPayment = new Voucher();
		voucherPayment.setAmount(new BigDecimal(100));
		cashPayment.setAmount(new BigDecimal(100));
		payments.add(cashPayment);
		payments.add(voucherPayment);
		invoice.setPayments(payments);
		List <InvoiceItem> invoiceItems = new ArrayList <InvoiceItem>();
		invoiceItems.add(InvoiceFixtureFactory.createInvoiceItem());
		invoice.setInvoiceItems(invoiceItems);
		invoice.setTotalFeeWaived(new BigDecimal(0));
		return invoice;
	}

	/**
	 * This method creates a new InvoiceItem.
	 * 
	 * @return the invoice item
	 */
	public static InvoiceItem createInvoiceItem() {
]]>
</codefragment>
</duplication>
<duplication lines="22" tokens="119">
<file line="178" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<file line="199" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<codefragment>
<![CDATA[
	public void testCreateResponse2() {
		// res - [DS504MI80130M2I0000221SKI010nnnn11160900        SKINNER ANDY                       2415 1ST AVE                       SACRAMENTO   95818111402                                                34]
		String anInboundMessagePayload = "DS504MI80130M2I0000221SKI010nnnn11160900        SKINNER ANDY                       2415 1ST AVE                       SACRAMENTO   95818111402                                                34";
		ReturnDriverInformationAndFeeIndicatorResponseEcs response = (ReturnDriverInformationAndFeeIndicatorResponseEcs) converter
				.createResponse(anInboundMessagePayload);
		assertNotNull(response.getPerson());
		assertEquals("I0000221", response.getPerson().getDriverLicense()
				.getLicenseNumber());
		assertEquals("SKINNER", response.getPerson().getCurrentName()
				.getLastName());
		assertEquals("ANDY", response.getPerson().getCurrentName()
				.getFirstName());
		assertEquals("34", response.getPerson().getAddress(
				AddressType.RESIDENTIAL).getCounty());
		assertNotNull(response.getErrorCode().getCode());
	}

	/**
	 * Test method for {@link gov.ca.dmv.ease.ecs.convert.impl.ReturnDriverInformationAndFeeIndicatorConverter#createResponse(java.lang.String)}.
	 */
	@Test
	public void testCreateResponse3() {
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="119">
<file line="72" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\InvoiceFixtureFactory.java"/>
<file line="176" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\InvoiceFixtureFactory.java"/>
<codefragment>
<![CDATA[
	public static Invoice createInvoiceForPrintDocumentsActivityTest() {
		Invoice invoice = new Invoice();
		List <Payment> payments = new ArrayList <Payment>();
		Payment cashPayment = new CashPayment();
		Payment voucherPayment = new Voucher();
		voucherPayment.setAmount(new BigDecimal(100));
		cashPayment.setAmount(new BigDecimal(100));
		payments.add(cashPayment);
		payments.add(voucherPayment);
		invoice.setPayments(payments);
		List <InvoiceItem> invoiceItems = new ArrayList <InvoiceItem>();
		invoiceItems.add(InvoiceFixtureFactory.createInvoiceItem());
		invoice.setInvoiceItems(invoiceItems);
		invoice.setTotalFeeWaived(new BigDecimal(0));
		return invoice;
	}

	/**
	 * This method creates a new InvoiceItem.
	 * 
	 * @return the invoice item
	 */
	public static InvoiceItem createInvoiceItem() {
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="119">
<file line="39" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\activity\subprocess\impl\HQInquirySalePersonSubProcessActivity.java"/>
<file line="39" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\activity\subprocess\impl\HQInquirySubProcessActivity.java"/>
<codefragment>
<![CDATA[
	@Override
	protected String getTransitionKey(ProcessContext processContext) {
		if (processContext.getSelectedAction() == null) {
			processContext.setSelectedAction(getActionsRegistry().getAction(
					IActionsRegistry.ENTER_ACTION));
		}
		return processContext.getSelectedAction().getKey();
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.app.activity.impl.InclusionSubprocessActivity#postSubprocessExecute(gov.ca.dmv.ease.app.context.impl.ProcessContext, gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	@Override
	protected void postSubprocessExecute(ProcessContext processContext,
			ProcessContext subprocessContext) {
		if (processContext instanceof SpProcessContext) {
			SpProcessContext spProcessContext = ((SpProcessContext) processContext);
			HqInquiryProcessContext hqInquiryProcessContext = (HqInquiryProcessContext) subprocessContext;
			spProcessContext.setDlApplication(hqInquiryProcessContext
					.getDlApplication());
			spProcessContext.setDlaStartedwith(hqInquiryProcessContext
					.getDlaStartedwith());
			spProcessContext.setEliResponse(hqInquiryProcessContext
					.getEliRecord());
			copyPersonToVehicleSalesPerson(spProcessContext);
		}
]]>
</codefragment>
</duplication>
<duplication lines="22" tokens="118">
<file line="60" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\RecordDlReviewConverterTest.java"/>
<file line="67" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\impl\test\RecordDlReviewRequestEcsTest.java"/>
<codefragment>
<![CDATA[
				"classpath:spring/applicationContext*.xml");

		// Create the DL Application
		dlApplicationFixture = new DlApplication();
		Invoice invoice = new Invoice();
		dlApplicationFixture.setInvoice(invoice);

		List <InvoiceItem> invoiceItemList = new ArrayList<InvoiceItem>();
		InvoiceItem invoiceItem = new InvoiceItem();
		invoiceItemList.add(invoiceItem);
		invoice.setInvoiceItems(invoiceItemList);

		Fee fee = new Fee();
		BigDecimal feeAmount = new BigDecimal(25.00);
		BigDecimal feeWaivedAmount = new BigDecimal(5.99);
		fee.setAmount(feeAmount);
		invoiceItem.setFee(fee);
		CodeSetElement feeWaivedCode = new CodeSetElement();
		feeWaivedCode.setCode("X");
		feeWaivedCode.setDescription("Not Applicable");
		invoiceItem.setFeeWaivedReasonCode(feeWaivedCode);
		invoiceItem.setWaivedAmount(feeWaivedAmount);	
]]>
</codefragment>
</duplication>
<duplication lines="15" tokens="118">
<file line="273" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\core\dl\validator\impl\test\ConfirmCdlisResponseDataRulesTest.java"/>
<file line="295" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\core\dl\validator\impl\test\ConfirmCdlisResponseDataRulesTest.java"/>
<codefragment>
<![CDATA[
	public void testD755_all() {
		CdlisRecord cdlisRecord = new CdlisRecord();
		List<DrivingRecord> cdlisRecords = new ArrayList<DrivingRecord>();
		List<CodeSetElement> restrictions = new ArrayList<CodeSetElement>();
		CodeSetElement restrictionE = new CodeSetElement("E", "E", "E");
		CodeSetElement restrictionL = new CodeSetElement("L", "L", "L");
		restrictions.add(restrictionE);
		restrictions.add(restrictionL);
		cdlisRecord.setRestrictions(restrictions);
		CodeSetElement currentPrimaryDlNumberState = new CodeSetElement("CA",
				"CA", "CA");
		cdlisRecord.setCurrentPrimaryDlNumberState(currentPrimaryDlNumberState);
		dlApplication.setCommercialRemoveRestrictionIndicator(Boolean.TRUE);
		dlApplication.setFeeRequired(Boolean.FALSE);
		cdlisRecords.add(cdlisRecord);
]]>
</codefragment>
</duplication>
<duplication lines="19" tokens="118">
<file line="129" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\service\impl\test\RetrieveDafRecordsServiceTest.java"/>
<file line="159" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\service\impl\test\RetrieveDafRecordsServiceTest.java"/>
<codefragment>
<![CDATA[
		List <Transaction> transactions = new ArrayList <Transaction>();
		List aList = transactions;
		expect(
				mockPersistenceServiceRequestFactory
						.createRetrieveCriteriaObjectRequest(
								isA(IUserContext.class), isA(Class.class)))
				.andReturn(mockRetrieveCriteriaObjectRequest);
		RetrieveCriteriaObjectResponse perResponse = new RetrieveCriteriaObjectResponse(
				mockCriteria);
		expect(mockRetrieveCriteriaObjectRequest.execute()).andReturn(
				perResponse);
		expect(mockCriteria.add(isA(Criterion.class))).andReturn(mockCriteria);
		expect(mockCriteria.setMaxResults(1)).andReturn(mockCriteria);
		expect(mockCriteria.list()).andReturn(aList);
		replay(mockPersistenceServiceRequestFactory);
		replay(mockRetrieveCriteriaObjectRequest);
		replay(mockCriteria);
		GetSelectedDafRecordRequestBus busRequest = new GetSelectedDafRecordRequestBus(
				userContext, new Transaction());
]]>
</codefragment>
</duplication>
<duplication lines="58" tokens="118">
<file line="47" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\dla\ProofFilingInquiryPage.java"/>
<file line="141" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\dla\ProofFilingInquiryResponsePage.java"/>
<codefragment>
<![CDATA[
	@Override
	public void renderPreProcessing() {
	}

	@Override
	public void submitPreProcessing() {
	}

	/**
	 * Gets the ProofOfInsuranceFiling.
	 * 
	 * @return the ProofOfInsuranceFiling
	 */
	private ProofOfInsuranceFiling getProofOfInsuranceFiling() {
		return new ProofOfInsuranceFiling();
	}

	/**
	 * Gets the dlOrIdNumber.
	 * 
	 * @return the dlOrIdNumber
	 */
	public String getDlOrIdNumber() {

		try {
			return getProofOfInsuranceFiling().getDriver().getDriverLicense()
					.getLicenseNumber();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dlOrIdNumber;

	}

	/**
	 * Sets the dlOrIdNumber.
	 * 
	 * @param dlOrIdNumber
	 *            the new dlOrIdNumber
	 */
	public void setDlOrIdNumber(String dlOrIdNumber) {

		try {
			getProofOfInsuranceFiling().getDriver().getDriverLicense()
					.setLicenseNumber(dlOrIdNumber);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.dlOrIdNumber = dlOrIdNumber;
	}

	/**
	 * Gets the dlExpirationYear.
	 * 
	 * @return the dlExpirationYear
	 */
	public String getDlExpirationYear() {
]]>
</codefragment>
</duplication>
<duplication lines="32" tokens="118">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule304_1.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule304_2.java"/>
<codefragment>
<![CDATA[
public class DlaRule304_2 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			if (RecordConditionRulesUtil.isInitialInquiry(processContext)) {
				// If initial inquiry
				if (RecordConditionRulesUtil.isTypeTransactionCodeMatch(
						processContext, DLP)) {
					// If current TTC is DLP.
					if (eliRecord.getEchoedDriverLicense() == null
							|| EaseUtil.isNullOrBlank(eliRecord
									.getEchoedDriverLicense()
									.getAppliedLicenseClasses())) {
						// If class of inquiry is not present.
						if (!RecordConditionRulesUtil
								.hasPendingClassMatchAnyOf(eliRecord, A, B, C)) {
							// If pending class is commercial.
							if (isAgeBetween15To21Yrs(eliRecord, processContext)) {
								return Boolean.TRUE;
							}
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="29" tokens="118">
<file line="192" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\MoveRestrictionRecordsToAppRestrictions.java"/>
<file line="250" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\MoveRestrictionRecordsToAppRestrictions.java"/>
<codefragment>
<![CDATA[
						feeRequiredReasonCode)
				&& !(isVisibleTestOnly || isHMTestOnly)) {
			if (isSpaceAvailable(applicationRestrictions)) {
				if (!containsInAppRestrictions(applicationRestrictions,
						IRestrictionCodesConstants.NO_AIR_BRAKES_COMM)) {
					CodeSetElement restrictionTypeCode = new CodeSetElement();
					restrictionTypeCode
							.setCode(IRestrictionCodesConstants.NO_AIR_BRAKES_COMM);
					DrivingRestriction drivingRestriction = new DrivingRestriction();
					drivingRestriction
							.setRestrictionTypeCode(restrictionTypeCode);
					applicationRestrictions.add(drivingRestriction);
				}
			}
			else {
				addError(errorCollector);
			}
		}
		//Table3-Rule5
		if ((!containsInAppRestrictions(restrictionsOfRecords,
				IRestrictionCodesConstants.NO_AIR_BRAKES_COMM))
				&& (isRequiredApplicationClassPresent(appliedLicenseClasses,
						IDlClassTypeConstants.COMMERCIAL_APP_CLASS_A)
						|| isRequiredApplicationClassPresent(
								appliedLicenseClasses,
								IDlClassTypeConstants.COMMERCIAL_APP_CLASS_B) || isRequiredApplicationClassPresent(
						appliedLicenseClasses,
						IDlClassTypeConstants.COMMERCIAL_APP_CLASS_C))
				&& isAirBreakTestFailed(airBreakCommercialTestResults)
]]>
</codefragment>
</duplication>
<duplication lines="47" tokens="117">
<file line="52" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\FcpProcessingDismissalDocumentRequestValidatorTest.java"/>
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\FtaProcessingDocumentRequestValidatorTest.java"/>
<file line="53" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\FtpProcessingDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
	private FtpProcessingDocumentRequestValidator validateFixture;
	/** The User Context. */
	private UserContext userContextFixture;
	/** The Person. */
	private Person personFixture;
	/** The Mailing Address. */
	private Address mailingAddress;
	/** The Error Collector. */
	private IErrorCollector errorCollector;
	/** The citation detail. */
	private CitationDetail citationDetail;
	/** The section violated fixture. */
	private SectionViolated sectionViolated;
	/** The citation details. */
	private List <CitationDetail> citationDetails;
	/** The application fixture. */
	private FtaFtpFinePaymentClearanceApplication applicationFixture;

	@Override
	protected void prepareTestInstance() throws Exception {
		setConfigLocations(new String[] {
				"classpath:/spring/applicationContext-fw-services.xml",
				"classpath:/spring/applicationContext-dl-ecs-converters.xml" });
		super.prepareTestInstance();
		//applicationContext = (ConfigurableApplicationContext)EaseApplicationContext.getApplicationContext();
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#setUp()
	 */
	/**
	 * Sets the fixtures
	 * @throws java.lang.Exception
	 */
	@Before
	@Override
	protected void onSetUp() throws Exception {
		userContextFixture = UserContextFixtureFactory
				.createUserContextForDocumentGeneration();
		initPersonFixture();
		populateCitationDetail();
		applicationFixture = new FtaFtpFinePaymentClearanceApplication();
		applicationFixture.setApplicant(personFixture);
		citationDetails = new ArrayList <CitationDetail>();
		citationDetails.add(citationDetail);
		applicationFixture.setCitationDetails(citationDetails);
		requestFixture = new FtpProcessingDocumentRequestTus(
]]>
</codefragment>
</duplication>
<duplication lines="36" tokens="117">
<file line="70" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\DlOrganDonorReceiptRequestTusTest.java"/>
<file line="83" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\DlPaymentReceiptRequestTusTest.java"/>
<codefragment>
<![CDATA[
				invoiceFixture, dlApplnFixture.getLicense(), null);
		if (LOGGER.isDebugEnabled()) {
			LOGGER.debug("setUp() - end");
		}
	}

	/**
	 * @throws java.lang.Exception
	 */
	@Override
	@After
	public void tearDown() throws Exception {
		fixture = null;
	}

	/**
	 * Setup user context fixture.
	 */
	private void setUpUserContextFixture() {
		userContextFixture = new UserContext();
		userContextFixture.setUserName("MWJXA11");
		userContextFixture.setOfficeId("110");
		userContextFixture.setWorkDate(new Date());
		userContextFixture.setTechId("A1");
		userContextFixture.setRacfId("MWJXA11");
		userContextFixture.setWorkDate(new Date());
	}

	/**
	 * Setup DL Application fixture
	 */
	private void setUpDlApplicationFixture() {
		dlApplnFixture = new DlApplication();
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		CodeSetElement licenseTypeCode = new CodeSetElement();
]]>
</codefragment>
</duplication>
<duplication lines="21" tokens="117">
<file line="178" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<file line="220" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<codefragment>
<![CDATA[
	public void testCreateResponse3() {
		// res - [DS504MI80130M2I0000221SKI010nnnn11160900        SKINNER ANDY                       2415 1ST AVE                       SACRAMENTO   95818111402                                                34]
		String anInboundMessagePayload = "DS504MI80130M2I0000221SKI010nnnn11160900        SKINNER ANDY                       2415 1ST AVE                       SACRAMENTO   95818111402                                                34";
		ReturnDriverInformationAndFeeIndicatorResponseEcs response = (ReturnDriverInformationAndFeeIndicatorResponseEcs) converter
				.createResponse(anInboundMessagePayload);
		assertNotNull(response.getPerson());
		assertEquals("I0000221", response.getPerson().getDriverLicense()
				.getLicenseNumber());
		assertEquals("SKINNER", response.getPerson().getCurrentName()
				.getLastName());
		assertEquals("ANDY", response.getPerson().getCurrentName()
				.getFirstName());
		assertEquals("34", response.getPerson().getAddress(
				AddressType.RESIDENTIAL).getCounty());
		assertNotNull(response.getErrorCode().getCode());
	}

	/**
	 * Test response when anInboundMessagePayload is null.
	 */
	@Test(expected = MessageConversionException.class)
]]>
</codefragment>
</duplication>
<duplication lines="17" tokens="117">
<file line="222" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\CounselorInquiryForDisplayConverterTest.java"/>
<file line="175" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\spring\junit\AbstractSpringEcsTest.java"/>
<codefragment>
<![CDATA[
	public String removeDuplicateHeader(StringBuffer buffer) {
		String string = buffer.toString();
		if (isNullOrBlank(string)) {
			return string;
		}
		StringTokenizer tokenizer = new StringTokenizer(string, LINE_SEPARATOR);
		int headerLengh = tokenizer.nextToken().length();
		String header = string.substring(0, headerLengh);
		String body = string.replace(header, "");
		StringBuffer stringBuffer = new StringBuffer();
		if (!body.contains(header)) {
			stringBuffer.append(header).append(LINE_SEPARATOR);
		}
		stringBuffer.append(body);
		String returnString = stringBuffer.toString();
		return returnString;
	}
]]>
</codefragment>
</duplication>
<duplication lines="31" tokens="117">
<file line="1131" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="35" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisD562Rule.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * D562. When O/S Restricted Provisional field is keyed, 
	 * Prev Lic field must also be keyed 
	 * 
	 * @param dlApplication
	 *            driver lic app data
	 * @param applicant
	 *            applicant data
	 * @param errorCollector
	 *            the error collector
	 */
	public void D562(DlApplication dlApplication, Person applicant,
			IErrorCollector errorCollector) {
		String prevLicenseState = null;
		String osRestrictedProvisional = null;
		if (dlApplication.getOutOfStateDriverEducationAndTrainingWaiveCode() != null) {
			osRestrictedProvisional = dlApplication
					.getOutOfStateDriverEducationAndTrainingWaiveCode()
					.getCode();
		}
		if (applicant.getPreviousLicenses().get(0).getIssuedByState() != null)
			prevLicenseState = applicant.getPreviousLicenses().get(0)
					.getIssuedByState().getCode();
		if (!EaseUtil.isNullOrBlank(osRestrictedProvisional)
				&& EaseUtil.isNullOrBlank(prevLicenseState)) {
			errorCollector.register(new EaseValidationException(
					IDataCollectionErrorMessageConstants.PREV_LIC_VS_R_P));
		}
	}
]]>
</codefragment>
</duplication>
<duplication lines="27" tokens="117">
<file line="26" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Cda0509Rule.java"/>
<file line="30" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Cda0541Rule.java"/>
<codefragment>
<![CDATA[
public class Cda0541Rule extends AbstractValidateRule{

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(ProcessContext processContext) {
		CdaProcessContext cdaProcessContext = (CdaProcessContext) processContext;
		IErrorCollector errorCollector = new ErrorCollector();
		
		Action selectedAction = cdaProcessContext.getSelectedAction();
		
		if (selectedAction != null
				&& selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.ENTER_ACTION))) {
			
			String printDocumentRequested = cdaProcessContext
					.getDlApplication().getDlPrintRequestDocumentCode()
					.getCode();
			
				if (  printDocumentRequested != null &&
					  printDocumentRequested.trim().length() > 0 && (
					  printDocumentRequested.equals("2")  ||
					  printDocumentRequested.equals("3")  ||
					  printDocumentRequested.equals("4")
					  )) { 
					
					if (! isDriveAndLawTestRequirementMet(cdaProcessContext.getDlApplicant().getDriverLicense())){
]]>
</codefragment>
</duplication>
<duplication lines="28" tokens="117">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule66.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule67.java"/>
<codefragment>
<![CDATA[
public class DlaRule67 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordConditionRule#evaluate(gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RuleObject)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String tCode) {
		if (eliRecord != null
				&& getErrorCode(eliRecord, processContext, tCode) != null) {
			if ((getErrorCode(eliRecord, processContext, tCode))
					.hasCodeEqualToAnyOf(ERROR_CODE_01, ERROR_CODE_02,
							ERROR_CODE_03)) {
				// If returned error code is 01/02/03.
				if (!EaseUtil.isNullOrBlank(tCode)
						&& tCode.equalsIgnoreCase(TCODE_DLA)) {
					// If Response TCode was DLA i.e. ANI inquiry with single
					// match.
					if (RecordConditionRulesUtil
							.isInitialInquiry(processContext)) {
						// If Initial inquiry.
						if (RecordConditionRulesUtil
								.isTypeTransactionCodeMatchToAnyOf(
										processContext, DLA, IDA, IDS)) {
							// If current TTC is DLA, IDA, IDS.
							if (!RecordConditionRulesUtil
									.isXTypeLicenseRequest(eliRecord)) {
								// If not a X license type request.
								if (!RecordConditionRulesUtil
]]>
</codefragment>
</duplication>
<duplication lines="25" tokens="116">
<file line="122" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\CommercialTestResultsDocumentRequestValidatorTest.java"/>
<file line="123" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\VoterRegisterationRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		person = null;
	}

	/**
	 * Loads DL Application fixture
	 */
	private void initDlApplicationFixture() {
		dlApplicationFixture = new DlApplication();
		driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		// PhotoInformation object
		photoInformation = new PhotoInformation();
		photoInformation.setPhotoName("YOUNG ONE");
		Address photoAddress = new Address(AddressType.MAILING);
		photoAddress.setLine1("2007");
		photoAddress.setLine2("Arden Way");
		photoAddress.setCity("Sacramento");
		CodeSetElement photoAddressState = new CodeSetElement();
		photoAddressState.setCode("CA");
		photoAddressState.setName("California");
		photoAddressState.setDescription("California");
		photoAddress.setStateCode(photoAddressState);
		photoAddress.setZip("95825");
		photoInformation.setPhotoAddress(photoAddress);
		driverLicense.setPhotoInformation(photoInformation);
]]>
</codefragment>
</duplication>
<duplication lines="22" tokens="116">
<file line="417" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\dl\service\impl\test\CdaTaskServiceTest.java"/>
<file line="534" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\dl\service\impl\test\CdaTaskServiceTest.java"/>
<codefragment>
<![CDATA[
		NonCommercialTestResultsDocumentRequestTus nonCommercialTestResultsDocumentRequestTus = new NonCommercialTestResultsDocumentRequestTus(
				new UserContext(), new DlApplication(),
				new NonCommercialTestResultsDocumentConverter());
		expect(
				mockprintServiceRequestFactory
						.createNonCommercialTestResultsDocumentRequestTus(
								isA(UserContext.class),
								isA(DlApplication.class))).andReturn(
				nonCommercialTestResultsDocumentRequestTus);
		mockCompositePrintRequest
				.add(isA(NonCommercialTestResultsDocumentRequestTus.class));
		CommercialTestResultsDocumentRequestTus commercialTestResultsDocumentRequestTus = new CommercialTestResultsDocumentRequestTus(
				new UserContext(), new DlApplication(),
				new CommercialTestResultsDocumentConverter());
		expect(
				mockprintServiceRequestFactory
						.createCommercialTestResultsDocumentRequestTus(
								isA(UserContext.class),
								isA(DlApplication.class))).andReturn(
				commercialTestResultsDocumentRequestTus);
		mockCompositePrintRequest
				.add(isA(CommercialTestResultsDocumentRequestTus.class));
]]>
</codefragment>
</duplication>
<duplication lines="33" tokens="116">
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule11Test.java"/>
<file line="42" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule16Test.java"/>
<file line="42" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule17Test.java"/>
<file line="42" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule18Test.java"/>
<file line="44" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule1Test.java"/>
<file line="42" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule5Test.java"/>
<codefragment>
<![CDATA[
		ruleFixture = new DlaRule5();
		dlaProcessContext = new DlaProcessContext();
		dlaProcessContext.setCurrentActivity(new EndActivity());
		SessionContext sessionContext = new SessionContext();
		sessionContext.setUserContext(UserContextFixtureFactory
				.createUserContext());
		dlaProcessContext.startIn(sessionContext);
		DlApplication dlApplication = DlApplicationFixtureFactory
				.createDlApplicationForCda();
		dlaProcessContext.setDlApplication(dlApplication);
		eliRecord = EliRecordFixtureFactory
				.createEliRecordForRecordConditions();
	}

	@Override
	@After
	public void tearDown() throws Exception {
	}

	public void testEvaluateFalse() {
		//TODO Set to appropriate variable in Eli Record
		//		eliRecord.setCombineIndicator("P");
		assertFalse(ruleFixture.evaluate(eliRecord, dlaProcessContext, "DLA"));
	}

	public void testEvaluateTrue() {
		//TODO Set to appropriate variable in User Context
		//		dlaRuleObject.setTypeTtc("Initial");
		//		dlaRuleObject.setTypeOfApplicationOffSet2("A");
		//		dlaRuleObject.setMode1("C");
		assertTrue(ruleFixture.evaluate(eliRecord, dlaProcessContext, "DLA"));
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="37" tokens="116">
<file line="190" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\FailureToAppearDCAConverter.java"/>
<file line="129" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\FailureToPayDCFConverter.java"/>
<file line="148" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\UpdateFailureToAppearDCAConverter.java"/>
<codefragment>
<![CDATA[
		return new UpdateFailureToAppearDCAResponseEcs(responseMessage.substring(11, 14));
	}

	/**
	 * This method checks the Response Message Size.
	 * 
	 * @param responseMessage the Response Message
	 */
	private void checkResponseSize(String responseMessage)
	{
		int actualMessageSize = responseMessage.length();
		if(EXPECTED_RESPONSE_SIZE != actualMessageSize)
		{
			throw new MessageConversionException(
				"Invalid Response: Unable to process on hit count in message");
		}
	}
	
	/**
	 * This method check if Section Violated Code is not Empty and if its not "X"
	 * then return the Status Code else return BLANK.
	 * 
	 * @param sectionViolated the Section Violated Information
	 * @return sectionViolatedCode if its not X, else return BLANK
	 */
	private String sectionViolatedValue(SectionViolated sectionViolated) {
		String sectionViolatedCode = BLANK;
		CodeSetElement sectionViolatedStatusCode = sectionViolated.getStatuteCode();
		if (!EaseUtil.isNullOrBlank(sectionViolated) && !EaseUtil.isNullOrBlank(sectionViolatedStatusCode)
				&& !sectionViolatedStatusCode.getCode().equalsIgnoreCase(
						SECTION_VIOLATED_STATUS_X)) {
			sectionViolatedCode = sectionViolatedStatusCode.getCode() 
									+ sectionViolated.getSectionViolatedNumber();
		}
		return filler(sectionViolatedCode, 7);
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="32" tokens="116">
<file line="23" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule79.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule80.java"/>
<codefragment>
<![CDATA[
public class DlaRule80 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordConditionRule#evaluate(gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RuleObject)
	 *	
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String tCode) {
		if (isSingleHit(eliRecord)) {
			if (RecordConditionRulesUtil.isFutureDlIssueDate(eliRecord,
					processContext)) {
				// If DL Issue date is greater than Process date.
				if (RecordConditionRulesUtil.isOriginalTtcMatchAnyOf(eliRecord,
						DRIVER_LICENSE_APPLICATION_TTC)) {
					// If Original TTC was D*.
					if (eliRecord.getFeeRequiredReasonCode() == null
							|| (eliRecord.getFeeRequiredReasonCode() != null && !eliRecord
									.getFeeRequiredReasonCode().hasCodeEqualTo(
											L))) {
						// If fee reason code is not 'L'.
						return Boolean.TRUE;
					} else if (RecordConditionRulesUtil.isPastFeeDue(eliRecord,
							processContext)) {
						// If Process date is greater than Fee Due date.
						return Boolean.TRUE;
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="19" tokens="115">
<file line="113" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\LoadDafDataTest.java"/>
<file line="368" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\LoadDafDataTest.java"/>
<codefragment>
<![CDATA[
		for (int i = 9990031; i < 9990061; i++) {
			DlApplication dlApplication = new DlApplication();
			//Setting DriverLicense details
			DriverLicense driverLicense = new DriverLicense();
			driverLicense.setCreatedBy("MWCSJ3");
			driverLicense.setCreatedDate(new Date());
			driverLicense.setEffectiveDate(new Date());
			driverLicense.setExpirationDate(new Date());
			driverLicense.setExpirationDate(new Date());
			driverLicense.setIsOralTest(true);
			//Set licenseLocation
			CodeSetElement licenseLocation = new CodeSetElement();
			licenseLocation.setCode("SAC");
			licenseLocation.setName("Sacramento");
			driverLicense.setLicenseLocation(licenseLocation);
			//Set license class
			List <CodeSetElement> licenseClass = new ArrayList <CodeSetElement>();
			CodeSetElement licenseClassF = new CodeSetElement();
			licenseClassF.setCode("B");
]]>
</codefragment>
</duplication>
<duplication lines="10" tokens="115">
<file line="68" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\AutomatedNameIndexDlInquiryConverter.java"/>
<file line="71" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\SearchPersonByNameConverter.java"/>
<codefragment>
<![CDATA[
				driverLicense);
		values[5] = IEcsConverterConstants.HIT_COUNTER;
		values[6] = filler(personName.getLastName(), 20);
		values[7] = filler(personName.getFirstName(), 15);
		values[8] = filler(getMiddleName(personName), 1);
		values[9] = filler(getSuffixName(personName), 3);
		values[10] = IEcsConverterConstants.BIRTH_DATE_FIELD_CODE;
		values[11] = filler(convertDateToString(person.getBirthDate()), 6);
		values[12] = IEcsConverterConstants.CITY_FIELD_CODE;
		values[13] = filler(getCity(person), 13);
]]>
</codefragment>
</duplication>
<duplication lines="29" tokens="115">
<file line="72" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CollectTestResults1ActivityRules.java"/>
<file line="108" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CollectTestResults2ActivityRules.java"/>
<codefragment>
<![CDATA[
					cdaD524Rule.validate(cdaProcessContext.getDlApplication(),
							errorCollector);
				}
				setErrorCollector(errorCollector);
			}
		}
		else if (ITtcConstants.DAF.equals(ttc)) {
			DafProcessContext dafProcessContext = (DafProcessContext) processContext;
			Action selectedAction = dafProcessContext.getSelectedAction();
			if (selectedAction != null) {
				IErrorCollector errorCollector = new ErrorCollector();
				if (selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.UPDATE_PENDING_ACTION))) {
					dafD551Rule.validate(dafProcessContext.getDlApplication(),
							dafProcessContext.getUserContext()
									.getOperationalMode().getCode(),
							errorCollector);
				}
				setErrorCollector(errorCollector);
			}
		}
	}

	/**
	 * Sets the testResults2RequiredExamsValidator
	 *
	 * @param testResults2RequiredExamsValidator the testResults2RequiredExamsValidator to set
	 */
	public void setTestResults2RequiredExamsValidator(
]]>
</codefragment>
</duplication>
<duplication lines="39" tokens="115">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule46.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule47.java"/>
<codefragment>
<![CDATA[
public class DlaRule47 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String tCode) {
		if (eliRecord != null) {
			if (!RecordConditionRulesUtil
					.isCurrentModeIsCounter(processContext)) {
				// If current mode is not Counter.
				if (RecordConditionRulesUtil.isXTypeLicenseRequest(eliRecord)
						&& RecordConditionRulesUtil
								.isXTypeLicenseResponse(eliRecord)) {
					// If X type license inquiry and response.
					if (RecordConditionRulesUtil
							.isInitialInquiry(processContext)
							&& !RecordConditionRulesUtil
									.hasAnyMultipleAniHitsPresent(processContext)) {
						// If this is a Initial inquiry & multiple hits not
						// present.
						if (!RecordConditionRulesUtil
								.isTypeTransactionCodeMatchToAnyOf(
										processContext, CDA, DAF)) {
							// If not a CDA or DAF TTC.
							if (RecordConditionRulesUtil
									.isOriginalTtcNotMatchAnyOf(eliRecord,
											SALESPERSON_LICENSE_APPLICATION_TTC)) {
								// If original TTC was not S*.
								return Boolean.TRUE;
							}
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="28" tokens="115">
<file line="193" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\MoveRestrictionRecordsToAppRestrictions.java"/>
<file line="305" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\MoveRestrictionRecordsToAppRestrictions.java"/>
<codefragment>
<![CDATA[
				&& (isVisibleTestOnly || isHMTestOnly)) {
			if (isSpaceAvailable(applicationRestrictions)) {
				if (!containsInAppRestrictions(applicationRestrictions,
						IRestrictionCodesConstants.NO_AIR_BRAKES_COMM)) {
					CodeSetElement restrictionTypeCode = new CodeSetElement();
					restrictionTypeCode
							.setCode(IRestrictionCodesConstants.NO_AIR_BRAKES_COMM);
					DrivingRestriction drivingRestriction = new DrivingRestriction();
					drivingRestriction
							.setRestrictionTypeCode(restrictionTypeCode);
					applicationRestrictions.add(drivingRestriction);
				}
			}
			else {
				addError(errorCollector);
			}
		}
		//Table3-Rule7
		if ((!containsInAppRestrictions(restrictionsOfRecords,
				IRestrictionCodesConstants.NO_AIR_BRAKES_COMM))
				&& (isRequiredApplicationClassPresent(appliedLicenseClasses,
						IDlClassTypeConstants.COMMERCIAL_APP_CLASS_A)
						|| isRequiredApplicationClassPresent(
								appliedLicenseClasses,
								IDlClassTypeConstants.COMMERCIAL_APP_CLASS_B) || isRequiredApplicationClassPresent(
						appliedLicenseClasses,
						IDlClassTypeConstants.COMMERCIAL_APP_CLASS_C))
				&& isAirBreakTestFailed(airBreakCommercialTestResults)
]]>
</codefragment>
</duplication>
<duplication lines="17" tokens="113">
<file line="185" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDriverLicenseConverterTest.java"/>
<file line="546" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDriverLicenseConverterTest.java"/>
<codefragment>
<![CDATA[
	private void createFixtureForTestCreateMessage15(String ttc,
			String officeId, String techId, String dlIdNumber, String name,
			String aDateFeesIssued, String workDate, Integer controlCashNo) {
		userContext = new UserContext();
		userContext.setOfficeId(officeId);
		userContext.setTechId(techId);
		userContext.setTtc(ttc);
		userContext.setWorkDate(convertStringToDate(workDate, "MMddyy"));
		userContext.setControlCashierSeqNumber(controlCashNo);
		DriverLicenseFee driverLicenseFee = new DriverLicenseFee();
		FeeRateCode feeRateCodeForfamilylawind = new FeeRateCode();
		///////////////////////////////////////////////////////////
		feeRateCodeForfamilylawind.setCode("762");
		DriverLicenseRateStatus dlStatusForfamilylawind1 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind1.setFeeRatecode(feeRateCodeForfamilylawind);
		DriverLicenseRateStatus dlStatusForfamilylawind2 = new DriverLicenseRateStatus();
		dlStatusForfamilylawind2.setFeeRatecode(feeRateCodeForfamilylawind);
]]>
</codefragment>
</duplication>
<duplication lines="19" tokens="113">
<file line="368" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\LoadDafDataTest.java"/>
<file line="75" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\DlApplicationFixtureFactory.java"/>
<codefragment>
<![CDATA[
	public static DlApplication createDlApplicationForCda() {
		DlApplication dlApplication = new DlApplication();
		//Setting DriverLicense details
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setCreatedBy("MWCSJ3");
		driverLicense.setCreatedDate(new Date());
		driverLicense.setEffectiveDate(new Date());
		driverLicense.setExpirationDate(new Date());
		driverLicense.setExpirationDate(new Date());
		driverLicense.setIsOralTest(true);
		//Set licenseLocation
		CodeSetElement licenseLocation = new CodeSetElement();
		licenseLocation.setCode("SAC");
		licenseLocation.setName("Sacramento");
		driverLicense.setLicenseLocation(licenseLocation);
		//Set license class
		List <CodeSetElement> licenseClass = new ArrayList <CodeSetElement>();
		CodeSetElement licenseClassF = new CodeSetElement();
		licenseClassF.setCode("F");
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="113">
<file line="57" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\DafInquiryByDafNumberActivityTest.java"/>
<file line="57" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\DafInquiryByDlNumberActivityTest.java"/>
<codefragment>
<![CDATA[
		fixture = new DafInquiryByDlNumberActivity();
		String key = IProcessLoader.DEFAULT_TRANSITION_KEY;
		fixture.setTransitionKey(key);
		TransitionsMap transitions = new TransitionsMap();
		transitions.addTransitions(key, new EndActivity());
		fixture.setTransitions(transitions);
		mockCdaTaskService = createMock(CdaTaskService.class);
		fixture.setCdaTaskService(mockCdaTaskService);
		sessionContext = new SessionContext();
		sessionContext.setUserContext(UserContextFixtureFactory
				.createUserContext());
		cdaProcessContext = new CdaProcessContext();
		cdaProcessContext.setCurrentActivity(fixture);
		mockTransaction = createMock(Transaction.class);
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	@Override
	protected void tearDown() throws Exception {
		super.tearDown();
	}

	public void testInvoke() {
		cdaProcessContext.setDriverLicenseNumber("I1234567");
]]>
</codefragment>
</duplication>
<duplication lines="17" tokens="113">
<file line="78" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD558Rule.java"/>
<file line="58" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\TestResults2RequiredExamsValidator.java"/>
<codefragment>
<![CDATA[
				.getCommercialTestResults(CommercialTestResultType.AIR_BRAKES_TEST_RESULT);
		List <CommercialTestResult> classATestResults = commercialTestResultGroup
				.getCommercialTestResults(CommercialTestResultType.CLASSA_COMBINATION_TEST_RESULT);
		List <CommercialTestResult> trlCoachTestResults = commercialTestResultGroup
				.getCommercialTestResults(CommercialTestResultType.TRAILERCOACH_TEST_RESULT);
		List <CommercialTestResult> fireFighterTestResults = commercialTestResultGroup
				.getCommercialTestResults(CommercialTestResultType.FIREFIGHTER_TEST_RESULT);
		List <CommercialTestResult> fireFighterClassATestResults = commercialTestResultGroup
				.getCommercialTestResults(CommercialTestResultType.FIREFIGHTER_CLASSA_TEST_RESULT);
		List <CommercialTestResult> passengerTestResults = commercialTestResultGroup
				.getCommercialTestResults(CommercialTestResultType.PASSENGER_TEST_RESULT);
		List <CommercialTestResult> doubleOrTripleTestResults = commercialTestResultGroup
				.getCommercialTestResults(CommercialTestResultType.DOUBLES_OR_TRIPLES_TEST_RESULT);
		List <CommercialTestResult> tankTestResults = commercialTestResultGroup
				.getCommercialTestResults(CommercialTestResultType.TANK_TEST_RESULT);
		List <CommercialTestResult> hmTestResults = commercialTestResultGroup
				.getCommercialTestResults(CommercialTestResultType.HAZMAT_TEST_RESULT);
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="113">
<file line="279" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\MoveRestrictionRecordsToAppRestrictions.java"/>
<file line="335" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\MoveRestrictionRecordsToAppRestrictions.java"/>
<codefragment>
<![CDATA[
						feeRequiredReasonCode)
				&& (isVisibleTestOnly || isHMTestOnly)) {
			if (isSpaceAvailable(applicationRestrictions)) {
				if (!containsInAppRestrictions(applicationRestrictions,
						IRestrictionCodesConstants.NO_AIR_BRAKES_COMM)) {
					CodeSetElement restrictionTypeCode = new CodeSetElement();
					restrictionTypeCode
							.setCode(IRestrictionCodesConstants.NO_AIR_BRAKES_COMM);
					DrivingRestriction drivingRestriction = new DrivingRestriction();
					drivingRestriction
							.setRestrictionTypeCode(restrictionTypeCode);
					applicationRestrictions.add(drivingRestriction);
				}
			}
			else {
				addError(errorCollector);
			}
		}
		//Table3-Rule8
		if ((!containsInAppRestrictions(restrictionsOfRecords,
				IRestrictionCodesConstants.NO_AIR_BRAKES_COMM))
				&& (isRequiredNonCommCategoryPresent(newCategories,
						IDlCategories.FIREFIGHTER_CLS_A) || isRequiredNonCommCategoryPresent(
						newCategories, IDlCategories.FIREFIGHTER_CLS_B))
				&& isAirBreakTestFailed(airBreakCommercialTestResults)
				&& isFeeReasonCodeCorrect(
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="112">
<file line="181" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<file line="252" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<file line="273" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<file line="294" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<file line="315" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<codefragment>
<![CDATA[
		ReturnDriverInformationAndFeeIndicatorResponseEcs response = (ReturnDriverInformationAndFeeIndicatorResponseEcs) converter
				.createResponse(anInboundMessagePayload);
		assertNotNull(response.getPerson());
		assertEquals("I0000221", response.getPerson().getDriverLicense()
				.getLicenseNumber());
		assertEquals("SKINNER", response.getPerson().getCurrentName()
				.getLastName());
		assertEquals("ANDY", response.getPerson().getCurrentName()
				.getFirstName());
		assertEquals("34", response.getPerson().getAddress(
				AddressType.RESIDENTIAL).getCounty());
		assertNotNull(response.getErrorCode().getCode());
	}
	
	
	/**
	 * Test method for {@link gov.ca.dmv.ease.ecs.convert.impl.ReturnDriverInformationAndFeeIndicatorConverter#createResponse(java.lang.String)}.
	 */
	@Test
	public void testCreateResponseWithReissueInd5() {
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="112">
<file line="26" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule234.java"/>
<file line="26" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule235.java"/>
<file line="26" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule236.java"/>
<codefragment>
<![CDATA[
public class DlaRule236 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		IUserContext userContext = processContext.getUserContext();
		if (isSingleHit(eliRecord)) {
			if (!RecordConditionRulesUtil.isXTypeLicenseResponse(eliRecord)) {
				// If not X type returned license number.
				if (eliRecord.getDriverLicense() != null
						&& !EaseUtil.isNullOrBlank(eliRecord.getDriverLicense()
								.getExistingLicenseClasses())) {
					// If Class of Record = A, B, C, D, E, F, M i.e of any
					// value.
					if (!RecordConditionRulesUtil
							.isCurrentTtcMatchToAnyOfString(userContext
									.getTtc(), DLA, DLE, DLP)) {
						// If current TTC is not DLA, DLE, DLP
						if (eliRecord.getDlRenewalMessageCode() != null
								&& eliRecord.getDlRenewalMessageCode()
										.hasCodeEqualTo(R)) {
]]>
</codefragment>
</duplication>
<duplication lines="30" tokens="111">
<file line="113" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\test\impl\AbstractAppHandlerTestCase.java"/>
<file line="64" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\DriverLicenseFixtureFactory.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * This method creates the DriverLicense Object.
	 * 
	 * @return DriverLicense driver license.
	 */
	public static DriverLicense createDriverLicense() {
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setCreatedBy("122345");
		driverLicense.setCreatedDate(new Date());
		driverLicense.setEffectiveDate(new Date());
		driverLicense.setExpirationDate(new Date());
		driverLicense.setExpirationDate(new Date());
		CodeSetElement licenseLocation = new CodeSetElement();
		licenseLocation.setCode("SAC");
		licenseLocation.setName("Sacramento");
		driverLicense.setLicenseLocation(licenseLocation);
		driverLicense.setLicenseStatusCode(new CodeSetElement());
		driverLicense.setLicenseNumber("D737373");
		driverLicense.setLicenseStatusCode(new CodeSetElement());
		return driverLicense;
	}

	/**
	 * This method creates a new Inventory Item.
	 * 
	 * @return the inventory item
	 */
	public static InventoryItem createInventoryItem() {
]]>
</codefragment>
</duplication>
<duplication lines="12" tokens="111">
<file line="109" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\CollectDlTransactionCategoryActivityTest.java"/>
<file line="103" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\CollectTransactionTypeActivityTest.java"/>
<codefragment>
<![CDATA[
				.getAvailableActions(dlMenuProcessContext);
		assertNotNull(actions);
		assertEquals(actions.size(), 6);
		assertEquals(actions.get(0).getName(), "Enter");
		assertEquals(actions.get(1).getName(), "Restart");
		assertEquals(actions.get(2).getName(), "SignOff");
		assertEquals(actions.get(3).getName(), "ResetMode");
		assertEquals(actions.get(4).getName(), "StartClock");
		//assertEquals(actions.get(5).getActionName(), "DatabaseStatus");
		assertEquals(actions.get(5).getName(), "ReviewMessages");
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="25" tokens="111">
<file line="1159" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="34" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisD544Rule.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * D544. Required fields cross-validation if Prev Lic=OT then CNTRY is
	 * required 
	 * 
	 * @param applicant
	 *            applicant data
	 * @param errorCollector
	 *            the error collector
	 */
	public void D544(Person applicant,
			IErrorCollector errorCollector) {
		String prevLicenseCountry = applicant.getPreviousLicenses().get(0)
				.getIssuedByCountry();
		String prevLicenseState = null;
		if (applicant.getPreviousLicenses().get(0).getIssuedByState() != null)
			prevLicenseState = applicant.getPreviousLicenses().get(0)
					.getIssuedByState().getCode();
		if (!EaseUtil.isNullOrBlank(prevLicenseState) && "OT".equalsIgnoreCase(prevLicenseState)
				&& EaseUtil.isNullOrBlank(prevLicenseCountry)) {
			errorCollector.register(new EaseValidationException(
					IDataCollectionErrorMessageConstants.PREV_LIC_VS_CNTRY));
		}
	}
]]>
</codefragment>
</duplication>
<duplication lines="17" tokens="111">
<file line="41" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD709Rule.java"/>
<file line="44" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD754Rule.java"/>
<codefragment>
<![CDATA[
		IErrorCollector errorCollector = new ErrorCollector();
		Action selectedAction = cdaProcessContext.getSelectedAction();
		if (selectedAction != null
				&& selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.ENTER_ACTION))) {
			List <CodeSetElement> existingAttachments = cdaProcessContext
					.getDriverLicense().getExistingAttachments();
			List <CodeSetElement> newAttachments = cdaProcessContext
					.getDriverLicense().getNewAttachments();
			List <CodeSetElement> attachments = new ArrayList <CodeSetElement>();
			if (existingAttachments != null) {
				attachments.addAll(existingAttachments);
			}
			if (newAttachments != null) {
				attachments.addAll(newAttachments);
			}
			List <DrivingRestriction> existingRestrictions = cdaProcessContext
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="111">
<file line="31" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD686Rule.java"/>
<file line="31" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\D687Rule.java"/>
<codefragment>
<![CDATA[
public class D687Rule extends AbstractValidateRule{

	
	public void validate(ProcessContext processContext) {
		CdaProcessContext cdaProcessContext = (CdaProcessContext) processContext;
		IErrorCollector errorCollector = new ErrorCollector();
		Action selectedAction = cdaProcessContext.getSelectedAction();
		if (selectedAction != null
				&& selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.ENTER_ACTION))) {
			
			
			List <CodeSetElement>   licenseClasses = cdaProcessContext.getDriverLicense()
																	.getExistingLicenseClasses();
			
			List <DriveAndLawTestResult> driveAndLawTestResults = cdaProcessContext
			.getDriveAndLawTestResultGroup()
			.getDriveAndLawTestResults(
					DriveAndLawTestResultType.CLASS_F_DRIVE_TEST_RESULT);
			
			for ( DriveAndLawTestResult driveAndLawTestResult : driveAndLawTestResults) {
				String testResultCode = driveAndLawTestResult
						.getTestResultCode().getCode();
				if ( ! "P".equalsIgnoreCase(testResultCode)
]]>
</codefragment>
</duplication>
<duplication lines="25" tokens="111">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule169.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule170.java"/>
<codefragment>
<![CDATA[
public class DlaRule170 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			if (isCurrentNamePresent(processContext)
					&& !isCurrentAndRecordNameMatch(processContext, eliRecord)) {
				// If current name is not same as record name
				if (RecordConditionRulesUtil.isInitialInquiry(processContext)
						&& !RecordConditionRulesUtil
								.hasAnyMultipleAniHitsPresent(processContext)) {
					// If Initial DL/ANI inquiry and multiple hits are not
					// present
					if (eliRecord.getFeeRequiredReasonCode() == null
							|| eliRecord
									.getFeeRequiredReasonCode()
									.hasCodeNotEqualToAnyOf(B, C, D, E, F, M, Z)) {
						// If FEE REASON CODE is not B, C, D, E, F, M, Z
						if (!EaseUtil.isNullOrBlank(eliRecord
								.getOriginalApplicationTtc())
								&& RecordConditionRulesUtil
										.isOriginalTtcMatchAnyOf(eliRecord,
]]>
</codefragment>
</duplication>
<duplication lines="21" tokens="110">
<file line="153" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FcpProcessingDismissalDocumentConverterTest.java"/>
<file line="216" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpFtaPaymentReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Populate user context.
	 */
	private void populateUserContext() {
		userContextFixture = UserContextFixtureFactory
				.createUserContextForDocumentGeneration();
		userContextFixture.setTechId("SK");
		userContextFixture.setTtc("DLA");
		userContextFixture.setUserName("MWBRN");
		userContextFixture.setWorkDate(new Date());
		userContextFixture.setOfficeId("130");
		userContextFixture.setRacfId("23");
		userContextFixture.setIpAddress("127.0.0.1");
		Calendar workDate = Calendar.getInstance();
		workDate.set(2010, Calendar.JUNE, 03);
		userContextFixture.setWorkDate(workDate.getTime());
		CodeSetElement modeI = new CodeSetElement();
		modeI.setCode(IEaseModes.MANUAL);
		userContextFixture.setOperationalMode(modeI);
]]>
</codefragment>
</duplication>
<duplication lines="27" tokens="110">
<file line="61" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FcpProcessingDismissalDocumentConverterTest.java"/>
<file line="66" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpProcessingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private static final String FTA_FTP_CERT_ELEMENT = "ZBPHDR";
	/** The Constant DL_ID_NUMBER_ELEMENT. */
	private static final String DL_ID_NUMBER_ELEMENT = "ZBPDLID_";
	/** The Constant LAST_NAME_3_ELEMENT. */
	private static final String LAST_NAME_3_ELEMENT = "ZBP3LNME";
	/** The Constant DATE_OF_BIRTH_ELEMENT. */
	private static final String DATE_OF_BIRTH_ELEMENT = "ZBPBRTHD";
	/** The Constant DOCKET_NUMBER_ELEMENT. */
	private static final String DOCKET_NUMBER_ELEMENT = "ZBPDCKT_";
	/** The Constant VIOLATION_DATE_ELEMENT. */
	private static final String VIOLATION_DATE_ELEMENT = "ZBPVLTND";
	/** The Constant COURT_CODE_ELEMENT. */
	private static final String COURT_CODE_ELEMENT = "ZBPCRTCD";
	/** The Constant STATUTE_CODE_ELEMENTS. */
	private static final String[] STATUTE_CODE_ELEMENTS = { "ZBPSTUC1",
			"ZBPSTUC2", "ZBPSTUC3", "ZBPSTUC4", "ZBPSTUC5", "ZBPSTUC6",
			"ZBPSTUC7" };
	/** The Constant SECTION_VIOLATED_CODE_ELEMENTS. */
	private static final String[] SECTION_VIOLATED_CODE_ELEMENTS = {
			"ZBPSECV1", "ZBPSECV2", "ZBPSECV3", "ZBPSECV4", "ZBPSECV5",
			"ZBPSECV6", "ZBPSECV7" };
	/** The Constant CONVICTION_DATE_ELEMENT. */
	private static final String CONVICTION_DATE_ELEMENT = "ZBPCVTND";
	/** The Constant OTHER_ADDRESS_ELEMENT. */
	private static final String OTHER_ADDRESS_ELEMENT = "ZBPSADRS";
	/** The Constant SAVED_AS_OF_DATE_ELEMENT. */
	private static final String SAVED_AS_OF_DATE_ELEMENT = "ZBPSADTE";
]]>
</codefragment>
</duplication>
<duplication lines="16" tokens="110">
<file line="197" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<file line="350" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateDataSales() {
		String[][] dataArray = new String[][] {
				{ IPrintConverterConstants.DL_REC_ZBPDLID, "S1111-111" },//
				{ IPrintConverterConstants.DL_REC_ZBPBAR90, "S1111-111" },
				{ IPrintConverterConstants.DL_REC_ZBPHDR2,
						"RECEIPT - NOT A LICENSE OR PERMIT" },
				{ IPrintConverterConstants.DL_REC_ZBPDISCL,
						"NOT A VERIFIED IDENTIFICATION" },
				{ IPrintConverterConstants.DL_REC_ZBPAPPLH, "APPLICATION FOR" },
				{ IPrintConverterConstants.DL_REC_ZBPPNME1, "MARK WILSON" },
				{ IPrintConverterConstants.DL_REC_ZBPPMAD1, "12345 FURTER RD" },
				{ IPrintConverterConstants.DL_REC_ZBPCMCTO, "SACRAMENTO" },
				{ IPrintConverterConstants.DL_REC_ZBPCMSTO, "CA" },
				{ IPrintConverterConstants.DL_REC_ZBPCMZPO, "95818" },
				{ IPrintConverterConstants.DL_REC_ZBPTRNV, "199.00" },
				{ IPrintConverterConstants.DL_REC_ZBPTCAS, "100.00" },
]]>
</codefragment>
</duplication>
<duplication lines="18" tokens="110">
<file line="223" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<file line="252" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<codefragment>
<![CDATA[
		ReturnDriverInformationAndFeeIndicatorResponseEcs response = (ReturnDriverInformationAndFeeIndicatorResponseEcs) converter
				.createResponse(anInboundMessagePayload);
		assertNotNull(response.getPerson());
		assertEquals("I0000221", response.getPerson().getDriverLicense()
				.getLicenseNumber());
		assertEquals("SKINNER", response.getPerson().getCurrentName()
				.getLastName());
		assertEquals("ANDY", response.getPerson().getCurrentName() 
				.getFirstName());
		assertEquals("34", response.getPerson().getAddress(
				AddressType.RESIDENTIAL).getCounty());
		assertNotNull(response.getErrorCode().getCode());
	}
	
	/**
	 * Test method for {@link gov.ca.dmv.ease.ecs.convert.impl.ReturnDriverInformationAndFeeIndicatorConverter#createResponse(java.lang.String)}.
	 */
	@Test
]]>
</codefragment>
</duplication>
<duplication lines="15" tokens="110">
<file line="229" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\core\dl\validator\impl\test\ConfirmCdlisResponseDataRulesTest.java"/>
<file line="250" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\core\dl\validator\impl\test\ConfirmCdlisResponseDataRulesTest.java"/>
<codefragment>
<![CDATA[
	public void testD761b_all() {
		CdlisRecord cdlisRecord = new CdlisRecord();
		List<DrivingRecord> cdlisRecords = new ArrayList<DrivingRecord>();
		List<CodeSetElement> restrictions = new ArrayList<CodeSetElement>();
		CodeSetElement restrictionE = new CodeSetElement("E", "E", "E");
		CodeSetElement restrictionL = new CodeSetElement("L", "L", "L");
		restrictions.add(restrictionE);
		restrictions.add(restrictionL);
		CodeSetElement currentPrimaryDlNumberState = new CodeSetElement("CA",
				"CA", "CA");
		cdlisRecord.setRestrictions(restrictions);
		cdlisRecord.setCurrentPrimaryDlNumberState(currentPrimaryDlNumberState);
		dlApplication.setCommercialRemoveRestrictionIndicator(Boolean.TRUE);

		cdlisRecords.add(cdlisRecord);
]]>
</codefragment>
</duplication>
<duplication lines="21" tokens="110">
<file line="82" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\service\impl\test\PurgeDafRecordServiceTest.java"/>
<file line="150" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\service\impl\test\PurgeDafRecordServiceTest.java"/>
<codefragment>
<![CDATA[
		deleteBusinessObjectResponse.setErrorCollector(collector);
		expect(
				mockPersistenceServiceRequestFactory
						.createRetrieveBusinessObjectRequest(
								isA(IUserContext.class), isA(Transaction.class)))
				.andReturn(mockRetrieveBusinessObjectRequest);
		expect(mockRetrieveBusinessObjectRequest.execute()).andReturn(
				perResponse);
		expect(
				mockPersistenceServiceRequestFactory
						.createDeleteBusinessObjectRequest(
								isA(IUserContext.class), isA(Transaction.class)))
				.andReturn(mockDeleteBusinessObjectRequest);
		expect(mockDeleteBusinessObjectRequest.execute()).andReturn(
				deleteBusinessObjectResponse);
		replay(mockPersistenceServiceRequestFactory);
		replay(mockRetrieveBusinessObjectRequest);
		replay(mockDeleteBusinessObjectRequest);
		PurgeDafRecordRequestBus busRequest = new PurgeDafRecordRequestBus(
				userContext, DAF_NUMBER);
		PurgeDafRecordResponseBus busResponse = fixture.execute(busRequest);
]]>
</codefragment>
</duplication>
<duplication lines="76" tokens="110">
<file line="107" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\MedicalReportUpdatePage.java"/>
<file line="41" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\SsnCorrectionUpdatePage.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Gets the dlOrIdNumber.
	 * 
	 * @return the dlOrIdNumber
	 */
	public String getDlOrIdNumber() {

		try {
			// return getSsnCorrectionApplication().getApplicant().getIdCard().
			// getLicenseNumber();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dlOrIdNumber;

	}

	/**
	 * Sets the dlOrIdNumber.
	 * 
	 * @param dlOrIdNumber
	 *            the new dlOrIdNumber
	 */
	public void setDlOrIdNumber(String dlOrIdNumber) {

		try {
			// getSsnCorrectionApplication().getApplicant().getIdCard().
			// setLicenseNumber(dlOrIdNumber);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.dlOrIdNumber = dlOrIdNumber;
	}

	/**
	 * Gets the lastname.
	 * 
	 * @return the lastname
	 */
	public String getLastname() {

		try {
			// return "";
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.lastname;

	}

	/**
	 * Sets the lastname.
	 * 
	 * @param lastname
	 *            the new lastname
	 */
	public void setLastname(String lastname) {

		try {
			// "";
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.lastname = lastname;
	}

	/**
	 * Gets the socialSecurityNumberCorrected.
	 * 
	 * @return the socialSecurityNumberCorrected
	 */
	public Integer getSocialSecurityNumberCorrected() {
]]>
</codefragment>
</duplication>
<duplication lines="77" tokens="110">
<file line="379" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\dla\DrivingSchoolInstructorLicensePage.java"/>
<file line="624" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\dla\ProofFilingInsCoResponsePage.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Gets the mailingCityCode.
	 * 
	 * @return the mailingCityCode
	 */
	public String getMailingCityCode() {

		try {
			// return getProcessContext();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.mailingCityCode;

	}

	/**
	 * Sets the mailingCityCode.
	 * 
	 * @param mailingCityCode
	 *            the new mailingCityCode
	 */
	public void setMailingCityCode(String mailingCityCode) {

		try {
			// setProcessContext(mailingCityCode);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.mailingCityCode = mailingCityCode;
	}

	/**
	 * Gets the mailingCity.
	 * 
	 * @return the mailingCity
	 */
	public String getMailingCity() {

		try {
			// return getProofOfInsuranceFiling().getInsurancePolicy().
			// getInsuranceCertificateMailingAddress(AddressType.MAILING).City;
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.mailingCity;

	}

	/**
	 * Sets the mailingCity.
	 * 
	 * @param mailingCity
	 *            the new mailingCity
	 */
	public void setMailingCity(String mailingCity) {

		try {
			// getProofOfInsuranceFiling().getInsurancePolicy().
			// getInsuranceCertificateMailingAddress
			// (AddressType.MAILING).sety(mailingCity);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.mailingCity = mailingCity;
	}

	/**
	 * Gets the mailingZip.
	 * 
	 * @return the mailingZip
	 */
	public Integer getMailingZip() {
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="109">
<file line="244" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<file line="378" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\IssuanceReferralDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private String[][] populateSelected() {
		Date currentDate = new Date();
		String systemDate = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_MM_dd_yy);
		String systemTime = DocumentConverterUtil.convertDateToString(
				currentDate, AbstractDocumentConverter.FORMATTER_HH_mm);
		String[][] dataArray = new String[][] {
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_HEADER,
						"ISSUANCE REFERRAL" },
				{
						IPrintConverterConstants.ISSUANCE_REFERRAL_TYPE_OF_APPLICATION_TEXT,
						"DL ORIGINAL" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_HEADER,
						"DL #:" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_OR_SP_NUMBER,
						"I0090909" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_DL_EXP_DATE,
						"051212" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_ID_EXP_DATE,
						"NONE" },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_CURRENT_NAME,
						"James Bishop Stanley, Jr." },
				{ IPrintConverterConstants.ISSUANCE_REFERRAL_AKA_NAME,
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="109">
<file line="535" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<file line="560" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlReceiptDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		String[][] dataArrayTwo = populateDataSalesCreditCopy();
		List <String[][]> dataList = new ArrayList <String[][]>();
		dataList.add(dataArray);
		dataList.add(dataArrayTwo);
		List <String> templates = new ArrayList <String>();
		templates.add(IPrintConverterConstants.DL_REC_DOCUMENT_NAME);
		templates.add(IPrintConverterConstants.DL_REC_NO_BARCODE_DOCUMENT_NAME);
		String expectedXML = DocumentConverterUtil.createXml(dataList,
				templates, true);
		String actualXML = converterFixture
				.convertToDocumentBinding(requestFixture);
		Assert.assertNotNull(actualXML);
		Assert.assertEquals(expectedXML.toString(), actualXML);
	}

	/**
	 * Test method for {@link gov.ca.dmv.ease.tus.print.convert.impl.DlReceiptDocumentConverter#convertToDocumentBinding(PrintServiceRequest)}.
	 */
	@Test
	public void testDlReceiptDocumentConverter() {
]]>
</codefragment>
</duplication>
<duplication lines="74" tokens="109">
<file line="802" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\dla\ProofFilingInquiryResponsePage.java"/>
<file line="34" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\InsuranceCompanyFileInquiryPage.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Gets the insuranceCompanyNumber.
	 * 
	 * @return the insuranceCompanyNumber
	 */
	public String getInsuranceCompanyNumber() {

		try {
			// return getProofOfInsuranceFiling().getInsurancePolicy().
			// getInsuranceCompany().getInsuranceCompanyNumber();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.insuranceCompanyNumber;

	}

	/**
	 * Sets the insuranceCompanyNumber.
	 * 
	 * @param insuranceCompanyNumber
	 *            the new insuranceCompanyNumber
	 */
	public void setInsuranceCompanyNumber(String insuranceCompanyNumber) {

		try {
			// getProofOfInsuranceFiling().getInsurancePolicy().
			// getInsuranceCompany
			// ().setInsuranceCompanyNumber(insuranceCompanyNumber);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.insuranceCompanyNumber = insuranceCompanyNumber;
	}

	/**
	 * Gets the insuranceCompanyAbbreviation.
	 * 
	 * @return the insuranceCompanyAbbreviation
	 */
	public String getInsuranceCompanyAbbreviation() {

		try {
			// return getProofOfInsuranceFiling().getInsurancePolicy().
			// getInsuranceCompany().getInsuranceCompanyAbbreviation();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.insuranceCompanyAbbreviation;

	}

	/**
	 * Sets the insuranceCompanyAbbreviation.
	 * 
	 * @param insuranceCompanyAbbreviation
	 *            the new insuranceCompanyAbbreviation
	 */
	public void setInsuranceCompanyAbbreviation(
			String insuranceCompanyAbbreviation) {

		try {
			// getProofOfInsuranceFiling().getInsurancePolicy().
			// getInsuranceCompany
			// ().setInsuranceCompanyAbbreviation(insuranceCompanyAbbreviation);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.insuranceCompanyAbbreviation = insuranceCompanyAbbreviation;
	}
]]>
</codefragment>
</duplication>
<duplication lines="73" tokens="109">
<file line="102" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\dla\HomeAddressConfidentialityInquiryPage.java"/>
<file line="49" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ui\page\MiscDlUpdate\ServiceOfOrderUpdatePage.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Gets the dlOrIdNumber.
	 * 
	 * @return the dlOrIdNumber
	 */
	public String getDlOrIdNumber() {

		try {
			// return
			// getServiceOfOrderApplication().getApplicant().getDriverLicence
			// ().getLicenceNumber();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.dlOrIdNumber;

	}

	/**
	 * Sets the dlOrIdNumber.
	 * 
	 * @param dlOrIdNumber
	 *            the new dlOrIdNumber
	 */
	public void setDlOrIdNumber(String dlOrIdNumber) {

		try {
			// getServiceOfOrderApplication().getApplicant().getDriverLicence().
			// setLicenceNumber(dlOrIdNumber);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.dlOrIdNumber = dlOrIdNumber;
	}

	/**
	 * Gets the lastName.
	 * 
	 * @return the lastName
	 */
	public String getLastName() {

		try {
			// return
			// getServiceOfOrderApplication().getApplicant().getCurrentName
			// ().getLastName();
		} catch (Exception e) {
			errorMessage(e);
		}
		return this.lastName;

	}

	/**
	 * Sets the lastName.
	 * 
	 * @param lastName
	 *            the new lastName
	 */
	public void setLastName(String lastName) {

		try {
			// getServiceOfOrderApplication().getApplicant().getCurrentName().
			// setLastName(lastName);
			return;
		} catch (Exception e) {
			errorMessage(e);
		}
		this.lastName = lastName;
	}
]]>
</codefragment>
</duplication>
<duplication lines="66" tokens="109">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\fee\impl\DldRuleCondition.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\fee\impl\DleRuleCondition.java"/>
<codefragment>
<![CDATA[
	private Classifier category;
	/** * The description. */
	private String description;
	/** This represents the id generated by Hibernate. */
	private Long id;
	/** * The license class	 1. */
	private Classifier licenseclass1;

	/**
	 * @return the category
	 */
	public Classifier getCategory() {
		return category;
	}

	/**
	 * @return the description
	 */
	public String getDescription() {
		return description;
	}

	/**
	 * @return the id
	 */
	@Override
	public Long getId() {
		return id;
	}

	/**
	 * @return the licenseclass1
	 */
	public Classifier getLicenseclass1() {
		return licenseclass1;
	}

	/**
	 * @param category the category to set
	 */
	public void setCategory(Classifier category) {
		this.category = category;
	}

	/**
	 * @param description the description to set
	 */
	public void setDescription(String description) {
		this.description = description;
	}

	/**
	 * @param id the id to set
	 */
	@Override
	public void setId(Long id) {
		this.id = id;
	}

	/**
	 * @param licenseclass1 the licenseclass1 to set
	 */
	public void setLicenseclass1(Classifier licenseclass1) {
		this.licenseclass1 = licenseclass1;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="109">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Daf0557Rule.java"/>
<file line="30" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\DafD607Rule.java"/>
<codefragment>
<![CDATA[
public class DafD607Rule extends AbstractDafRule {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(ProcessContext processContext) {
		DafProcessContext dafProcessContext = (DafProcessContext) processContext;
		IErrorCollector errorCollector = new ErrorCollector();
		String activityName = getCurrentActivityName(dafProcessContext);
		if (activityName != null
				&& activityName
						.equalsIgnoreCase("DisplayOfIdApplicationDataActivity")) {
			if (compareSelectedAction(
					new Action[] { getAction(IActionsRegistry.UPDATE_PENDING_ACTION) },
					dafProcessContext)) {
				Transaction tempDafRecord = dafProcessContext.getTransaction();
				if (tempDafRecord != null) {
					if (tempDafRecord.getLicenseType().equals(
							LicenseType.ID_CARD)) {
						String newIncompleteApplicationReasonCode = getNewIncompleteApplicationReasonCode(dafProcessContext
								.getDlApplication());
]]>
</codefragment>
</duplication>
<duplication lines="16" tokens="109">
<file line="44" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD754Rule.java"/>
<file line="38" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD866Rule.java"/>
<codefragment>
<![CDATA[
		IErrorCollector errorCollector = new ErrorCollector();
		Action selectedAction = cdaProcessContext.getSelectedAction();
		if (selectedAction != null
				&& selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.ENTER_ACTION))) {
			List <CodeSetElement> existingAttachments = cdaProcessContext
					.getDriverLicense().getExistingAttachments();
			List <CodeSetElement> newAttachments = cdaProcessContext
					.getDriverLicense().getNewAttachments();
			List <CodeSetElement> attachments = new ArrayList <CodeSetElement>();
			if (existingAttachments != null) {
				attachments.addAll(existingAttachments);
			}
			if (newAttachments != null) {
				attachments.addAll(newAttachments);
			}
]]>
</codefragment>
</duplication>
<duplication lines="17" tokens="109">
<file line="31" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\common\impl\ActionMessageUtil.java"/>
<file line="62" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\common\impl\ActionMessageUtil.java"/>
<codefragment>
<![CDATA[
	protected void addBrcExpirExMmDdYyExcutionSequence274(
			String endorsementOfRecord1, String classOfRecord,
			String typeOfApplication, String classAppliedForByte1,
			String appClass, String MDLCAE, String VRSCAE,
			String backgroundRecordCheckIndicator) {
		/*BRC EXPIREx MMDDYY*/
		/*((MDLCER* = HM and MDLRCLAS = A, B, C and (VCSTTC = DLD, DRT)) or 
		 * (MDLACLS1 = A, B, C and VCSDCLS1 <= SPACE and MDLCAE* = HM) or 
		 * (MDLACLSI = A, B, C and VRSCAE* = HM)) and MDLBRCIN = 0*///274
		if ((HAZARDOUS_MATERIAL.equals(endorsementOfRecord1)
				&& ArrayUtils.contains(classOfRecord, A, B, C) && ArrayUtils
				.contains(typeOfApplication, DRIVER_LICENSE_DUPLICATE, DRT))
				|| (ArrayUtils.contains(classAppliedForByte1, A, B, C)
						&& isNullorEmpty(appClass) && HAZARDOUS_MATERIAL
						.equals(MDLCAE))
				|| (ArrayUtils.contains(classAppliedForByte1, A, B, C)
						&& HAZARDOUS_MATERIAL.equals(VRSCAE) && ZERO
]]>
</codefragment>
</duplication>
<duplication lines="13" tokens="108">
<file line="181" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<file line="337" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ReturnDriverInformationAndFeeIndicatorConverterTest.java"/>
<codefragment>
<![CDATA[
		ReturnDriverInformationAndFeeIndicatorResponseEcs response = (ReturnDriverInformationAndFeeIndicatorResponseEcs) converter
				.createResponse(anInboundMessagePayload);
		assertNotNull(response.getPerson());
		assertEquals("I0000221", response.getPerson().getDriverLicense()
				.getLicenseNumber());
		assertEquals("SKINNER", response.getPerson().getCurrentName()
				.getLastName());
		assertEquals("ANDY", response.getPerson().getCurrentName()
				.getFirstName());
		assertEquals("34", response.getPerson().getAddress(
				AddressType.RESIDENTIAL).getCounty());
		assertNotNull(response.getErrorCode().getCode());
	}
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="108">
<file line="102" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ProblemDriverUpdateConverterTest.java"/>
<file line="157" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ProblemDriverUpdateConverterTest.java"/>
<codefragment>
<![CDATA[
		applicant.setPreviousLicenses(outOfStateLicenses);
		//dlApplicationFixture.setApplicant(applicant);
		userContext = new UserContext();
		CodeSetElement incompleteAppReasonCode = new CodeSetElement();
		incompleteAppReasonCode.setCode(aIncompleteAppReasonCode);
		dlApplicationFixture
				.setNewIncompleteApplicationReasonCode(incompleteAppReasonCode);
		driverLicenseFixure.setEffectiveDate((EcsConverterHelper
				.convertStringToDate(effectiveDate,
						EcsConverterHelper.FORMATTER_MM_DD_YY)));
		List <PdpsRecord> pdpsRecords = new ArrayList <PdpsRecord>();
		CodeSetElement issuedByStateCode = new CodeSetElement();
		issuedByStateCode.setCode(issuedBySateCode);
		pdpsRecord.setCurrentPrimaryDlNumberState(issuedByStateCode);
		dlApplicationFixture.setClearedByIssuance(true);
		userContext.setOfficeId(officeId);
		CodeSetElement designateActionCode = new CodeSetElement();
		designateActionCode.setCode(aDesignateActionCode);
		pdpsRecord.setDesignateAction(designateActionCode);
		pdpsRecord.setLicenseNumber(license);
]]>
</codefragment>
</duplication>
<duplication lines="21" tokens="108">
<file line="53" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\txs\converters\impl\CashierTransactionConverter.java"/>
<file line="272" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\tus\txs\converters\impl\CashierTransactionConverter.java"/>
<codefragment>
<![CDATA[
		StringBuilder aBuilder = new StringBuilder();
		// <item field="VCSINVAI" key="238" length="1" converter="dmva2BitSet"/>
		aBuilder.append(filler("", 1));
		// VCSINVAI_2 - bit set
		aBuilder.append(filler("", 1));
		// VCSINVAI_3 - bit set
		aBuilder.append(filler("", 1));
		// VCSINVAI_4 - bit set
		aBuilder.append(filler("", 1));
		// VCSINVAI_5 - bit set
		aBuilder.append(filler("", 1));
		// VCSINVAI_6 - bit set
		aBuilder.append(filler("", 1));
		// VCSINVAI_7 - bit set
		aBuilder.append(filler("", 1));
		// VCSINVAI_8 - bit set
		aBuilder.append(filler("", 1));
		// <item field="VISSTLOC" key="64" length="1" converter="dmva2String"/>
		aBuilder.append(filler("", 1));
		// <item field="VISSTIS" key="65" length="8" converter="dmva2String"/>
		aBuilder.append(filler("", 8));
]]>
</codefragment>
</duplication>
<duplication lines="69" tokens="108">
<file line="42" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\request\impl\OlInquiryRequestBus.java"/>
<file line="42" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ts\dl\request\impl\OlInquiryRequestTs.java"/>
<codefragment>
<![CDATA[
	public OlInquiryRequestTs(IUserContext userContext,
			OccupationalLicenseInquiry occupationalLicenseInquiry,
			Boolean isCustomerCopy) {
		super(userContext);
		setOccupationalLicenseInquiry(occupationalLicenseInquiry);
		setIsCustomerCopy(isCustomerCopy);
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see gov.ca.dmv.ease.fw.AbstractRequest#getValidator()
	 */
	/*	@Override
		protected IValidator getValidator() {
			return new OliInquiryRequestValidator();
		}
	*/
	/*
	 * (non-Javadoc)
	 * 
	 * @see gov.ca.dmv.ease.fw.AbstractRequest#validate()
	 */
	@Override
	public IErrorCollector validate() {
		IErrorCollector aCollector = new ErrorCollector();
		// User Context Validation
		UserContextValidator contextValidator = new UserContextValidator();
		contextValidator.validate(this.getUserContext(), aCollector);
		return aCollector;
	}

	/**
	 * Gets the occupational license inquiry.
	 * 
	 * @return the occupational license inquiry
	 */
	public OccupationalLicenseInquiry getOccupationalLicenseInquiry() {
		return occupationalLicenseInquiry;
	}

	/**
	 * Sets the occupational license inquiry.
	 * 
	 * @param occupationalLicenseInquiry the new occupational license inquiry
	 */
	public void setOccupationalLicenseInquiry(
			OccupationalLicenseInquiry occupationalLicenseInquiry) {
		this.occupationalLicenseInquiry = occupationalLicenseInquiry;
	}

	/**
	 * Gets the checks if is customer copy.
	 * 
	 * @return the checks if is customer copy
	 */
	public Boolean getIsCustomerCopy() {
		return isCustomerCopy;
	}

	/**
	 * Sets the checks if is customer copy.
	 * 
	 * @param isCustomerCopy the new checks if is customer copy
	 */
	public void setIsCustomerCopy(Boolean isCustomerCopy) {
		this.isCustomerCopy = isCustomerCopy;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="11" tokens="107">
<file line="80" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\AddlInstructionPermitDocumentRequestTusTest.java"/>
<file line="83" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\CommercialTestResultsDocumentRequestTusTest.java"/>
<codefragment>
<![CDATA[
	public void testCommercialTestResultsDocumentRequestTus() {
		Assert.assertNotNull(requestFixture);
		Assert.assertNotNull(requestFixture.getUserContext());
		Assert.assertNotNull(requestFixture.getDlApplication());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getDriverLicense());
		Assert.assertNotNull(requestFixture.getDlApplication().getApplicant()
				.getDriverLicense().getPhotoInformation());
		Assert.assertNotNull(requestFixture.getDlApplication().getLicense()
]]>
</codefragment>
</duplication>
<duplication lines="31" tokens="107">
<file line="131" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\OccupationalLicensingReferralDocumentConverterTest.java"/>
<file line="121" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\VehicleSalesPersonTemporaryPermitDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
				{ getOriginalAppCashierSequenceNumberElement(), "9" } };
		return dataArray;
	}

	/**
	 * Test ideal case.
	 */
	@Test
	public void testIdealCase() {
		String[][] dataArray = populateData();
		executeTest(dataArray);
	}

	/**
	 * Test with different values.
	 */
	@Test
	public void testWithDifferentValues() {
		VehicleSalesPerson applicant = salesPersonApplicationFixture
				.getApplicant();
		// set training header
		currentUserContextFixture.setOfficeId("999");
		// change applicant's address
		Address mailingAddress = applicant.getAddress(AddressType.MAILING);
		mailingAddress.setStateCode(new CodeSetElement("OT", "OT", "Other"));
		mailingAddress.setZip("99999");
		// set expected values
		String[][] dataArray = populateData();
		replaceArrayValue(dataArray, getTrainingHeaderElement(),
				DocumentConverterUtil.TRAINING_HEADER);
		replaceArrayValue(dataArray, getOfficeIdElement(), "999");
]]>
</codefragment>
</duplication>
<duplication lines="30" tokens="107">
<file line="271" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDriverLicenseConverterTest.java"/>
<file line="448" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDriverLicenseConverterTest.java"/>
<file line="517" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\UpdateDriverLicenseConverterTest.java"/>
<codefragment>
<![CDATA[
		driverLicenseFee.addDriverLicenseRateStatus(dlStatusForAddRestInd1);
		InvoiceItem invoiceItem = new InvoiceItem();
		invoiceItem.setFee(driverLicenseFee);
		List <InvoiceItem> invoiceItems = new ArrayList <InvoiceItem>();
		invoiceItems.add(invoiceItem);
		invoice.setInvoiceItems(invoiceItems);
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber(dlIdNumber);
		person.setDriverLicense(driverLicense);
		PersonName personName = new PersonName();
		personName.setLastName(name);
		person.setCurrentName(personName);
		List <Payment> payments = new ArrayList <Payment>();
		invoice.setPayments(payments);
		dateFeesIssued = convertStringToDate(aDateFeesIssued, "MMddyy");
	}

	/**
	 * Create fixture.
	 * 
	 * @param ttc
	 * @param officeId
	 * @param techId
	 * @param dlIdNumber
	 * @param name
	 * @param aDateFeesIssued
	 * @param workDate
	 * @param controlCashNo
	 */
	private void createFixtureForTestCreateMessage15(String ttc,
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="107">
<file line="35" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule132.java"/>
<file line="37" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule133.java"/>
<codefragment>
<![CDATA[
						|| !eliRecord.isOriginalApplicationIndicator()) {
					// If ORIGINAL ORIGINAL INDICATOR is not Y.
					if (RecordConditionRulesUtil.isOriginalTtcNotMatchAnyOf(
							eliRecord, DRIVER_LICENSE_APPLICATION_TTC)) {
						// If Original TTC is not D*.
						if (eliRecord.getPerson() == null
								|| eliRecord.getPerson().getIdCard() == null
								|| eliRecord.getPerson().getIdCard()
										.getLicenseStatusCode() == null
								|| eliRecord.getPerson().getIdCard()
										.getLicenseStatusCode()
										.hasCodeNotEqualTo(NONE)) {
							// If ID EXPIRATION TEXT is not NONE.
							return Boolean.TRUE;
						} else if (eliRecord
								.isDlPendingSubRecordSegmentBPresent()) {
							// If DL pending segment B is present.
							return Boolean.TRUE;
						}
					}
				}
			}
		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="107">
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule117.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule118.java"/>
<codefragment>
<![CDATA[
public class DlaRule118 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			// If single hit.
			if (RecordConditionRulesUtil.isTypeTransactionCodeMatchToAnyOf(
					processContext, CDA, DAF)) {
				// If current TTC is CDA, DAF.
				if (eliRecord.getOriginalApplicationDate() != null
						&& RecordConditionRulesUtil.isOriginalTtcNotMatchAnyOf(
								eliRecord, DRIVER_LICENSE_APPLICATION_TTC)) {
					// If original TTC is not D*.
					if (eliRecord.getPerson() != null
							&& eliRecord.getPerson().getBirthDate() != null) {
						if (eliRecord.getPerson().getBirthDate().compareTo(
								getDlProcessDate(processContext)) > 0) {
]]>
</codefragment>
</duplication>
<duplication lines="41" tokens="106">
<file line="60" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\CommercialTestResultsDocumentRequestValidatorTest.java"/>
<file line="60" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\NonCommercialTestResultsDocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
	private NonCommercialTestResultsDocumentRequestValidator validateFixture;
	/** The User Context */
	private UserContext userContextFixture = null;
	/** The Dl Application */
	private DlApplication dlApplicationFixture = null;
	/** The Driver License */
	private DriverLicense driverLicense = null;
	/** The Person */
	private Person person = null;
	/** The Photo Information */
	private PhotoInformation photoInformation = null;
	/** The Error Collector */
	private IErrorCollector errorCollector = null;

	@Override
	protected void prepareTestInstance() throws Exception {
		setConfigLocations(new String[] {
				"classpath:/spring/applicationContext-fw-services.xml",
				"classpath:/spring/applicationContext-dl-ecs-converters.xml" });
		super.prepareTestInstance();
		//applicationContext = (ConfigurableApplicationContext)EaseApplicationContext.getApplicationContext();
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#setUp()
	 */
	/**
	 * Sets the fixtures
	 * @throws java.lang.Exception
	 */
	@Before
	@Override
	protected void onSetUp() throws Exception {
		if (LOGGER.isDebugEnabled()) {
			LOGGER.debug("setUp() - start");
		}
		userContextFixture = UserContextFixtureFactory
				.createUserContextForDocumentGeneration();
		initDlApplicationFixture();
		errorCollector = new ErrorCollector();
		requestFixture = new NonCommercialTestResultsDocumentRequestTus(
]]>
</codefragment>
</duplication>
<duplication lines="16" tokens="106">
<file line="120" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\test\impl\AbstractAppHandlerTestCase.java"/>
<file line="145" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\util\impl\test\DlaProcessContextHelperTest.java"/>
<codefragment>
<![CDATA[
	private DriverLicense createDriverLicense() {
		DriverLicense driverLicense = new DriverLicense();
		driverLicense.setCreatedBy("122345");
		driverLicense.setCreatedDate(new Date());
		driverLicense.setEffectiveDate(new Date());
		driverLicense.setExpirationDate(new Date());
		driverLicense.setExpirationDate(new Date());
		CodeSetElement licenseLocation = new CodeSetElement();
		licenseLocation.setCode("SAC");
		licenseLocation.setName("Sacramento");
		driverLicense.setLicenseLocation(licenseLocation);
		driverLicense.setLicenseStatusCode(new CodeSetElement());
		driverLicense.setLicenseNumber("D737373");
		driverLicense.setLicenseStatusCode(new CodeSetElement());
		return driverLicense;
	}
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="106">
<file line="155" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\indicators\test\MoveRestrictionRecordsToAppRestrictionsTest.java"/>
<file line="228" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\indicators\test\MoveRestrictionRecordsToAppRestrictionsTest.java"/>
<codefragment>
<![CDATA[
		feeRequiredReasonCode.setCode("P");
		CodeSetElement airBreakTestResultCode = new CodeSetElement();
		airBreakTestResultCode.setCode("S");
		CommercialTestResult airBreakCommercialTestResult = new CommercialTestResult(
				CommercialTestResultType.AIR_BRAKES_TEST_RESULT);
		airBreakCommercialTestResult.setTestResultCode(airBreakTestResultCode);
		airBreakCommercialTestResults.add(airBreakCommercialTestResult);
		CodeSetElement restrictionTypeCode = new CodeSetElement();
		restrictionTypeCode.setCode("D");
		DrivingRestriction airBreakDrivingRestrictionForMore = new DrivingRestriction();
		airBreakDrivingRestrictionForMore
				.setRestrictionTypeCode(restrictionTypeCode);
		// test the error collector
		applicationRestrictions.add(airBreakDrivingRestrictionForMore);
		applicationRestrictions.add(airBreakDrivingRestrictionForMore);
		applicationRestrictions.add(airBreakDrivingRestrictionForMore);
		applicationRestrictions.add(airBreakDrivingRestrictionForMore);
		applicationRestrictions.add(airBreakDrivingRestrictionForMore);
		fixture.moveRestrictions(restrictionsOfRecords,
				applicationRestrictions, airBreakCommercialTestResults,
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="106">
<file line="332" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\interaction\impl\test\LoadDafDataTest.java"/>
<file line="294" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ts\bo\test\fixtures\DlApplicationFixtureFactory.java"/>
<codefragment>
<![CDATA[
		dlApplication.setDriverTrainingRecordNumber(driverTrainingRecordNumber);
		//Set military extension
		CodeSetElement militaryDutyCode = new CodeSetElement();
		militaryDutyCode.setCode("Y");
		dlApplication.setMilitaryDutyCode(militaryDutyCode);
		//Set motorCycleTrainingCode
		CodeSetElement motorCycleTrainingCode = new CodeSetElement();
		motorCycleTrainingCode.setCode("X");
		dlApplication.setMotorCycleTrainingCode(motorCycleTrainingCode);
		//Maybe this is the fee field
		dlApplication.setFeeRequired(true);
		//Set voter registration
		CodeSetElement voterRegistationRequested = new CodeSetElement();
		voterRegistationRequested.setCode("Y");
		dlApplication.setVoterRegistationRequested(voterRegistationRequested);
		//This may be the O/S Restricted Provisonal
		CodeSetElement outOfStateDriverEducationAndTrainingWaiveCode = new CodeSetElement();
		outOfStateDriverEducationAndTrainingWaiveCode.setCode("R");
		dlApplication
				.setOutOfStateDriverEducationAndTrainingWaiveCode(outOfStateDriverEducationAndTrainingWaiveCode);
		//Setting all to DlApplication
		dlApplication.setApplicant(dlApplicant);
		dlApplication.setLicense(driverLicense);
		CodeSetElement applicationType = new CodeSetElement("C", "C", "C");
]]>
</codefragment>
</duplication>
<duplication lines="28" tokens="106">
<file line="59" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\fee\request\impl\DlcFeeRequest.java"/>
<file line="80" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\fee\request\impl\DldFeeRequest.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * @param licenseClass1 the licenseClass1 to set
	 */
	public void setLicenseClass1(LICENSECLASS licenseClass1) {
		this.licenseClass1 = licenseClass1;
	}

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.fee.request.impl.FeeRequest#isInvalidReason()
	 */
	@Override
	protected String isInvalidReason() {
		StringBuilder strBuilder = new StringBuilder();
		if (originalApplicationDate == null) {
			strBuilder.append("originalApplicationDate is null")
					.append(NEWLINE);
		}
		if (dateFeesReceived == null) {
			strBuilder.append("dateFeesReceived is null").append(NEWLINE);
		}
		if (ttc == null) {
			strBuilder.append("ttc is null").append(NEWLINE);
		}
		if (licenseClass1 == null) {
			strBuilder.append("licenseClass1 is null").append(NEWLINE);
		}
]]>
</codefragment>
</duplication>
<duplication lines="12" tokens="106">
<file line="65" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\FailureToAppearDCAConverter.java"/>
<file line="60" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\UpdateFailureToAppearDCAConverter.java"/>
<codefragment>
<![CDATA[
		List<CodeSetElement> dispositionCodeList = citationDetail.getDispositionCodes();
		int sectionsViolatedSize = sectionsViolatedList.size();
		Object[] values = new Object[57];
		values[0] = TCODE; 														 //MFTTCODE	3	TRANSACTION CODE           
		values[1] = getTtc(userContext); 										 //MFTTTC  	3	TYPE TRANS CODE
		values[2] = getOfficeId(userContext); 									 //MFTOFFID	3	OFFICE ID
		values[3] = getEmployeeID(userContext); 								 //MFTKEYID	2	KEYERS ID
		values[4] = UPDATE_CODE;			 									 //MFTUPDCD	3	UPDATE CODE
		values[5] = filler(driverLicense.getLicenseNumber(), 8); 				 //MFTDLID#	8	DRIVER LICENSE
		values[6] = SOUNDEX_CODE;			 									 //MFTSNDEX	1	SOUNDEX CODE
		values[7] = filler(dlApplicant.getCurrentName().getLastName()
													.substring(0, 3), 3); 		 //MFT3LNME	3	DRIVERS NAME
]]>
</codefragment>
</duplication>
<duplication lines="9" tokens="106">
<file line="56" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\DriverRecordUpdateConverter.java"/>
<file line="56" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\UpdateDriverLicenseConverter.java"/>
<codefragment>
<![CDATA[
		message[1] = filler(ttc, 3);
		message[2] = filler(IEcsConverterConstants.TRANSACTION_SUB_CODE_U, 1);
		message[3] = filler(IEcsConverterConstants.REQUESTER_CODE_PREFIX, 2);
		message[4] = filler(userContext.getOfficeId(), 3);
		message[5] = filler(userContext.getTechId(), 2);
		message[6] = filler(ConverterHelper.getDlorIdNumber(person), 8);
		message[7] = filler(ConverterHelper
				.getFirstThreeCharsOfLastName(person), 3);
		message[8] = filler(getFamilyLawFeeIndicator(ttc, invoice), 1);
]]>
</codefragment>
</duplication>
<duplication lines="14" tokens="106">
<file line="1475" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\AbstractUpdateHeadquartersSystemConverter.java"/>
<file line="1706" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\ecs\convert\impl\AbstractUpdateHeadquartersSystemConverter.java"/>
<codefragment>
<![CDATA[
		LOGGER.info("Populating Segment A-ID PENDING only ");
		message.append(filler(UpdateHeadquartersSystemHelper
				.getDlIncompleteAppReasonCode(dlApplication), 2));//ID INCOMPLETE APP REASON CODE
		message.append(getOfficeIdFromProcessHistory(originalProcessHistory));//ID PENDING OFFICE ID
		message.append(convertDateToString(originalProcessHistory
				.getUserContext().getWorkDate())); //DL PENDING WORK DATE (MMDDYY)
		message.append(getEmployeeID(originalProcessHistory.getUserContext())); //DL PENDING CASHIER ID
		message.append(filler(originalProcessHistory
				.getControlCashierSeqNumber(), 4));//DL PENDING CASHIER SEQ #
		message.append(getTtcFromProcessHistory(originalProcessHistory)); //DL PENDING TYPE TRANS CODE
		message.append(convertDateToString(originalProcessHistory
				.getApplicationDate())); //ID PENDING APPLICATION DATE
		message.append(getEmployeeID(currentUserContext)); //ID PENDING UPDATE EMPLOYEE
		message.append(filler(UpdateHeadquartersSystemHelper
]]>
</codefragment>
</duplication>
<duplication lines="22" tokens="106">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule134.java"/>
<file line="25" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule137.java"/>
<codefragment>
<![CDATA[
public class DlaRule137 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			if (RecordConditionRulesUtil.isTypeTransactionCodeMatchToAnyOf(
					processContext, CDA, DAF)) {
				//If current TTC is CDA or DAF.
				if (eliRecord.isOriginalApplicationIndicator() != null 
						&& eliRecord.isOriginalApplicationIndicator()) {
					//If ORIGINAL ORIGINAL INDICATOR is Y.
					if (RecordConditionRulesUtil.isOriginalTtcMatchAnyOf(
							eliRecord, DRIVER_LICENSE_APPLICATION_TTC)) {
						//If Original TTC is D*.
						if (!EaseUtil.isNullOrBlank(eliRecord.getSegments()) 
								&& !eliRecord.isDlPendingSubRecordSegmentAPresent()
								&& !eliRecord.isDlPendingSubRecordSegmentBPresent()) {
							//If DL pending segment A and B is not present.
							if (eliRecord.getDriverLicense() != null && 
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="106">
<file line="224" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\MoveRestrictionRecordsToAppRestrictions.java"/>
<file line="280" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\indicators\MoveRestrictionRecordsToAppRestrictions.java"/>
<codefragment>
<![CDATA[
				&& (isVisibleTestOnly || isHMTestOnly)) {
			if (isSpaceAvailable(applicationRestrictions)) {
				if (!containsInAppRestrictions(applicationRestrictions,
						IRestrictionCodesConstants.NO_AIR_BRAKES_COMM)) {
					CodeSetElement restrictionTypeCode = new CodeSetElement();
					restrictionTypeCode
							.setCode(IRestrictionCodesConstants.NO_AIR_BRAKES_COMM);
					DrivingRestriction drivingRestriction = new DrivingRestriction();
					drivingRestriction
							.setRestrictionTypeCode(restrictionTypeCode);
					applicationRestrictions.add(drivingRestriction);
				}
			}
			else {
				addError(errorCollector);
			}
		}
		//Table3-Rule6
		if ((!containsInAppRestrictions(restrictionsOfRecords,
				IRestrictionCodesConstants.NO_AIR_BRAKES_COMM))
				&& (isRequiredNonCommCategoryPresent(newCategories,
						IDlCategories.FIREFIGHTER_CLS_A) || isRequiredNonCommCategoryPresent(
						newCategories, IDlCategories.FIREFIGHTER_CLS_B))
				&& isAirBreakTestFailed(airBreakCommercialTestResults)
]]>
</codefragment>
</duplication>
<duplication lines="33" tokens="105">
<file line="1016" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\SearchPersonByNumberAndLastNameConverterTest.java"/>
<file line="1833" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\SearchPersonByNumberConverterTest.java"/>
<codefragment>
<![CDATA[
		assertEquals("S", driverLicense.getBackgroundCheckIndicator().getCode());// BACKGROUND RECORD CHECK INDICATOR
		assertNull(driverLicense.getBackgroundCheckExpirationDate());// BRC EXPIRATION DATE
	}

	/**
	 * Check commercial end of record.
	 */
	private void checkCommercialEndOfRecord() { // Segment H - COMMERCIAL ENDORSEMENT OF RECORD
		assertTrue(existingEndorsements.size() >= 2);
		boolean foundEndDT = false;
		boolean foundEndHM = false;
		for (CodeSetElement codeSetElement : existingEndorsements) {
			if (codeSetElement.getCode().equals("DT")) {
				foundEndDT = true;
			}
			if (codeSetElement.getCode().equals("HM")) {
				foundEndHM = true;
			}
		}
		if (foundEndDT && foundEndHM) {
			assert (true);//COMMERCIAL ENDORSEMENT OF RECORD
		}
		else {
			assert (false);//COMMERCIAL ENDORSEMENT OF RECORD
		}
	}

	/**
	 * **** End - Methods for testing Segment H****.
	 */
	/******* Start - Methods for testing Segment I*****/
	@Test
	public void testSegmentI() {
]]>
</codefragment>
</duplication>
<duplication lines="17" tokens="105">
<file line="82" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\DafInquiryByDafNumberActivityTest.java"/>
<file line="82" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\DafInquiryByDlNumberActivityTest.java"/>
<codefragment>
<![CDATA[
		cdaProcessContext.setDriverLicenseNumber("I1234567");
		DafRecordInquiryResponseTs tsResponse = new DafRecordInquiryResponseTs(
				mockTransaction);
		expect(mockCdaTaskService.execute(isA(DafRecordInquiryRequestTs.class)))
				.andReturn(tsResponse);
		DlApplication dlApplication = new DlApplication();
		expect(mockTransaction.getDlApplication()).andReturn(dlApplication);
		expect(mockTransaction.getDlApplication()).andReturn(dlApplication);
		replay(mockCdaTaskService);
		replay(mockTransaction);
		cdaProcessContext.startIn(sessionContext);
		verify(mockCdaTaskService);
		verify(mockTransaction);
		assertEquals(cdaProcessContext.getTransaction(), mockTransaction);
		assertEquals(cdaProcessContext.getDlApplication(), dlApplication);
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="25" tokens="105">
<file line="60" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\BackwardBrowseDafRecordsActivityTest.java"/>
<file line="55" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\FindNextActivityTest.java"/>
<codefragment>
<![CDATA[
		fixture = new FindNextActivity();
		String key = IProcessLoader.DEFAULT_TRANSITION_KEY;
		fixture.setTransitionKey(key);
		TransitionsMap transitions = new TransitionsMap();
		transitions.addTransitions(key, new EndActivity());
		fixture.setTransitions(transitions);
		mockDafTaskService = createMock(DafTaskService.class);
		fixture.setDafTaskService(mockDafTaskService);
		sessionContext = new SessionContext();
		sessionContext.setUserContext(UserContextFixtureFactory
				.createUserContext());
		dafProcessContext = new DafProcessContext();
		dafProcessContext.setCurrentActivity(fixture);
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	@Override
	protected void tearDown() throws Exception {
		super.tearDown();
	}

	public void testInvoke() {
		dafProcessContext.setSelectedDafNumber(SELECTED_DAF_NUMBER);
]]>
</codefragment>
</duplication>
<duplication lines="18" tokens="105">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule295.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule296.java"/>
<codefragment>
<![CDATA[
public class DlaRule296 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordConditionRule#evaluate(gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RuleObject)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String tCode) {
		IUserContext userContext = processContext.getUserContext();
		if (isSingleHit(eliRecord)) {
			if (eliRecord.getOriginalApplicationTtc() != null 
					&& ArrayUtils.contains(IDENTIFICATION_CARD_APPLICATION_TTC, 
							eliRecord.getOriginalApplicationTtc())) {
				//If Original TTC was I*.
				if (!(userContext.getTtc().equalsIgnoreCase(DLP) 
						|| userContext.getTtc().equalsIgnoreCase(IDP))) {
					//If current transaction is not Pending.
					if (eliRecord.getValidSsnRequired() != null 
							&& eliRecord.getValidSsnRequired().hasCodeEqualToAnyOf(F))
]]>
</codefragment>
</duplication>
<duplication lines="20" tokens="105">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule130.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule140.java"/>
<codefragment>
<![CDATA[
public class DlaRule140 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		if (isSingleHit(eliRecord)) {
			if (RecordConditionRulesUtil.isTypeTransactionCodeMatchToAnyOf(
					processContext, CDA, DAF)) {
				//If current TTC is CDA or DAF.
				if (eliRecord.isOriginalApplicationIndicator() != null 
						&& eliRecord.isOriginalApplicationIndicator()) {
					//If ORIGINAL ORIGINAL INDICATOR is Y.
					if (RecordConditionRulesUtil.isOriginalTtcNotMatchAnyOf(
							eliRecord, DRIVER_LICENSE_APPLICATION_TTC)) {
						//If Original TTC is not D*
						if (eliRecord.getPerson() != null 
								&& eliRecord.getPerson().getIdCard() != null && 
								eliRecord.getPerson().getIdCard().getLicenseStatusCode() != null
]]>
</codefragment>
</duplication>
<duplication lines="14" tokens="104">
<file line="407" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<file line="454" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
	private void populateRecordForHold() {
		dlmRecord = new DlmRecord();
		dlmRecord.setMandatoryNonProofActionCode(new CodeSetElement("G", "G",
				"G"));
		dlmRecord.setDiscretionarySuspensionOrRevocation(new CodeSetElement(
				"G", "G", "G"));
		Calendar untilDate = Calendar.getInstance();
		untilDate.set(2010, Calendar.SEPTEMBER, 03);
		dlmRecord.setFrPenaltyFeeDueUntilDate(untilDate.getTime());//cust02, hq11, hq12
		dlmRecord.setUnableToCalculateEligibilityCode(null);//null-cust2 "7"-hq4 "8"-hq5 "9"-hq6 
		Calendar eligibilityDate = Calendar.getInstance();
		untilDate.set(2010, Calendar.AUGUST, 15);
		dlmRecord.setProofEligibilityDate(eligibilityDate.getTime());//CUST02_DATE_ELEMENT
	}
]]>
</codefragment>
</duplication>
<duplication lines="10" tokens="104">
<file line="32" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\DlAgeEligibilityFixtureFactory.java"/>
<file line="49" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\DlAgeEligibilityFixtureFactory.java"/>
<codefragment>
<![CDATA[
		List <IValidatable> dlAgeList = new ArrayList <IValidatable>();
		dlAgeList.add(new DlAgeRequirement("A", 15, 6));
		dlAgeList.add(new DlAgeRequirement("B", 15, 6));
		dlAgeList.add(new DlAgeRequirement("C", 15, 6));
		dlAgeList.add(new DlAgeRequirement("D", 15, 6));
		dlAgeList.add(new DlAgeRequirement("E", 15, 6));
		dlAgeList.add(new DlAgeRequirement("F", 15, 6));
		dlAgeList.add(new DlAgeRequirement("M", 21, 0));
		return dlAgeList;
	};
]]>
</codefragment>
</duplication>
<duplication lines="29" tokens="104">
<file line="38" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\decision\impl\test\IsPaymentAutomatedReceiptActivityTest.java"/>
<file line="38" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\decision\impl\test\IsPaymentAutomatedReceiptDecisionTest.java"/>
<codefragment>
<![CDATA[
public class IsPaymentAutomatedReceiptDecisionTest extends TestCase {
	DlaProcessContext dlaProcessContext;
	DecisionActivity fixtureActivity;

	@Override
	@Before
	public void setUp() {
		fixtureActivity = new IsPaymentAutomatedReceiptDecision();
//		fixtureActivity.setNextActivity(new CollectHqDataActivity());
//		fixtureActivity.setAlternate(new CollectSsnDataActivity());
	}

	/**
	 * @throws java.lang.Exception
	 */
	@Override
	@After
	public void tearDown() throws Exception {
	}

	@Test
	public void testCheckPaymentTypeForAutomatedReceipt() {
		DlApplication dlApplication = new DlApplication();
		List <Payment> paymentList = new ArrayList <Payment>();
		paymentList.add(new Voucher());
		paymentList.add(new CashPayment());
		dlApplication.getInvoice().setPayments(paymentList);
		dlaProcessContext = new DlaProcessContext(dlApplication);
		dlaProcessContext.setProcessId("DLA");
]]>
</codefragment>
</duplication>
<duplication lines="34" tokens="104">
<file line="44" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule106.java"/>
<file line="42" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule109.java"/>
<codefragment>
<![CDATA[
							.isCurrentModeIsCounter(processContext)) {
						// If current mode is Counter.
						if (RecordConditionRulesUtil.isFutureDlIssueDate(
								eliRecord, processContext)) {
							// If DL Issue Date is after Process date.
							if (eliRecord.getOriginalApplicationDate() != null
									&& getDlProcessDate(processContext) != null) {
								if (eliRecord
										.getOriginalApplicationDate()
										.compareTo(
												getDlProcessDate(processContext)) <= 0) {
									// If original application date is equal to
									// or before the process date.
									return Boolean.TRUE;
								} else if (!EaseUtil.isNullOrBlank(eliRecord
										.getSegments())
										&& !eliRecord
												.isDlPendingSubRecordSegmentAPresent()
										&& !eliRecord
												.isDlPendingSubRecordSegmentBPresent()) {
									// If Pending Segments A and B are not
									// present.
									return Boolean.TRUE;
								}
							}
						}
					}
				}
			}

		}
		return Boolean.FALSE;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="18" tokens="103">
<file line="129" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\CommercialTestResultsDocumentRequestValidatorTest.java"/>
<file line="120" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\validator\impl\test\PhotoRetakeCNADocumentRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		driverRecordUpdateApplicationFixture = new DriverRecordUpdateApplication();
		driverLicense = new DriverLicense();
		driverLicense.setLicenseNumber("I8005638");
		// PhotoInformation object
		photoInformation = new PhotoInformation();
		photoInformation.setPhotoName("YOUNG ONE");
		Address photoAddress = new Address(AddressType.MAILING);
		photoAddress.setLine1("2007");
		photoAddress.setLine2("Arden Way");
		photoAddress.setCity("Sacramento");
		CodeSetElement photoAddressState = new CodeSetElement();
		photoAddressState.setCode("CA");
		photoAddressState.setName("California");
		photoAddressState.setDescription("California");
		photoAddress.setStateCode(photoAddressState);
		photoAddress.setZip("95825");
		photoInformation.setPhotoAddress(photoAddress);
		driverLicense.setPhotoInformation(photoInformation);
]]>
</codefragment>
</duplication>
<duplication lines="16" tokens="103">
<file line="93" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\core\dl\validator\impl\test\DlCdlisReceiptRequestValidatorTest.java"/>
<file line="81" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\core\dl\validator\impl\test\DlOrganDonorReceiptRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		IErrorCollector errorCollector = fixture.validate(dlApplication);
		assertTrue(errorCollector.hasErrors());
		assertTrue(errorCollector.getEntries().size() == 1);
		assertEquals(SpringUtils
				.getMessage(INVALID_DL_APPLICATION_ERROR_MESSAGE),
				errorCollector.getEntries().get(0).getExceptionMessage());
	}

	@Test
	public void testDlApplicationLicenseNumberNull() {
		DlApplication dlApplication = new DlApplication();
		dlApplication.getLicense().setLicenseNumber(null);
		Person person = new Person();
		person.setBirthDate(new Date());
		dlApplication.setApplicant(person);
		IErrorCollector errorCollector = fixture.validate(dlApplication);
]]>
</codefragment>
</duplication>
<duplication lines="25" tokens="103">
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule15Test.java"/>
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule175Test.java"/>
<codefragment>
<![CDATA[
		ruleFixture = new DlaRule175();
		dlaProcessContext = new DlaProcessContext();
		dlaProcessContext.setCurrentActivity(new EndActivity());
		SessionContext sessionContext = new SessionContext();
		sessionContext.setUserContext(UserContextFixtureFactory
				.createUserContext());
		dlaProcessContext.startIn(sessionContext);
		DlApplication dlApplication = DlApplicationFixtureFactory
				.createDlApplicationForCda();
		dlaProcessContext.setDlApplication(dlApplication);
		eliRecord = EliRecordFixtureFactory
				.createEliRecordForRecordConditions();
	}

	@Override
	@After
	public void tearDown() throws Exception {
	}

	public void testEvaluateFalse() {
		assertFalse(ruleFixture.evaluate(eliRecord, dlaProcessContext, "DLA"));
	}

	public void testEvaluateTrue() {
		eliRecord.setMandatorySuspensionOrRevocation(new CodeSetElement("Y",
]]>
</codefragment>
</duplication>
<duplication lines="23" tokens="103">
<file line="211" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\test\impl\AbstractAppHandlerTestCase.java"/>
<file line="53" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\bo\test\fixtures\PersonFixtureFactory.java"/>
<codefragment>
<![CDATA[
				.createDriverLicense());
		List <PersonName> nameList = new ArrayList <PersonName>();
		PersonName personName = new PersonName();
		personName.setName("Anthony");
		nameList.add(personName);
		person.setPersonNames(nameList);
		PersonName personName1 = new PersonName();
		personName1.setFirstName("John");
		personName1.setLastName("Miller");
		List <PersonName> personNameList = new ArrayList <PersonName>();
		personNameList.add(personName1);
		person.setPersonNames(personNameList);
		person.setCurrentName(personName);
		person.setGenderChanged(false);
		return person;
	}

	/**
	 * This method creates a new Person for Search Person by Name and Four Pay Load.
	 * 
	 * @return the person
	 */
	public static Person createPersonForSearchPersonByNameFourPayload() {
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="103">
<file line="240" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CollectOutOfStateLicenseDataRules.java"/>
<file line="53" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\LegalPresenceResponseRules.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Checks if is nullor empty.
	 * 
	 * @param obj the obj
	 * 
	 * @return true, if is nullor empty
	 */
	private static boolean isNullorEmpty(Object obj) {
		if (obj == null) {
			return true;
		}
		else {
			if (obj instanceof String) {
				String str = (String) obj;
				return (str.trim().equals("")) ? Boolean.TRUE : Boolean.FALSE;
			}
			else if (obj instanceof Collection) {
				Collection <?> collection = (Collection <?>) obj;
				return (collection.size() == 0) ? Boolean.TRUE : Boolean.FALSE;
			}
		}
		return false;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="103">
<file line="1244" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="239" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CollectOutOfStateLicenseDataRules.java"/>
<codefragment>
<![CDATA[
		}
	}

	/**
	 * Checks if is nullor empty.
	 * 
	 * @param obj the obj
	 * 
	 * @return true, if is nullor empty
	 */
	private static boolean isNullorEmpty(Object obj) {
		if (obj == null) {
			return true;
		}
		else {
			if (obj instanceof String) {
				String str = (String) obj;
				return (str.trim().equals("")) ? Boolean.TRUE : Boolean.FALSE;
			}
			else if (obj instanceof Collection) {
				Collection <?> collection = (Collection <?>) obj;
				return (collection.size() == 0) ? Boolean.TRUE : Boolean.FALSE;
			}
		}
		return false;
	}
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="102">
<file line="71" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\CounselorReferralDocumentRequestTusTest.java"/>
<file line="61" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\DlInfoRequestReceiptDocumentRequestTusTest.java"/>
<file line="61" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\PhotoRetakeCNADocumentRequestTusTest.java"/>
<file line="61" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\request\impl\test\PhotoRetakeNotificationDocumentRequestTusTest.java"/>
<codefragment>
<![CDATA[
		driverRecordApplication = null;
		requestFixture = null;
	}

	/**
	 * Populate user context.
	 */
	private void populateUserContextFixture() {
		userContextFixture = new UserContext();
		userContextFixture.setTechId("SK");
		userContextFixture.setTtc("DLA");
		userContextFixture.setUserName("MWBRN");
		Calendar calendar = new GregorianCalendar(2010, Calendar.JUNE, 05);
		userContextFixture.setWorkDate(calendar.getTime());
		userContextFixture.setOfficeId("130");
		userContextFixture.setRacfId("23");
		userContextFixture.setIpAddress("127.0.0.1");
		CodeSetElement modeI = new CodeSetElement();
		modeI.setCode(IEaseModes.MANUAL);
		userContextFixture.setOperationalMode(modeI);
	}

	/**
	 * Populate Driver Record Application fixture.
	 */
	private void populateDriverRecordApplicationFixture() {
]]>
</codefragment>
</duplication>
<duplication lines="14" tokens="102">
<file line="288" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\DlInfoRequestReceiptDocumentConverterTest.java"/>
<file line="511" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\ProofOfFilingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		String[][] dataArrayTwo = populateDataTwoBType();
		List <String[][]> dataList = new ArrayList <String[][]>();
		dataList.add(dataArray);
		dataList.add(dataArrayTwo);
		List <String> templates = new ArrayList <String>();
		templates.add(DOCUMENT_1_TEMPLATE_NAME);
		templates.add(DOCUMENT_2_TEMPLATE_NAME);
		String expectedXML = DocumentConverterUtil.createXml(dataList,
				templates, true);
		String actualXML = converterFixture.convertToDocumentBinding(request);
		Assert.assertNotNull(actualXML);
		Assert.assertEquals(expectedXML.toString(), actualXML);
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="13" tokens="102">
<file line="113" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\SendFailureToAppearInformationConverterTest.java"/>
<file line="126" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\tus\print\convert\impl\test\FtpProcessingDocumentConverterTest.java"/>
<codefragment>
<![CDATA[
		violateDate.set(2010, Calendar.FEBRUARY, 02);
		citationDetail.setViolationDate(violateDate.getTime());
		List <SectionViolated> sectionsViolated = new ArrayList <SectionViolated>();
		sectionViolated = new SectionViolated();
		sectionViolated.setStatuteCode(new CodeSetElement("A", "A", "A"));
		sectionViolated.setSectionViolatedNumber("22350");
		sectionsViolated.add(sectionViolated);
		sectionViolated = new SectionViolated();
		sectionViolated.setStatuteCode(new CodeSetElement("X", "X", "X"));
		sectionViolated.setSectionViolatedNumber("0100");
		sectionsViolated.add(sectionViolated);
		citationDetail.setSectionsViolated(sectionsViolated);
		Calendar convictionDate = Calendar.getInstance();
]]>
</codefragment>
</duplication>
<duplication lines="17" tokens="102">
<file line="95" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ProblemDriverUpdateConverterTest.java"/>
<file line="214" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\ProblemDriverUpdateConverterTest.java"/>
<codefragment>
<![CDATA[
			String secondFirstName, String secondAkaSsn, String recordType2) {
		driverLicenseFixure = new DriverLicense();
		driverLicenseFixure.setLicenseNumber(licenseNumber);
		applicant = new Person();
		applicant.setDriverLicense(driverLicenseFixure);
		outOfStateLicenses = new ArrayList <OutOfStateLicense>();
		applicant.setPreviousLicenses(outOfStateLicenses);
		dlApplicationFixture.setApplicant(applicant);
		userContext = new UserContext();
		CodeSetElement incompleteAppReasonCode = new CodeSetElement();
		incompleteAppReasonCode.setCode(aIncompleteAppReasonCode);
		dlApplicationFixture
				.setNewIncompleteApplicationReasonCode(incompleteAppReasonCode);
		driverLicenseFixure.setEffectiveDate((EcsConverterHelper
				.convertStringToDate(effectiveDate,
						EcsConverterHelper.FORMATTER_MM_DD_YY)));
		List <PdpsRecord> pdpsRecords = new ArrayList <PdpsRecord>();
]]>
</codefragment>
</duplication>
<duplication lines="16" tokens="102">
<file line="171" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\service\impl\test\CdlisAndPdpsServiceTest.java"/>
<file line="227" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\service\impl\test\CdlisAndPdpsServiceTest.java"/>
<codefragment>
<![CDATA[
		cdlisAndPdpsServiceFixture = new CdlisAndPdpsService();
		expect(
				mockEcsRequestFactory
						.createCdlisAndPdpsRequestForBus(isA(IResponsePromise.class)))
				.andReturn(mockCdlisAndPdpsRequestEcs);
		expect(
				mockEcsRequestFactory.createSendCdlisAndPdpsRequestForBus(
						isA(License.class), isA(Person.class),
						isA(SocialSecurityDocument.class),
						isA(IUserContext.class))).andReturn(
				mockSendCdlisAndPdpsRequestEcs);
		expect(mockSendCdlisAndPdpsRequestEcs.execute()).andReturn(
				mockAsynchronousResponsePromise);
		expect(mockCdlisAndPdpsRequestEcs.execute()).andReturn(
				mockCdlisAndPdpsResponseEcs);
		expect(mockCdlisAndPdpsResponseEcs.hasError()).andReturn(true);
]]>
</codefragment>
</duplication>
<duplication lines="26" tokens="102">
<file line="1245" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="856" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\HeadQuartersInquiryRules.java"/>
<codefragment>
<![CDATA[
	}

	/**
	 * Checks if is nullor empty.
	 * 
	 * @param obj
	 *            the obj
	 * 
	 * @return true, if is nullor empty
	 */
	private static boolean isNullorEmpty(Object obj) {
		if (obj == null) {
			return true;
		}
		else {
			if (obj instanceof String) {
				String str = (String) obj;
				return (str.trim().equals("")) ? Boolean.TRUE : Boolean.FALSE;
			}
			else if (obj instanceof Collection) {
				Collection <?> collection = (Collection <?>) obj;
				return (collection.size() == 0) ? Boolean.TRUE : Boolean.FALSE;
			}
		}
		return false;
	}
]]>
</codefragment>
</duplication>
<duplication lines="18" tokens="102">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule298.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule299.java"/>
<codefragment>
<![CDATA[
public class DlaRule299 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		IUserContext userContext = processContext.getUserContext();
		if (isSingleHit(eliRecord)) {
			if (eliRecord.getOriginalApplicationTtc() != null 
					&& ArrayUtils.contains(IDENTIFICATION_CARD_APPLICATION_TTC, 
							eliRecord.getOriginalApplicationTtc())) {
				//If Original TTC was I*.
				if (userContext.getTtc().equalsIgnoreCase(DLP) 
						|| userContext.getTtc().equalsIgnoreCase(IDP)) {
					//If current transaction is Pending.
					if (eliRecord.getValidSsnRequired() != null 
							&& eliRecord.getValidSsnRequired().hasCodeEqualToAnyOf(
]]>
</codefragment>
</duplication>
<duplication lines="28" tokens="102">
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\activity\dl\business\impl\DafInquiryByDafNumberActivity.java"/>
<file line="45" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\app\activity\dl\business\impl\DafInquiryByDlNumberActivity.java"/>
<codefragment>
<![CDATA[
				.setDafInquiryTypes(DafInquiryTypes.Driver_License);
		DafRecordInquiryResponseTs dafRecordInquiryResponseTs = cdaTaskService
				.execute(dafRecordInquiryRequestTs);
		if (dafRecordInquiryResponseTs.hasErrors()) {
			//may need a temp dlApplication to restore updated fields.
			//DlaProcessContextHelper.copyDlApplicationToCurrentDlApplication(cdaContext.getDlApplication(), cdaContext.getDlApplication());
			this.populateErrorMessages(cdaContext, dafRecordInquiryResponseTs
					.getErrorCollector());
		}
		else {
			cdaContext.setTransaction((Transaction) dafRecordInquiryResponseTs
					.getTransaction());
			cdaContext
					.setDlApplication(((Transaction) dafRecordInquiryResponseTs
							.getTransaction()).getDlApplication());
			cdaContext
					.setReadOnlyDlApplication(((Transaction) dafRecordInquiryResponseTs
							.getTransaction()).getDlApplication());
		}
	}

	/**
	 * @param cdaTaskService the cdaTaskService to set
	 */
	public void setCdaTaskService(CdaTaskService cdaTaskService) {
		this.cdaTaskService = cdaTaskService;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="32" tokens="101">
<file line="53" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\impl\test\UpdateHomeAddressConfidentialityRequestEcsTest.java"/>
<file line="51" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\request\impl\test\UpdateProofOfInsuranceInformationRequestEcsTest.java"/>
<codefragment>
<![CDATA[
		 requestFixture = new UpdateProofOfInsuranceInformationRequestEcs(null, 
				null, null, null, null, null);
	}

	/**
	 * Tests get GetMessageconverter().
	 */
	@Test
	public void testGetMessageconverter() {
		IMessageConverter messageConverter = requestFixture.getMessageConverter();
		Assert.assertNotNull("The Converter instance for this request is expected.", 
				messageConverter);
	}
	
	/**
	 * Test validate.
	 */
	@Test
	public void testValidate() {
		IErrorCollector collector = requestFixture.validate();
		Assert.assertTrue(collector.hasErrors());
	}
	
	/**
	 * Test execute.
	 */
	@Test
	public void testExecute() {
		IEcsService mockEcsService = createMock(IEcsService.class);
		requestFixture.setEcsService(mockEcsService);
		expect(mockEcsService.processRequest(requestFixture))
			.andReturn(new UpdateProofOfInsuranceInformationResponseEcs());
]]>
</codefragment>
</duplication>
<duplication lines="14" tokens="101">
<file line="55" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\AutomatedNameIndexDlInquiryConverterTest.java"/>
<file line="377" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\ecs\convert\impl\test\SearchPersonByNameConverterTest.java"/>
<codefragment>
<![CDATA[
	public static void setMailingAddress(Person person, Address mailingAddress) {
		// If the mailing address is null then do nothing
		if (mailingAddress == null) {
			return;
		}
		List <Locator> locators = person.getLocators();
		if (locators != null && locators.size() > 0) {
			boolean exists = false;
			for (int index = 0; index < locators.size(); index++) {
				Address address = (Address) locators.get(index);
				if (address != null) {
					AddressType addressType = address.getAddressType();
					if (addressType != null
							&& ADDRESS_TYPE_MAIL.equals(addressType)) {
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="101">
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule11Test.java"/>
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule15Test.java"/>
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\test\DlaRule53Test.java"/>
<codefragment>
<![CDATA[
		ruleFixture = new DlaRule53();
		dlaProcessContext = new DlaProcessContext();
		dlaProcessContext.setCurrentActivity(new EndActivity());
		SessionContext sessionContext = new SessionContext();
		sessionContext.setUserContext(UserContextFixtureFactory
				.createUserContext());
		dlaProcessContext.startIn(sessionContext);
		DlApplication dlApplication = DlApplicationFixtureFactory
				.createDlApplicationForCda();
		dlaProcessContext.setDlApplication(dlApplication);
		eliRecord = EliRecordFixtureFactory
				.createEliRecordForRecordConditions();
	}

	@Override
	@After
	public void tearDown() throws Exception {
	}

	public void testEvaluateFalse() {
		assertFalse(ruleFixture.evaluate(eliRecord, dlaProcessContext, "DLA"));
	}

	public void testEvaluateTrue() {
]]>
</codefragment>
</duplication>
<duplication lines="31" tokens="101">
<file line="35" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\SpD505Rule.java"/>
<file line="40" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\SpD718Rule.java"/>
<codefragment>
<![CDATA[
										IDataCollectionErrorMessageConstants.CHANGES_MUST_FIRST_BE_MADE_VIA_AN_ID_APP));
			}
		}
	}

	/**
	 * Checks for changes to the name, gender or birth date. 
	 *
	 * @param context the context
	 * @return true, if successful
	 */
	private boolean hasChanges(ProcessContext context) {
		// has bdate changed?
		SpProcessContext spContext = (SpProcessContext) context;
		if (spContext.getChangedBirthDate() != null){
			if(getDateDifferenceInDays(spContext.getChangedBirthDate(),
						getApplicant(context).getBirthDate()) != 0){
				return true;
			}
		}
		// name change? 
		// TODO: should this compare to person.getPersonNames? Is getPreviousName used? 
		if (!getApplicant(context).getCurrentName().equals(
				getApplicant(context).getPreviousName()))
			return true;
		// Gender changed? 
		if (getApplicant(context).isGenderChanged())
			return true;
		return false;
	}
}
]]>
</codefragment>
</duplication>
<duplication lines="29" tokens="101">
<file line="283" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CollectAddressInfoDataRules.java"/>
<file line="42" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\SpD095Rule.java"/>
<codefragment>
<![CDATA[
			validateOutOfState(getErrorCollector(),mailingState, mailingZipCode);
		}		
	}

	/**
	 * @param errorCollector
	 * @param mailState
	 * @param mailZipCode
	 */
	public void validateOutOfState(IErrorCollector errorCollector,
			String state, String zipCode) {
		if (zipCode != null) {
			int zipInt = Integer.parseInt(zipCode);
			if (zipInt >= 90000 && zipInt <= 96699) {
				if (!IStateCodeConstants.CALIFORNIA.equals(state)) {
					errorCollector
							.register(new EaseValidationException(
									IDataCollectionErrorMessageConstants.ZIP_CODE_VS_OUT_OF_STATE));
				}
			}
			else {
				if (IStateCodeConstants.CALIFORNIA.equals(state)) {
					errorCollector
							.register(new EaseValidationException(
									IDataCollectionErrorMessageConstants.ZIP_CODE_VS_OUT_OF_STATE));
				}
			}
		}
	}
]]>
</codefragment>
</duplication>
<duplication lines="16" tokens="100">
<file line="124" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\core\dl\validator\impl\test\DlCdlisReceiptRequestValidatorTest.java"/>
<file line="110" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\core\dl\validator\impl\test\DlOrganDonorReceiptRequestValidatorTest.java"/>
<codefragment>
<![CDATA[
		IErrorCollector errorCollector = fixture.validate(dlApplication);
		assertTrue(errorCollector.hasErrors());
		assertTrue(errorCollector.getEntries().size() == 1);
		assertEquals(SpringUtils
				.getMessage(INVALID_DL_APPLICATION_ERROR_MESSAGE),
				errorCollector.getEntries().get(0).getExceptionMessage());
	}

	@Test
	public void testDlApplicationPersonBirthDateNull() {
		DlApplication dlApplication = new DlApplication();
		dlApplication.getLicense().setLicenseNumber("D121121");
		Person person = new Person();
		person.setBirthDate(null);
		dlApplication.setApplicant(person);
		IErrorCollector errorCollector = fixture.validate(dlApplication);
]]>
</codefragment>
</duplication>
<duplication lines="24" tokens="100">
<file line="55" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\PrintTestResultsDocumentsActivityTest.java"/>
<file line="56" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\UpdateCdaTransactionActivityTest.java"/>
<file line="53" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\test\java\gov\ca\dmv\ease\app\activity\dl\business\impl\test\UpdateDafActivityTest.java"/>
<codefragment>
<![CDATA[
		fixture = new UpdateDafActivity();
		String key = IProcessLoader.DEFAULT_TRANSITION_KEY;
		fixture.setTransitionKey(key);
		TransitionsMap transitions = new TransitionsMap();
		transitions.addTransitions(key, new EndActivity());
		fixture.setTransitions(transitions);
		mockCdaTaskService = createMock(CdaTaskService.class);
		fixture.setCdaTaskService(mockCdaTaskService);
		sessionContext = new SessionContext();
		sessionContext.setUserContext(UserContextFixtureFactory
				.createUserContext());
		cdaProcessContext = new CdaProcessContext();
		cdaProcessContext.setCurrentActivity(fixture);
	}

	/* (non-Javadoc)
	 * @see junit.framework.TestCase#tearDown()
	 */
	protected void tearDown() throws Exception {
		mockCdaTaskService = null;
		super.tearDown();
	}

	public void testInvoke() {
]]>
</codefragment>
</duplication>
<duplication lines="16" tokens="100">
<file line="1255" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdlisAndPdpsInquiryRules.java"/>
<file line="30" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\ValidationRulesUtil.java"/>
<codefragment>
<![CDATA[
	public static boolean isNullorEmpty(Object obj) {
		if (obj == null) {
			return true;
		}
		else {
			if (obj instanceof String) {
				String str = (String) obj;
				return (str.trim().equals("")) ? Boolean.TRUE : Boolean.FALSE;
			}
			else if (obj instanceof Collection) {
				Collection <?> collection = (Collection <?>) obj;
				return (collection.size() == 0) ? Boolean.TRUE : Boolean.FALSE;
			}
		}
		return false;
	}
]]>
</codefragment>
</duplication>
<duplication lines="33" tokens="100">
<file line="42" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD522Rule.java"/>
<file line="43" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD524Rule.java"/>
<codefragment>
<![CDATA[
				validate(commercialTestResultGroup,
						CommercialTestResultType.GENERAL_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.AIR_BRAKES_TEST_RESULT,
						errorCollector);
				validate(
						commercialTestResultGroup,
						CommercialTestResultType.CLASSA_COMBINATION_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.TRAILERCOACH_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.FIREFIGHTER_TEST_RESULT,
						errorCollector);
				validate(
						commercialTestResultGroup,
						CommercialTestResultType.FIREFIGHTER_CLASSA_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.PASSENGER_TEST_RESULT,
						errorCollector);
				validate(
						commercialTestResultGroup,
						CommercialTestResultType.DOUBLES_OR_TRIPLES_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.TANK_TEST_RESULT,
						errorCollector);
				validate(commercialTestResultGroup,
						CommercialTestResultType.HAZMAT_TEST_RESULT,
						errorCollector);
]]>
</codefragment>
</duplication>
<duplication lines="19" tokens="100">
<file line="28" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Cda0504Rule.java"/>
<file line="30" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Cda0505Rule.java"/>
<codefragment>
<![CDATA[
public class Cda0505Rule extends AbstractValidateRule{

	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.validator.IValidationRule#validate(gov.ca.dmv.ease.app.context.impl.ProcessContext)
	 */
	public void validate(ProcessContext processContext) {
		CdaProcessContext cdaProcessContext = (CdaProcessContext) processContext;
		IErrorCollector errorCollector = new ErrorCollector();
		
		Action selectedAction = cdaProcessContext.getSelectedAction();
		if (selectedAction != null
				&& selectedAction.equals(getActionsRegistry().getAction(
						IActionsRegistry.ENTER_ACTION))) {
			String printDocumentRequested = cdaProcessContext
					.getDlApplication().getDlPrintRequestDocumentCode()
					.getCode();
			if ((printDocumentRequested != null
					&& printDocumentRequested.trim().length() > 0 && printDocumentRequested
					.equals("3"))) {
]]>
</codefragment>
</duplication>
<duplication lines="14" tokens="100">
<file line="54" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\Cda0013Rule.java"/>
<file line="62" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\core\dl\validator\impl\CdaD669Rule.java"/>
<codefragment>
<![CDATA[
			IUserContext userContext, IErrorCollector errorCollector) {
		List<DrivingRestriction> existingRestrictions = driverLicense
				.getExistingRestrictions();
		List<DrivingRestriction> newRestrictions = driverLicense
				.getNewRestrictions();
		List<DrivingRestriction> restrictions = new ArrayList<DrivingRestriction>();
		if (newRestrictions != null)
			restrictions.addAll(newRestrictions);
		if (existingRestrictions != null)
			restrictions.addAll(existingRestrictions);
		if (restrictions != null && restrictions.size() > 0) {
			for (Iterator<DrivingRestriction> iterator = restrictions
					.iterator(); iterator.hasNext();) {
				DrivingRestriction restriction = iterator.next();
]]>
</codefragment>
</duplication>
<duplication lines="19" tokens="100">
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule298.java"/>
<file line="24" path="C:\Documents and Settings\mwpxa4\.hudson\jobs\Website_DL\workspace\src\main\java\gov\ca\dmv\ease\bus\dl\staticdata\rcrule\impl\DlaRule300.java"/>
<codefragment>
<![CDATA[
public class DlaRule300 extends RecordCondition {
	/* (non-Javadoc)
	 * @see gov.ca.dmv.ease.bus.dl.staticdata.rcrule.impl.RecordCondition#evaluate(gov.ca.dmv.ease.bo.license.impl.EliRecord, gov.ca.dmv.ease.app.context.impl.ProcessContext, java.lang.String)
	 */
	@Override
	public boolean evaluate(EliRecord eliRecord, ProcessContext processContext,
			String code) {
		IUserContext userContext = processContext.getUserContext();
		if (isSingleHit(eliRecord)) {
			if (eliRecord.getOriginalApplicationTtc() != null
					&& ArrayUtils.contains(IDENTIFICATION_CARD_APPLICATION_TTC,
							eliRecord.getOriginalApplicationTtc())) {
				// If Original TTC was I*.
				if (userContext.getTtc().equalsIgnoreCase(DLP)
						|| userContext.getTtc().equalsIgnoreCase(IDP)) {
					// If current transaction is Pending.
					if (eliRecord.getValidSsnRequired() != null
							&& eliRecord.getValidSsnRequired()
									.hasCodeEqualTo(F))
]]>
</codefragment>
</duplication>
</pmd-cpd>